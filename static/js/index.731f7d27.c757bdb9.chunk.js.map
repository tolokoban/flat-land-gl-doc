{"version":3,"sources":["../../flat-land-gl/dist/webgl/program.js","../../flat-land-gl/dist/painter/painter.js","../../flat-land-gl/dist/converter/string.js","../../flat-land-gl/dist/painter/background/background.js","../../flat-land-gl/dist/webgl/color.js","../../flat-land-gl/dist/painter/clear.js","../../flat-land-gl/dist/painter/sprites/sprite.js","../../flat-land-gl/dist/painter/sprites/sprites.vert","../../flat-land-gl/dist/painter/sprites/sprites.frag","../../flat-land-gl/dist/painter/sprites/sprites.js","../../flat-land-gl/dist/painter/index.js","../../flat-land-gl/dist/atlas.js","../../flat-land-gl/dist/webgl/resize.js","../../flat-land-gl/dist/scene.js","../../flat-land-gl/dist/index.js","canvas.tsx","App.tsx","serviceWorker.ts","index.tsx","view/description/description.tsx","view/description/index.ts","page/tutorial/clear/index.tsx","page/tutorial/clear/clear.md"],"names":["__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","BPE","Float32Array","BYTES_PER_ELEMENT","Program","gl","codes","includes","vert","Error","frag","parseInclude","parseIncludes","this","Object","freeze","_typesNamesLookup","lookup","k","toUpperCase","v","getTypesNamesLookup","shaderProgram","createProgram","program","vertShader","code","getShader","VERTEX_SHADER","getVertexShader","attachShader","fragShader","FRAGMENT_SHADER","getFragmentShader","linkProgram","use","useProgram","attribs","createAttributes","uniforms","createUniforms","prototype","attribsCount","getProgramParameter","ACTIVE_ATTRIBUTES","index","item","getActiveAttrib","typeName","getTypeName","type","getSize","location","getAttribLocation","name","defineProperty","writable","enumerable","configurable","FLOAT_VEC4","FLOAT_VEC3","FLOAT_VEC2","FLOAT","typeId","bindAttribs","buffer","e_1","_a","e_2","_b","names","_i","arguments","that","bindBuffer","ARRAY_BUFFER","totalSize","names_1","names_1_1","name_1","attrib","keys","map","join","size","e_1_1","error","return","offset","names_2","names_2_1","name_2","enableVertexAttribArray","vertexAttribPointer","e_2_1","setUniform","uniformsCount","ACTIVE_UNIFORMS","getActiveUniform","location_1","getUniformLocation","set","createUniformSetter","get","createUniformGetter","nameGL","nameJS","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","SAMPLER_2D","uniform1i","uniform1iv","uniform1f","uniform1fv","uniform2fv","uniform3fv","uniform4fv","FLOAT_MAT3","uniformMatrix3fv","FLOAT_MAT4","uniformMatrix4fv","split","line","trim","substr","pos","indexOf","includeName","charAt","snippet","console","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","ID","Painter","params","_name","scene","$attachPainter","destroy","$detachPainter","shaders","fatal","message","castString","defaultValue","t","isNaN","__extends","_extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","_super","BackgroundPainter","_this","atlas","atlasObj","getAtlas","prg","getVert","align","FRAG","buff","createBuffer","bufferData","STATIC_DRAW","render","disable","DEPTH_TEST","activate","$uniTexture","width","height","drawArrays","TRIANGLE_STRIP","x","y","__read","n","r","e","ar","push","Color","codeCSS","R","G","B","H","S","L","A","parse","toArrayRGB","toArrayRGBA","isValid","normalize","stringify","luminance","luminanceStep","fromArrayRGB","rgb","newRGB","fromArrayRGBA","rgba","newRGBA","mix","color1","color2","alpha","beta","ramp","colors","newBlack","spacesCount","firstColorIndex","Math","floor","translatedAlpha","newWhite","red","green","blue","color","input","parseHexa","parseRGB","parseRGBA","parseHSL","hexa2","copy","newColor","hsl2rgb","chroma","abs","shift","rgb2hsl","min","max","delta","INV6","text","parseInt","INV15","INV255","RX_RGB","exec","clamp01","RX_RGBA","parseFloat","RX_HSL","INV359","INV99","out","toString","ClearPainter","_red","_green","_blue","_alpha","cssColor","clearColor","clear","COLOR_BUFFER_BIT","__assign","assign","apply","Sprite","getData","extra","$index","z","originX","originY","u0","v0","u1","v1","scale","update","newParams","data","xxA","yyA","xA","yA","xB","yB","xC","yC","xD","yD","BLOCK","CHUNK","NB_ATTRIBS","createElements","capacity","dataElem","Uint16Array","a","c","Background","Clear","Sprites","SpritesPainter","dataVert","sprites","count","buffVert","DYNAMIC_DRAW","buffElem","ELEMENT_ARRAY_BUFFER","createSprite","allocateNewBlock","sprite","enable","$uniWidth","$uniHeight","drawElements","TRIANGLES","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","__generator","body","f","g","_","label","sent","trys","ops","verb","op","pop","Atlas","_ready","_width","_height","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","deleteTexture","unit","UNITS","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","activeTexture","load","loadImage","image","url","img","Image","onload","texImage2D","RGBA","onerror","src","resolution","window","devicePixelRatio","canvas","displayWidth","clientWidth","displayHeight","clientHeight","viewport","FlatLand","activePainters","isRendering","onAnimation","time","requestAnimationFrame","clearDepth","DEPTH_BUFFER_BIT","depthFunc","GEQUAL","_c","ex","stop","getContext","atlases","Map","painters","createAtlas","destroyAtlas","delete","painter","has","filter","drawingBufferWidth","drawingBufferHeight","start","Scene","Canvas","ref","React","createRef","current","props","init","className","Component","App","href","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","Description","options","forceBlock","content"],"mappings":"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","file":"static/js/index.731f7d27.c757bdb9.chunk.js","sourcesContent":["var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar BPE = new Float32Array().BYTES_PER_ELEMENT;\n/**\n * Creating  a  WebGL  program  for shaders  is  painful.  This  class\n * simplifies the process.\n *\n * @class Program\n *\n * Object properties starting with `$` are WebGL uniforms or attributes.\n * Uniforms behave as expected: you can read/write a value.\n * Attributes when read, return the location. And when written, enable/disabled\n * this attribute. So you read integers and writte booleans.\n *\n * @param gl - WebGL context.\n * @param codes  - Object  with two  mandatory attributes:  `vert` for\n * vertex shader and `frag` for fragment shader.\n * @param  includes  -  (optional)  If  defined,  the  `#include  foo`\n * directives  of  shaders   will  be  replaced  by   the  content  of\n * `includes.foo`.\n */\n\nvar Program =\n/** @class */\nfunction () {\n  function Program(gl, codes, includes) {\n    if (includes === void 0) {\n      includes = {};\n    }\n\n    if (typeof codes.vert !== 'string') {\n      throw Error('[webgl.program] Missing attribute `vert` in argument `codes`!');\n    }\n\n    if (typeof codes.frag !== 'string') {\n      throw Error('[webgl.program] Missing attribute `frag` in argument `codes`!');\n    }\n\n    codes = parseIncludes(codes, includes);\n    this.gl = gl;\n    Object.freeze(this.gl);\n    this.BPE = BPE;\n    Object.freeze(this.BPE);\n    this._typesNamesLookup = getTypesNamesLookup(gl);\n    var shaderProgram = gl.createProgram();\n\n    if (!shaderProgram) {\n      throw Error('Unable to create WebGLProgram!');\n    }\n\n    this.program = shaderProgram;\n    var vertShader = getVertexShader(gl, codes.vert);\n    gl.attachShader(shaderProgram, vertShader);\n    var fragShader = getFragmentShader(gl, codes.frag);\n    gl.attachShader(shaderProgram, fragShader);\n    gl.linkProgram(shaderProgram);\n\n    this.use = function () {\n      gl.useProgram(shaderProgram);\n    };\n\n    this.attribs = this.createAttributes();\n    this.uniforms = this.createUniforms();\n  }\n\n  Program.prototype.createAttributes = function () {\n    var _a = this,\n        gl = _a.gl,\n        program = _a.program;\n\n    var attribs = {};\n    var attribsCount = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n    for (var index = 0; index < attribsCount; index++) {\n      var item = gl.getActiveAttrib(program, index);\n      if (!item) continue;\n      item.typeName = this.getTypeName(item.type);\n      item.length = this.getSize(gl, item);\n      item.location = gl.getAttribLocation(program, item.name);\n      attribs[item.name] = item;\n      Object.defineProperty(this, '$' + item.name, {\n        value: item.location,\n        writable: false,\n        enumerable: true,\n        configurable: false\n      });\n    }\n\n    return attribs;\n  };\n\n  Program.prototype.getSize = function (gl, item) {\n    switch (item.type) {\n      case gl.FLOAT_VEC4:\n        return 4;\n\n      case gl.FLOAT_VEC3:\n        return 3;\n\n      case gl.FLOAT_VEC2:\n        return 2;\n\n      case gl.FLOAT:\n        return 1;\n\n      default:\n        throw Error(\"[webgl.program:getSize] I don't know the size of the attribute '\" + item.name + \"' because I don't know the type \" + this.getTypeName(item.type) + \"!\");\n    }\n  };\n\n  Program.prototype.use = function () {\n    this.gl.useProgram(this.program);\n  };\n\n  Program.prototype.getTypeName = function (typeId) {\n    return this._typesNamesLookup[typeId];\n  };\n\n  Program.prototype.bindAttribs = function (buffer) {\n    var e_1, _a, e_2, _b;\n\n    var names = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      names[_i - 1] = arguments[_i];\n    }\n\n    var that = this;\n    var gl = this.gl;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    var totalSize = 0;\n\n    try {\n      for (var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {\n        var name_1 = names_1_1.value;\n        var attrib = that.attribs[name_1];\n\n        if (!attrib) {\n          throw Error(\"Cannot find attribute \\\"\" + name_1 + \"\\\"!\\n\" + \"It may be not active because unused in the shader.\\n\" + \"Available attributes are: \" + Object.keys(that.attribs).map(function (name) {\n            return '\"' + name + '\"';\n          }).join(\", \") + (\" (\" + that.attribs.length + \")\"));\n        }\n\n        totalSize += attrib.size * attrib.length * BPE;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    var offset = 0;\n\n    try {\n      for (var names_2 = __values(names), names_2_1 = names_2.next(); !names_2_1.done; names_2_1 = names_2.next()) {\n        var name_2 = names_2_1.value;\n        var attrib = that.attribs[name_2];\n        gl.enableVertexAttribArray(attrib.location);\n        gl.vertexAttribPointer(attrib.location, attrib.size * attrib.length, gl.FLOAT, false, // No normalisation.\n        totalSize, offset);\n        offset += attrib.size * attrib.length * BPE;\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (names_2_1 && !names_2_1.done && (_b = names_2.return)) _b.call(names_2);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  };\n\n  Program.prototype.setUniform = function (name, value) {\n    var id = '$' + name;\n    var map = this;\n    map[id] = value;\n  };\n\n  Program.prototype.createUniforms = function () {\n    var _a = this,\n        gl = _a.gl,\n        program = _a.program;\n\n    var uniforms = {};\n    var uniformsCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (var index = 0; index < uniformsCount; index++) {\n      var item = gl.getActiveUniform(program, index);\n      if (!item) continue;\n      var location_1 = gl.getUniformLocation(program, item.name);\n      if (!location_1) continue;\n      uniforms[item.name] = location_1;\n      Object.defineProperty(this, '$' + item.name, {\n        set: this.createUniformSetter(item, uniforms[item.name], this._typesNamesLookup),\n        get: this.createUniformGetter(item),\n        enumerable: true,\n        configurable: false\n      });\n    }\n\n    return uniforms;\n  };\n\n  Program.prototype.createUniformSetter = function (item, nameGL, lookup) {\n    var gl = this.gl;\n    var nameJS = '_$' + item.name;\n\n    switch (item.type) {\n      case gl.BYTE:\n      case gl.UNSIGNED_BYTE:\n      case gl.SHORT:\n      case gl.UNSIGNED_SHORT:\n      case gl.INT:\n      case gl.UNSIGNED_INT:\n      case gl.SAMPLER_2D:\n        // For textures, we specify the texture unit.\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform1i(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          return function (v) {\n            gl.uniform1iv(nameGL, v);\n            this[nameJS] = v;\n          };\n        }\n\n      case gl.FLOAT:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform1f(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          return function (v) {\n            gl.uniform1fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        }\n\n      case gl.FLOAT_VEC2:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform2fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC2 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_VEC3:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform3fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC3 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_VEC4:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform4fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC4 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_MAT3:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniformMatrix3fv(nameGL, false, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT3 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_MAT4:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniformMatrix4fv(nameGL, false, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT4 in uniform `\" + item.name + \"'!'\");\n        }\n\n      default:\n        throw Error(\"[webgl.program.createWriter] Don't know how to deal with uniform `\" + item.name + \"` of type \" + lookup[item.type] + \"!\");\n    }\n  };\n\n  Program.prototype.createUniformGetter = function (item) {\n    var name = '_$' + item.name;\n    return function () {\n      return this[name];\n    };\n  };\n\n  return Program;\n}();\n\nexport default Program;\n/**\n * This is a preprocessor for shaders.\n * Directives  `#include`  will be  replaced  by  the content  of  the\n * correspondent attribute in `includes`.\n */\n\nfunction parseIncludes(codes, includes) {\n  return {\n    vert: parseInclude(codes.vert, includes),\n    frag: parseInclude(codes.frag, includes)\n  };\n}\n\nfunction parseInclude(code, includes) {\n  return code.split('\\n').map(function (line) {\n    if (line.trim().substr(0, 8) !== '#include') return line;\n    var pos = line.indexOf('#include') + 8;\n    var includeName = line.substr(pos).trim(); // We accept all this systaxes:\n    // #include foo\n    // #include 'foo'\n    // #include <foo>\n    // #include \"foo\"\n\n    if (\"'<\\\"\".indexOf(includeName.charAt(0)) > -1) {\n      includeName = includeName.substr(1, includeName.length - 2);\n    }\n\n    var snippet = includes[includeName];\n\n    if (typeof snippet !== 'string') {\n      console.error(\"Include <\" + includeName + \"> not found in \", includes);\n      throw Error(\"Include not found in shader: \" + includeName);\n    }\n\n    return snippet;\n  }).join(\"\\n\");\n}\n\nfunction getShader(type, gl, code) {\n  if (type !== gl.VERTEX_SHADER && type !== gl.FRAGMENT_SHADER) {\n    throw Error('Type must be VERTEX_SHADER or FRAGMENT_SHADER!');\n  }\n\n  var shader = gl.createShader(type);\n\n  if (!shader) {\n    throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n  }\n\n  gl.shaderSource(shader, code);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    console.log(code);\n    console.error(\"An error occurred compiling the shader: \" + gl.getShaderInfoLog(shader));\n    throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n  }\n\n  return shader;\n}\n\nfunction getFragmentShader(gl, code) {\n  return getShader(gl.FRAGMENT_SHADER, gl, code);\n}\n\nfunction getVertexShader(gl, code) {\n  return getShader(gl.VERTEX_SHADER, gl, code);\n}\n\nfunction getTypesNamesLookup(gl) {\n  var lookup = {};\n\n  for (var k in gl) {\n    if (k !== k.toUpperCase()) continue;\n    var v = gl[k];\n\n    if (typeof v === 'number') {\n      lookup[v] = k;\n    }\n  }\n\n  return lookup;\n}","/**\n * This is a virtual painter from which all the other will inherit.\n */\nimport Program from '../webgl/program';\nvar ID = 0;\n\nvar Painter =\n/** @class */\nfunction () {\n  function Painter(params) {\n    this._name = \"\" + ID++;\n    if (!params.scene) throw Error('Argument \"params.scene\" is mandatory!');\n    this.scene = params.scene;\n\n    if (typeof params.name === 'string' && params.name.length > 0) {\n      this._name = params.name;\n    }\n\n    this.scene.$attachPainter(this);\n  }\n\n  Painter.prototype.destroy = function () {\n    this.scene.$detachPainter(this.name);\n  };\n\n  Object.defineProperty(Painter.prototype, \"name\", {\n    get: function get() {\n      return this._name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Painter.prototype.createProgram = function (shaders, includes) {\n    if (includes === void 0) {\n      includes = {};\n    }\n\n    return new Program(this.scene.gl, shaders, includes);\n  };\n\n  Painter.prototype.fatal = function (message) {\n    console.error(\"Fatal error in Painter \\\"\" + this.name + \"\\\":\", message);\n    return new Error(message);\n  };\n\n  return Painter;\n}();\n\nexport default Painter;","export default function castString(value, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = \"\";\n  }\n\n  var t = typeof value;\n\n  if (t === 'number' && !isNaN(value)) {\n    return \"\" + value;\n  }\n\n  if (t === 'string') return value;\n  return defaultValue;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Background the screen by filling it with an image that covers it entirely.\n */\n\n\nimport Painter from '../painter';\nimport castString from '../../converter/string';\n\nvar BackgroundPainter =\n/** @class */\nfunction (_super) {\n  __extends(BackgroundPainter, _super);\n  /**\n   * params: { atlas, align }\n   * - align: if undefined, the background will be centered.\n   *          \"R\" means that the Right edge of the background is always visible.\n   *          \"L\" means the same for Left.\n   *          \"T\" for Top.\n   *          \"B\" for \"Bottom\".\n   */\n\n\n  function BackgroundPainter(params) {\n    var _this = _super.call(this, params) || this;\n\n    var scene = params.scene,\n        atlas = params.atlas;\n    var atlasObj = scene.getAtlas(atlas);\n\n    if (!atlasObj) {\n      throw _this.fatal(\"Atlas \\\"\" + atlas + \"\\\" not found!\");\n    }\n\n    _this.atlas = atlasObj;\n    _this.prg = _this.createProgram({\n      vert: getVert(castString(params.align).toUpperCase()),\n      frag: FRAG\n    });\n    var gl = scene.gl;\n    var buff = gl.createBuffer();\n\n    if (!buff) {\n      throw _this.fatal(\"Not enough memory to create an array buffer!\");\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\n    _this.buff = buff;\n    return _this;\n  }\n\n  BackgroundPainter.prototype.render = function () {\n    var _a = this,\n        scene = _a.scene,\n        prg = _a.prg,\n        atlas = _a.atlas,\n        buff = _a.buff;\n\n    var gl = scene.gl;\n    gl.disable(gl.DEPTH_TEST);\n    prg.use();\n    atlas.activate();\n    var uniforms = prg;\n    uniforms.$uniTexture = 0;\n    prg.setUniform(\"uniAspectRatio\", scene.width / scene.height);\n    prg.bindAttribs(buff, \"attXY\");\n    gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  };\n\n  return BackgroundPainter;\n}(Painter);\n\nexport default BackgroundPainter;\n\nfunction getVert(align) {\n  var x = \"\";\n  var y = \"\";\n\n  if (align.indexOf(\"B\") !== -1) {\n    y = \"location.y -= uniAspectRatio - 1.0;\";\n  } else if (align.indexOf(\"T\") !== -1) {\n    y = \"location.y += uniAspectRatio - 1.0;\";\n  }\n\n  if (align.indexOf(\"R\") !== -1) {\n    x = \"location.x -= 1.0 / uniAspectRatio - 1.0;\";\n  } else if (align.indexOf(\"L\") !== -1) {\n    x = \"location.x += 1.0 / uniAspectRatio - 1.0;\";\n  }\n\n  return \"uniform float uniAspectRatio;\\nattribute vec2 attXY;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  varUV = attXY;\\n  vec2 location = 2.0 * (attXY - vec2(0.5, 0.5));\\n\\n  if (uniAspectRatio > 1.0) {\\n    location.y *= uniAspectRatio;\" + y + \"\\n  } else {\\n    location.x /= uniAspectRatio;\" + x + \"\\n  }\\n\\n  gl_Position = vec4(location.x, -location.y, -1.0, 1.0);\\n}\";\n}\n\nvar FRAG = \"precision mediump float;\\nuniform sampler2D uniTexture;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  vec4 color = texture2D( uniTexture, varUV );\\n  gl_FragColor = color;\\n}\";","var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n/**\n * @class Color\n * Fast color manipulations.\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\n * (saturation), and L (luminance) are all floats between 0 and 1.\n */\n\n\nvar Color =\n/** @class */\nfunction () {\n  function Color(codeCSS) {\n    if (codeCSS === void 0) {\n      codeCSS = \"#000000\";\n    }\n\n    this.R = 0;\n    this.G = 0;\n    this.B = 0;\n    this.H = 0;\n    this.S = 0;\n    this.L = 0;\n    this.A = 1;\n    this.parse(codeCSS);\n  }\n\n  Color.prototype.toArrayRGB = function () {\n    return [this.R, this.G, this.B];\n  };\n\n  Color.prototype.toArrayRGBA = function () {\n    return [this.R, this.G, this.B, this.A];\n  };\n\n  Color.isValid = function (codeCSS) {\n    if (typeof codeCSS !== 'string') return false;\n    if (codeCSS.charAt(0) !== '#') return false;\n\n    switch (codeCSS.length) {\n      case 4: // #RGB\n\n      case 5: // #RGBA\n\n      case 7: // #RRGGBB\n\n      case 9:\n        // #RRGGBBAA\n        return true;\n    }\n\n    return false;\n  };\n\n  Color.normalize = function (codeCSS) {\n    var color = new Color(codeCSS);\n    return color.stringify();\n  };\n\n  Color.luminance = function (codeCSS) {\n    var color = new Color(codeCSS);\n    return color.luminance();\n  };\n  /**\n   * Returns 1 for bright colors and 0 for dark colors.\n   */\n\n\n  Color.luminanceStep = function (codeCSS) {\n    var color = new Color(codeCSS);\n    return color.luminanceStep();\n  };\n\n  Color.fromArrayRGB = function (rgb) {\n    var _a = __read(rgb, 3),\n        R = _a[0],\n        G = _a[1],\n        B = _a[2];\n\n    return this.newRGB(R, G, B);\n  };\n\n  Color.fromArrayRGBA = function (rgba) {\n    var _a = __read(rgba, 4),\n        R = _a[0],\n        G = _a[1],\n        B = _a[2],\n        A = _a[3];\n\n    return this.newRGBA(R, G, B, A);\n  };\n  /**\n   * Mix two colors. alpha should be between 0 and 1,\n   * but there is no check on this.\n   * If alpha is 0, the resulting color is `color1`,\n   * if alpha is 1, the resulting color is `color2`.\n   */\n\n\n  Color.mix = function (color1, color2, alpha) {\n    if (alpha === void 0) {\n      alpha = .5;\n    }\n\n    var beta = 1 - alpha;\n    return Color.newRGBA(alpha * color2.R + beta * color1.R, alpha * color2.G + beta * color1.G, alpha * color2.B + beta * color1.B, alpha * color2.A + beta * color1.A);\n  };\n  /**\n   * If `colors` has only two elements, this method is the same as `mix()`.\n   * Otherwise, it will perform a linear blending through the colors.\n   * If alpha is 0, the resulting color is `colors[0]`,\n   * If alpha is 1, the resulting color is `colors[colors.length - 1]`,\n   */\n\n\n  Color.ramp = function (colors, alpha) {\n    if (alpha === void 0) {\n      alpha = .5;\n    }\n\n    if (colors.length === 0) return Color.newBlack();\n    if (colors.length === 1) return colors[0];\n    var spacesCount = colors.length - 1;\n    var firstColorIndex = Math.floor(alpha * spacesCount);\n    var color1 = colors[firstColorIndex];\n    if (firstColorIndex === spacesCount) return color1;\n    var color2 = colors[firstColorIndex + 1];\n    var translatedAlpha = firstColorIndex + alpha / spacesCount;\n    return Color.mix(color1, color2, translatedAlpha);\n  };\n\n  Color.newBlack = function () {\n    return Color.newRGB(0, 0, 0);\n  };\n\n  Color.newWhite = function () {\n    return Color.newRGB(1, 1, 1);\n  };\n  /**\n   * Create a new Color instance base on R,G,B channels.\n   *\n   * @param   {number} red - Value between 0 and 1.\n   * @param   {number} green - Value between 0 and 1.\n   * @param   {number} blue - Value between 0 and 1.\n   * @returns {Color} New instance of Color.\n   */\n\n\n  Color.newRGB = function (red, green, blue) {\n    var color = new Color();\n    color.R = red;\n    color.G = green;\n    color.B = blue;\n    color.A = 1;\n    return color;\n  };\n  /**\n   * Create a new Color instance base on R,G,B,A channels.\n   *\n   * @param   {number} red - Value between 0 and 1.\n   * @param   {number} green - Value between 0 and 1.\n   * @param   {number} blue - Value between 0 and 1.\n   * @param   {number} alpha - Value between 0 and 1.\n   * @returns {Color} New instance of Color.\n   */\n\n\n  Color.newRGBA = function (red, green, blue, alpha) {\n    var color = new Color();\n    color.R = red;\n    color.G = green;\n    color.B = blue;\n    color.A = alpha;\n    return color;\n  };\n  /**\n   * Parse a color writtent in CSS syntax.\n   *\n   * @param   {string} code - CSS color.\n   * @returns {boolean} `true` if the color has valid syntax.\n   */\n\n\n  Color.prototype.parse = function (code) {\n    if (code === void 0) {\n      code = \"#000000\";\n    }\n\n    var input = code.trim().toUpperCase();\n    if (this.parseHexa.call(this, input)) return true;\n    if (this.parseRGB.call(this, input)) return true;\n    if (this.parseRGBA.call(this, input)) return true;\n    if (this.parseHSL.call(this, input)) return true; // @TODO parseHSLA.\n\n    return false;\n  };\n  /**\n   * @see https://en.wikipedia.org/wiki/Grayscale\n   * @this Color\n   * @returns {undefined}\n   */\n\n\n  Color.prototype.luminance = function () {\n    return 0.2126 * this.R + 0.7152 * this.G + 0.0722 * this.B;\n  };\n  /**\n   * @returns {integer} 0 if the color is dark and 1 if it is light.\n   */\n\n\n  Color.prototype.luminanceStep = function () {\n    return this.luminance() < .6 ? 0 : 1;\n  };\n  /**\n   * @this Color\n   * @returns {string} String value of the color. `#fd45a7`.\n   */\n\n\n  Color.prototype.stringify = function () {\n    var color = hexa2(this.R * 255) + hexa2(this.G * 255) + hexa2(this.B * 255);\n\n    if (this.A < 1) {\n      color += hexa2(this.A * 255);\n    }\n\n    return \"#\" + color;\n  };\n\n  Color.prototype.copy = function () {\n    var newColor = new Color();\n    newColor.R = this.R;\n    newColor.G = this.G;\n    newColor.B = this.B;\n    newColor.A = this.A;\n    newColor.H = this.H;\n    newColor.S = this.S;\n    newColor.L = this.L;\n    return newColor;\n  };\n  /**\n       * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\n       * @this Color\n       * @returns {undefined}\n       */\n\n\n  Color.prototype.hsl2rgb = function () {\n    var H = 6 * this.H,\n        S = this.S,\n        L = this.L,\n        chroma = (1 - Math.abs(2 * L - 1)) * S,\n        x = chroma * (1 - Math.abs(H % 2 - 1));\n    var R = 0,\n        G = 0,\n        B = 0;\n\n    if (H < 3) {\n      if (H < 1) {\n        R = chroma;\n        G = x;\n        B = 0;\n      } else if (H < 2) {\n        R = x;\n        G = chroma;\n        B = 0;\n      } else {\n        // H == 2.\n        R = 0;\n        G = chroma;\n        B = x;\n      }\n    } else if (H < 4) {\n      R = 0;\n      G = x;\n      B = chroma;\n    } else if (H < 5) {\n      R = x;\n      G = 0;\n      B = chroma;\n    } else {\n      R = chroma;\n      G = 0;\n      B = x;\n    }\n\n    var shift = L - chroma * 0.5;\n    this.R = R + shift;\n    this.G = G + shift;\n    this.B = B + shift;\n  };\n\n  Color.prototype.rgb2hsl = function () {\n    var R = this.R;\n    var G = this.G;\n    var B = this.B;\n    var min = Math.min(R, G, B);\n    var max = Math.max(R, G, B);\n    var delta = max - min;\n    this.L = 0.5 * (max + min);\n\n    if (delta < 0.000001) {\n      this.H = 0;\n      this.S = 0;\n    } else {\n      this.S = delta / (1 - Math.abs(2 * this.L - 1));\n\n      if (max === R) {\n        if (G >= B) {\n          this.H = INV6 * ((G - B) / delta);\n        } else {\n          this.H = 1 - INV6 * ((B - G) / delta);\n        }\n      } else if (max === G) {\n        this.H = INV6 * (2 + (B - R) / delta);\n      } else {\n        this.H = INV6 * (4 + (R - G) / delta);\n      }\n    }\n  };\n\n  Color.prototype.parseHexa = function (text) {\n    if (text.charAt(0) !== '#') return false;\n    var R = 0,\n        G = 0,\n        B = 0,\n        A = 1;\n\n    switch (text.length) {\n      case 4:\n        R = parseInt(text.charAt(1), 16) * INV15;\n        G = parseInt(text.charAt(2), 16) * INV15;\n        B = parseInt(text.charAt(3), 16) * INV15;\n        break;\n\n      case 5:\n        R = parseInt(text.charAt(1), 16) * INV15;\n        G = parseInt(text.charAt(2), 16) * INV15;\n        B = parseInt(text.charAt(3), 16) * INV15;\n        A = parseInt(text.charAt(4), 16) * INV15;\n        break;\n\n      case 7:\n        R = parseInt(text.substr(1, 2), 16) * INV255;\n        G = parseInt(text.substr(3, 2), 16) * INV255;\n        B = parseInt(text.substr(5, 2), 16) * INV255;\n        break;\n\n      case 9:\n        R = parseInt(text.substr(1, 2), 16) * INV255;\n        G = parseInt(text.substr(3, 2), 16) * INV255;\n        B = parseInt(text.substr(5, 2), 16) * INV255;\n        A = parseInt(text.substr(7, 2), 16) * INV255;\n        break;\n\n      default:\n    }\n\n    if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\n      this.R = this.G = this.B = this.A = 0;\n    } else {\n      this.R = R;\n      this.G = G;\n      this.B = B;\n      this.A = A;\n    }\n\n    return true;\n  };\n  /**\n   * @param   {string} text - `rgb(200, 140, 50)`\n   * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\n   */\n\n\n  Color.prototype.parseRGB = function (text) {\n    var m = RX_RGB.exec(text);\n    if (!m) return false;\n    this.R = clamp01(parseInt(m[1], 10) * INV255);\n    this.G = clamp01(parseInt(m[2], 10) * INV255);\n    this.B = clamp01(parseInt(m[3], 10) * INV255);\n    this.A = 1;\n    return true;\n  };\n  /**\n   * @param   {string} text - `rgba(200, 140, 50, 0.5)`\n   * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\n   */\n\n\n  Color.prototype.parseRGBA = function (text) {\n    var m = RX_RGBA.exec(text);\n    if (!m) return false;\n    this.R = clamp01(parseInt(m[1], 10) * INV255);\n    this.G = clamp01(parseInt(m[2], 10) * INV255);\n    this.B = clamp01(parseInt(m[3], 10) * INV255);\n    this.A = clamp01(parseFloat(m[4]));\n    return true;\n  };\n  /**\n   * @param   {string} text - `hsl(200, 140, 50)`\n   * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\n   */\n\n\n  Color.prototype.parseHSL = function (text) {\n    var m = RX_HSL.exec(text);\n    if (!m) return false;\n    this.H = clamp01(parseInt(m[1], 10) * INV359);\n    this.S = clamp01(parseInt(m[2], 10) * INV99);\n    this.L = clamp01(parseInt(m[3], 10) * INV99);\n    this.A = 1;\n    this.hsl2rgb();\n    return true;\n  };\n\n  return Color;\n}();\n\nexport default Color;\nvar INV6 = 1 / 6,\n    INV15 = 1 / 15,\n    INV99 = 1 / 99,\n    INV255 = 1 / 255,\n    INV359 = 1 / 359;\nvar RX_RGB = /^RGB[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\nvar RX_RGBA = /^RGBA[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9.]+([0-9.]+)/;\nvar RX_HSL = /^HSL[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\n\nfunction clamp01(value) {\n  if (value < 0) return 0;\n  if (value > 1) return 1;\n  return value;\n}\n\nfunction hexa2(value) {\n  var out = Math.floor(value).toString(16);\n  if (out.length < 2) out = \"0\" + out;\n  return out;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Clear the screen by filling it with a plain color.\n * This color is defined by attributes red, gree, blue and alpha, which must be between 0 and 1.\n */\n\n\nimport Painter from './painter';\nimport Color from '../webgl/color';\n\nvar ClearPainter =\n/** @class */\nfunction (_super) {\n  __extends(ClearPainter, _super);\n\n  function ClearPainter(params) {\n    var _this = _super.call(this, params) || this;\n\n    _this._red = 0.8;\n    _this._green = 0.4;\n    _this._blue = 0.2;\n    _this._alpha = 1;\n    _this.color = params.color || \"#d72\";\n    return _this;\n  }\n\n  Object.defineProperty(ClearPainter.prototype, \"red\", {\n    get: function get() {\n      return this._red;\n    },\n    set: function set(v) {\n      this._red = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"green\", {\n    get: function get() {\n      return this._green;\n    },\n    set: function set(v) {\n      this._green = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"blue\", {\n    get: function get() {\n      return this._blue;\n    },\n    set: function set(v) {\n      this._blue = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"alpha\", {\n    get: function get() {\n      return this._alpha;\n    },\n    set: function set(v) {\n      this._alpha = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"color\", {\n    get: function get() {\n      var color = new Color();\n      color.R = this._red;\n      color.G = this._green;\n      color.B = this._blue;\n      color.A = this._alpha;\n      return color.stringify();\n    },\n    set: function set(cssColor) {\n      var color = new Color(cssColor);\n      this._red = color.R;\n      this._green = color.G;\n      this._blue = color.B;\n      this._alpha = color.A;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ClearPainter.prototype.render = function () {\n    var gl = this.scene.gl;\n    gl.clearColor(this._red, this._green, this._blue, this._alpha);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  };\n\n  return ClearPainter;\n}(Painter);\n\nexport default ClearPainter;","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar Sprite =\n/** @class */\nfunction () {\n  function Sprite(index, getData, params) {\n    this.getData = getData;\n    this.extra = {};\n    this.$index = 0;\n    this.$index = index;\n    var width = params.width || 50;\n    var height = params.height || 50;\n    this.params = __assign({\n      x: 0,\n      y: 0,\n      z: 0,\n      width: width,\n      height: height,\n      originX: width / 2,\n      originY: height / 2,\n      u0: 0,\n      v0: 0,\n      u1: 1,\n      v1: 1,\n      scale: 1\n    }, params);\n    this.update(this.params);\n  }\n\n  Sprite.prototype.update = function (newParams) {\n    this.params = __assign(__assign({}, this.params), newParams);\n\n    var _a = this,\n        getData = _a.getData,\n        $index = _a.$index,\n        params = _a.params;\n\n    var data = getData();\n    var x = params.x,\n        y = params.y,\n        z = params.z,\n        originX = params.originX,\n        originY = params.originY,\n        width = params.width,\n        height = params.height,\n        u0 = params.u0,\n        v0 = params.v0,\n        u1 = params.u1,\n        v1 = params.v1,\n        scale = params.scale;\n    var xxA = -originX;\n    var yyA = -originY;\n    var xxB = xxA + width;\n    var yyB = yyA;\n    var xxC = xxA + width;\n    var yyC = yyA + height;\n    var xxD = xxA;\n    var yyD = yyA + height;\n    var xA = xxA * scale;\n    var yA = yyA * scale;\n    var xB = xxB * scale;\n    var yB = yyB * scale;\n    var xC = xxC * scale;\n    var yC = yyC * scale;\n    var xD = xxD * scale;\n    var yD = yyD * scale;\n    data[$index + 0] = xA + x;\n    data[$index + 1] = yA + y;\n    data[$index + 2] = z;\n    data[$index + 3] = u0;\n    data[$index + 4] = v0;\n    data[$index + 5] = xB + x;\n    data[$index + 6] = yB + y;\n    data[$index + 7] = z;\n    data[$index + 8] = u1;\n    data[$index + 9] = v0;\n    data[$index + 10] = xC + x;\n    data[$index + 11] = yC + y;\n    data[$index + 12] = z;\n    data[$index + 13] = u1;\n    data[$index + 14] = v1;\n    data[$index + 15] = xD + x;\n    data[$index + 16] = yD + y;\n    data[$index + 17] = z;\n    data[$index + 18] = u0;\n    data[$index + 19] = v1;\n  };\n\n  Object.defineProperty(Sprite.prototype, \"x\", {\n    get: function get() {\n      return this.params.x;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"y\", {\n    get: function get() {\n      return this.params.y;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"z\", {\n    get: function get() {\n      return this.params.z;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"width\", {\n    get: function get() {\n      return this.params.width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"height\", {\n    get: function get() {\n      return this.params.height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"originX\", {\n    get: function get() {\n      return this.params.originX;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"originY\", {\n    get: function get() {\n      return this.params.originY;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"u0\", {\n    get: function get() {\n      return this.params.u0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"v0\", {\n    get: function get() {\n      return this.params.v0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"u1\", {\n    get: function get() {\n      return this.params.u1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"v1\", {\n    get: function get() {\n      return this.params.v1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Sprite;\n}();\n\nexport default Sprite;","export default \"uniform float uniWidth;\\nuniform float uniHeight;\\nattribute vec3 attXYZ;\\nattribute vec2 attUV;\\nvarying vec2 varUV;\\n\\nconst float RESOLUTION = 500.0;\\nconst float INV_RESOLUTION = 1.0 / RESOLUTION;\\n\\nvoid main() {\\n  varUV = attUV;\\n  float widestSide = max(uniWidth, uniHeight);\\n  float w = widestSide / uniWidth;\\n  float h = widestSide / uniHeight;\\n  float x = w * (attXYZ.x - RESOLUTION) * INV_RESOLUTION;\\n  float y = h * (attXYZ.y - RESOLUTION) * INV_RESOLUTION;\\n\\n  gl_Position = vec4(x, -y, attXYZ.z, 1.0);\\n}\\n\"","export default \"precision mediump float;\\nuniform sampler2D uniTexture;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  vec4 color = texture2D( uniTexture, varUV );\\n  if (color.a < 1.0) discard;\\n  gl_FragColor = color;\\n}\\n\"","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n/**\n *\n */\n\n\nimport Painter from '../painter';\nimport Sprite from './sprite';\nimport vert from './sprites.vert';\nimport frag from './sprites.frag'; // Allocations will be done by pieces of BLOCK Sprites.\n\nvar BLOCK = 64;\nvar NB_ATTRIBS = 5; // attXYZ and attUV.\n\nvar NB_CORNERS = 4;\nvar CHUNK = NB_ATTRIBS * NB_CORNERS;\n\nvar SpritesPainter =\n/** @class */\nfunction (_super) {\n  __extends(SpritesPainter, _super);\n\n  function SpritesPainter(params) {\n    var _this = _super.call(this, params) || this;\n\n    _this.dataVert = new Float32Array(BLOCK * CHUNK);\n    _this.sprites = [];\n    _this.count = 0;\n    _this.capacity = BLOCK;\n    /**\n     * Since the vertex array can be reallocated, we cannot give a reference to the Float32Array\n     * to any Sprite. Instead, we will give them this function that will return the current array.\n     */\n\n    _this.getData = function () {\n      return _this.dataVert;\n    };\n\n    var scene = params.scene,\n        atlas = params.atlas;\n    var atlasObj = scene.getAtlas(atlas);\n\n    if (!atlasObj) {\n      throw _this.fatal(\"Atlas \\\"\" + atlas + \"\\\" not found!\");\n    }\n\n    _this.atlas = atlasObj;\n    _this.prg = _this.createProgram({\n      vert: vert,\n      frag: frag\n    });\n    var gl = scene.gl;\n    var buffVert = gl.createBuffer();\n\n    if (!buffVert) {\n      throw _this.fatal(\"Not enough memory to create an array buffer!\");\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n    gl.bufferData(gl.ARRAY_BUFFER, _this.dataVert, gl.DYNAMIC_DRAW);\n    _this.buffVert = buffVert;\n    var buffElem = gl.createBuffer();\n\n    if (!buffElem) {\n      throw _this.fatal(\"Not enough memory to create an array buffer!\");\n    }\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, createElements(BLOCK), gl.DYNAMIC_DRAW);\n    _this.buffElem = buffElem;\n    return _this;\n  }\n\n  SpritesPainter.prototype.createSprite = function (params) {\n    var index = this.count * CHUNK;\n    this.count++;\n\n    if (this.count >= this.capacity) {\n      // Allocate a new block.\n      this.allocateNewBlock();\n    }\n\n    var _a = this.atlas,\n        width = _a.width,\n        height = _a.height;\n    var sprite = new Sprite(index, this.getData, __assign({\n      width: width,\n      height: height\n    }, params));\n    this.sprites.push(sprite);\n    return sprite;\n  };\n\n  SpritesPainter.prototype.render = function () {\n    var _a = this,\n        scene = _a.scene,\n        prg = _a.prg,\n        atlas = _a.atlas,\n        buffVert = _a.buffVert,\n        buffElem = _a.buffElem;\n\n    var gl = scene.gl; // Update sprites' attributes.\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n    gl.bufferData(gl.ARRAY_BUFFER, this.dataVert, gl.DYNAMIC_DRAW);\n    gl.enable(gl.DEPTH_TEST);\n    prg.use();\n    atlas.activate();\n    var uniforms = prg;\n    uniforms.$uniTexture = 0;\n    uniforms.$uniWidth = scene.width;\n    uniforms.$uniHeight = scene.height;\n    prg.bindAttribs(buffVert, \"attXYZ\", \"attUV\");\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n    gl.drawElements(gl.TRIANGLES, 6 * this.count, gl.UNSIGNED_SHORT, 0);\n  };\n\n  SpritesPainter.prototype.allocateNewBlock = function () {\n    this.capacity += BLOCK;\n    var scene = this.scene;\n    var gl = scene.gl;\n    var buffElem = this.buffElem;\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, createElements(this.capacity), gl.DYNAMIC_DRAW);\n    var dataVert = new Float32Array(this.capacity * CHUNK);\n    dataVert.set(this.dataVert);\n    this.dataVert = dataVert;\n  };\n\n  return SpritesPainter;\n}(Painter);\n\nexport default SpritesPainter;\n/**\n * A--B\n * |  |\n * D--C\n */\n\nfunction createElements(capacity) {\n  var dataElem = new Uint16Array(6 * capacity);\n  var i = 0;\n  var a = 0;\n\n  for (var k = 0; k < capacity; k++) {\n    var b = a + 1;\n    var c = a + 2;\n    var d = a + 3;\n    dataElem[i + 0] = a;\n    dataElem[i + 1] = d;\n    dataElem[i + 2] = b;\n    dataElem[i + 3] = b;\n    dataElem[i + 4] = d;\n    dataElem[i + 5] = c;\n    a += 4;\n    i += 6;\n  }\n\n  return dataElem;\n}","import Background from './background';\nimport Clear from './clear';\nimport Painter from './painter';\nimport Sprites from './sprites';\nexport default {\n  Background: Background,\n  Clear: Clear,\n  Painter: Painter,\n  Sprites: Sprites\n};","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar Atlas =\n/** @class */\nfunction () {\n  function Atlas(gl, _name) {\n    this.gl = gl;\n    this._name = _name;\n    this._ready = false;\n    this._width = 0;\n    this._height = 0;\n    var texture = gl.createTexture();\n    if (!texture) throw \"Unable to create a new texture!\";\n    this.texture = texture;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n  }\n\n  Object.defineProperty(Atlas.prototype, \"name\", {\n    get: function get() {\n      return this._name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"ready\", {\n    /**\n     * Return `true` as soon as an image has been loaded into the graphic card.\n     */\n    get: function get() {\n      return this._ready;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Remove the texture from the graphic card memory.\n   */\n\n  Atlas.prototype.destroy = function () {\n    this._ready = false;\n\n    var _a = this,\n        gl = _a.gl,\n        texture = _a.texture;\n\n    gl.deleteTexture(texture);\n  };\n\n  Atlas.prototype.activate = function (unit) {\n    if (unit === void 0) {\n      unit = 0;\n    }\n\n    var _a = this,\n        gl = _a.gl,\n        texture = _a.texture;\n\n    var UNITS = [gl.TEXTURE0, gl.TEXTURE1, gl.TEXTURE2, gl.TEXTURE3, gl.TEXTURE4, gl.TEXTURE5, gl.TEXTURE6, gl.TEXTURE7];\n    gl.activeTexture(UNITS[Math.abs(unit) % UNITS.length]);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n  };\n\n  Atlas.prototype.load = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        this._ready = false;\n        return [2\n        /*return*/\n        , this.loadImage(params.image)];\n      });\n    });\n  };\n\n  Atlas.prototype.loadImage = function (url) {\n    return __awaiter(this, void 0, void 0, function () {\n      var that;\n      return __generator(this, function (_a) {\n        that = this;\n        return [2\n        /*return*/\n        , new Promise(function (resolve, reject) {\n          var img = new Image();\n          that._ready = false;\n\n          img.onload = function () {\n            var gl = that.gl,\n                texture = that.texture;\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n            that._ready = true;\n            that._width = img.width;\n            that._height = img.height;\n            resolve();\n          };\n\n          img.onerror = function () {\n            console.error(\"Unable to load image \\\"\" + name + \"\\\": \", url);\n            reject();\n          };\n\n          img.src = url;\n        })];\n      });\n    });\n  };\n\n  return Atlas;\n}();\n\nexport default Atlas;","/**\n * Resolution in CSS pixels. If omitted, the real resolution\n * of the device is taken. On smartphones, for instance,\n * the resolution is often greater than 1.\n *\n * Return `true` if the size has changed.\n */\nexport default (function (gl, resolution) {\n  if (resolution === void 0) {\n    resolution = 0;\n  }\n\n  if (resolution <= 0) {\n    resolution = window.devicePixelRatio;\n  }\n\n  var canvas = gl.canvas;\n  var displayWidth = Math.floor(canvas.clientWidth * resolution);\n  var displayHeight = Math.floor(canvas.clientHeight * resolution); // Check if the canvas is not the same size.\n\n  if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\n    // Make the canvas the same size\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    gl.viewport(0, 0, displayWidth, displayHeight);\n    return true;\n  }\n\n  return false;\n});","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport Atlas from './atlas';\nimport Resize from './webgl/resize';\n\nvar FlatLand =\n/** @class */\nfunction () {\n  function FlatLand(canvas) {\n    var _this = this;\n\n    this.activePainters = [];\n    this.isRendering = false;\n    this.resolution = 1;\n    this.onAnimation = null;\n\n    this.render = function (time) {\n      var e_1, _a;\n\n      if (_this.isRendering) window.requestAnimationFrame(_this.render);else return;\n      var gl = _this.gl;\n      Resize(gl, _this.resolution);\n      gl.clearDepth(-1);\n      gl.clear(gl.DEPTH_BUFFER_BIT);\n      gl.depthFunc(gl.GEQUAL);\n\n      try {\n        try {\n          for (var _b = __values(_this.activePainters), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var painter = _c.value;\n            painter.render(time);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n\n        var onAnimation = _this.onAnimation;\n\n        if (typeof onAnimation === 'function') {\n          onAnimation(time);\n        }\n      } catch (ex) {\n        console.error(ex);\n\n        _this.stop();\n\n        console.error(\"###############################\");\n        console.error(\"# Rendering has been stopped! #\");\n        console.error(\"###############################\");\n      }\n    };\n\n    var gl = canvas.getContext(\"webgl\", {// Specify WebGL options.\n    });\n    if (!gl) throw \"Unable to create a WegGL context!\";\n    this.gl = gl;\n    this.atlases = new Map();\n    this.painters = new Map();\n  }\n\n  FlatLand.prototype.getAtlas = function (name) {\n    var atlases = this.atlases;\n    return atlases.get(name) || null;\n  };\n\n  FlatLand.prototype.createAtlas = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var name, atlas;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            name = params.name;\n            atlas = new Atlas(this.gl, name);\n            this.atlases.set(name, atlas);\n            return [4\n            /*yield*/\n            , atlas.load(params)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            , atlas];\n        }\n      });\n    });\n  };\n\n  FlatLand.prototype.destroyAtlas = function (name) {\n    var atlases = this.atlases;\n    var atlas = atlases.get(name);\n    if (!atlas) return false;\n    atlases.delete(name);\n    atlas.destroy();\n    return true;\n  };\n  /**\n   * If a painter with the same name already exists, return false and don't add the new one.\n   */\n\n\n  FlatLand.prototype.$attachPainter = function (painter) {\n    if (this.painters.has(painter.name)) return false;\n    this.painters.set(painter.name, painter);\n    this.activePainters = this.activePainters.filter(function (p) {\n      return p.name;\n    });\n    this.activePainters.push(painter);\n    return true;\n  };\n\n  FlatLand.prototype.$detachPainter = function (name) {\n    if (this.painters.has(name)) return false;\n    this.painters.delete(name);\n    this.activePainters = this.activePainters.filter(function (p) {\n      return p.name;\n    });\n    return true;\n  };\n\n  Object.defineProperty(FlatLand.prototype, \"width\", {\n    get: function get() {\n      return this.gl.drawingBufferWidth;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlatLand.prototype, \"height\", {\n    get: function get() {\n      return this.gl.drawingBufferHeight;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FlatLand.prototype.start = function () {\n    if (this.isRendering) return;\n    this.isRendering = true;\n    window.requestAnimationFrame(this.render);\n  };\n\n  FlatLand.prototype.stop = function () {\n    this.isRendering = false;\n  };\n\n  return FlatLand;\n}();\n\nexport default FlatLand;","import Painter from './painter';\nimport Scene from './scene';\nexport default {\n  Painter: Painter,\n  Scene: Scene\n};","import React from \"react\"\n\nimport \"./canvas.css\"\n\ninterface ICanvasProps {\n    init: (canvas: HTMLCanvasElement) => void\n}\n\nexport default class Canvas extends React.Component<ICanvasProps, {}> {\n    private readonly ref: React.RefObject<HTMLCanvasElement> = React.createRef();\n\n    componentDidMount() {\n        const canvas = this.ref.current\n        if (!canvas) return\n        this.props.init(canvas)\n    }\n\n    render() {\n        return (<canvas ref={this.ref} className=\"Canvas\"></canvas>)\n    }\n}\n","import React from 'react';\nimport './App.css';\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n        <h1>Tutorials</h1>\n        <ul>\n            <li><a href=\"tuto-clear.html\">Hello world!</a></li>\n            <li><a href=\"tuto-background.html\">Scalable background</a></li>\n            <li><a href=\"tuto-sprites-1.html\">Sprites (1)</a></li>\n        </ul>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\"\nimport Markdown from 'markdown-to-jsx'\n\nimport \"./description.css\"\n\ninterface TDescriptionProps {\n    content: string\n}\ninterface TDescriptionState {}\n\nexport default class Description extends React.Component<TDescriptionProps, TDescriptionState> {\n    render() {\n        const classes = ['view-Description']\n\n        return (<div className={classes.join(' ')}>\n            <Markdown options={{ forceBlock: true }}>{this.props.content}</Markdown>\n        </div>)\n    }\n}\n","export { default } from './description'","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport FlatLand from 'flat-land-gl'\nimport Description from '../../../view/description'\nimport description from './clear.md'\n\nimport Canvas from '../../../canvas'\n\nReactDOM.render(<div>\n    <Canvas init={init}/>\n    <Description content={description}/>\n</div>, document.getElementById('root'));\n\n\nfunction init(canvas: HTMLCanvasElement) {\n    const scene = new FlatLand.Scene(canvas)\n    new FlatLand.Painter.Clear({\n        scene, color: \"#d72\"\n    })\n    scene.start()\n}\n","export default \"```js\\nconst scene = new FlatLand.Scene(canvas)\\nnew FlatLand.Painter.Clear({\\n    scene, color: \\\"#d72\\\"\\n})\\nscene.start()\\n```\\n\""],"sourceRoot":""}