{"version":3,"sources":["../../flat-land-gl/dist/webgl/program.js","../../flat-land-gl/dist/painter/painter.js","../../flat-land-gl/dist/converter/string.js","../../flat-land-gl/dist/painter/background/background.js","../../flat-land-gl/dist/webgl/color.js","../../flat-land-gl/dist/painter/clear.js","../../flat-land-gl/dist/painter/sprites/sprite.js","../../flat-land-gl/dist/painter/sprites/sprites.vert","../../flat-land-gl/dist/painter/sprites/sprites.frag","../../flat-land-gl/dist/painter/sprites/sprites.js","../../flat-land-gl/dist/painter/index.js","../../flat-land-gl/dist/atlas.js","../../flat-land-gl/dist/webgl/resize.js","../../flat-land-gl/dist/scene.js","../../flat-land-gl/dist/index.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","canvas.tsx","App.tsx","serviceWorker.ts","index.tsx","../node_modules/@babel/runtime/regenerator/index.js","page/tutorial/sprites-1/bowl.png","page/tutorial/sprites-1/background.png","../node_modules/regenerator-runtime/runtime.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","page/tutorial/sprites-1/index.tsx"],"names":["__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","BPE","Float32Array","BYTES_PER_ELEMENT","Program","gl","codes","includes","vert","Error","frag","parseInclude","parseIncludes","this","Object","freeze","_typesNamesLookup","lookup","k","toUpperCase","v","getTypesNamesLookup","shaderProgram","createProgram","program","vertShader","code","getShader","VERTEX_SHADER","getVertexShader","attachShader","fragShader","FRAGMENT_SHADER","getFragmentShader","linkProgram","use","useProgram","attribs","createAttributes","uniforms","createUniforms","prototype","attribsCount","getProgramParameter","ACTIVE_ATTRIBUTES","index","item","getActiveAttrib","typeName","getTypeName","type","getSize","location","getAttribLocation","name","defineProperty","writable","enumerable","configurable","FLOAT_VEC4","FLOAT_VEC3","FLOAT_VEC2","FLOAT","typeId","bindAttribs","buffer","e_1","_a","e_2","_b","names","_i","arguments","that","bindBuffer","ARRAY_BUFFER","totalSize","names_1","names_1_1","name_1","attrib","keys","map","join","size","e_1_1","error","return","offset","names_2","names_2_1","name_2","enableVertexAttribArray","vertexAttribPointer","e_2_1","setUniform","uniformsCount","ACTIVE_UNIFORMS","getActiveUniform","location_1","getUniformLocation","set","createUniformSetter","get","createUniformGetter","nameGL","nameJS","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","SAMPLER_2D","uniform1i","uniform1iv","uniform1f","uniform1fv","uniform2fv","uniform3fv","uniform4fv","FLOAT_MAT3","uniformMatrix3fv","FLOAT_MAT4","uniformMatrix4fv","split","line","trim","substr","pos","indexOf","includeName","charAt","snippet","console","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","ID","Painter","params","_name","scene","$attachPainter","destroy","$detachPainter","shaders","fatal","message","castString","defaultValue","t","isNaN","__extends","_extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","_super","BackgroundPainter","_this","atlas","atlasObj","getAtlas","prg","getVert","align","FRAG","buff","createBuffer","bufferData","STATIC_DRAW","render","disable","DEPTH_TEST","activate","$uniTexture","width","height","drawArrays","TRIANGLE_STRIP","x","y","__read","n","r","e","ar","push","Color","codeCSS","R","G","B","H","S","L","A","parse","toArrayRGB","toArrayRGBA","isValid","normalize","stringify","luminance","luminanceStep","fromArrayRGB","rgb","newRGB","fromArrayRGBA","rgba","newRGBA","mix","color1","color2","alpha","beta","ramp","colors","newBlack","spacesCount","firstColorIndex","Math","floor","translatedAlpha","newWhite","red","green","blue","color","input","parseHexa","parseRGB","parseRGBA","parseHSL","hexa2","copy","newColor","hsl2rgb","chroma","abs","shift","rgb2hsl","min","max","delta","INV6","text","parseInt","INV15","INV255","RX_RGB","exec","clamp01","RX_RGBA","parseFloat","RX_HSL","INV359","INV99","out","toString","ClearPainter","_red","_green","_blue","_alpha","cssColor","clearColor","clear","COLOR_BUFFER_BIT","__assign","assign","apply","Sprite","getData","$index","z","originX","originY","u0","v0","u1","v1","scale","update","newParams","data","xxA","yyA","xA","yA","xB","yB","xC","yC","xD","yD","BLOCK","CHUNK","NB_ATTRIBS","Background","Clear","Sprites","SpritesPainter","dataVert","sprites","count","capacity","buffVert","DYNAMIC_DRAW","buffElem","ELEMENT_ARRAY_BUFFER","dataElem","Uint16Array","a","c","createElements","createSprite","sprite","info","enable","$uniWidth","$uniHeight","drawElements","TRIANGLES","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","__generator","body","f","g","_","label","sent","trys","ops","verb","op","pop","Atlas","_ready","_width","_height","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","deleteTexture","unit","UNITS","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","activeTexture","load","loadImage","image","url","img","Image","onload","texImage2D","RGBA","onerror","src","resolution","window","devicePixelRatio","canvas","displayWidth","clientWidth","displayHeight","clientHeight","viewport","FlatLand","activePainters","isRendering","onAnimation","time","requestAnimationFrame","_c","ex","stop","getContext","atlases","Map","painters","createAtlas","destroyAtlas","delete","painter","has","filter","drawingBufferWidth","drawingBufferHeight","start","Scene","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","key","_createClass","protoProps","staticProps","_getPrototypeOf","getPrototypeOf","_typeof2","obj","_typeof","_possibleConstructorReturn","self","ReferenceError","_setPrototypeOf","_inherits","subClass","superClass","Canvas","ref","React","createRef","current","init","className","Component","App","href","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","runtime","undefined","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","fn","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","object","reverse","skipTempReset","prev","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","asyncGeneratorStep","gen","_next","_throw","bowlAtlas","backgroundAtlas","bowls","bowl","speed1","sin","speed2","cos","radius","angle","args"],"mappings":"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","file":"static/js/index.58b687bf.a77fa7b6.chunk.js","sourcesContent":["var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar BPE = new Float32Array().BYTES_PER_ELEMENT;\n/**\n * Creating  a  WebGL  program  for shaders  is  painful.  This  class\n * simplifies the process.\n *\n * @class Program\n *\n * Object properties starting with `$` are WebGL uniforms or attributes.\n * Uniforms behave as expected: you can read/write a value.\n * Attributes when read, return the location. And when written, enable/disabled\n * this attribute. So you read integers and writte booleans.\n *\n * @param gl - WebGL context.\n * @param codes  - Object  with two  mandatory attributes:  `vert` for\n * vertex shader and `frag` for fragment shader.\n * @param  includes  -  (optional)  If  defined,  the  `#include  foo`\n * directives  of  shaders   will  be  replaced  by   the  content  of\n * `includes.foo`.\n */\n\nvar Program =\n/** @class */\nfunction () {\n  function Program(gl, codes, includes) {\n    if (includes === void 0) {\n      includes = {};\n    }\n\n    if (typeof codes.vert !== 'string') {\n      throw Error('[webgl.program] Missing attribute `vert` in argument `codes`!');\n    }\n\n    if (typeof codes.frag !== 'string') {\n      throw Error('[webgl.program] Missing attribute `frag` in argument `codes`!');\n    }\n\n    codes = parseIncludes(codes, includes);\n    this.gl = gl;\n    Object.freeze(this.gl);\n    this.BPE = BPE;\n    Object.freeze(this.BPE);\n    this._typesNamesLookup = getTypesNamesLookup(gl);\n    var shaderProgram = gl.createProgram();\n\n    if (!shaderProgram) {\n      throw Error('Unable to create WebGLProgram!');\n    }\n\n    this.program = shaderProgram;\n    var vertShader = getVertexShader(gl, codes.vert);\n    gl.attachShader(shaderProgram, vertShader);\n    var fragShader = getFragmentShader(gl, codes.frag);\n    gl.attachShader(shaderProgram, fragShader);\n    gl.linkProgram(shaderProgram);\n\n    this.use = function () {\n      gl.useProgram(shaderProgram);\n    };\n\n    this.attribs = this.createAttributes();\n    this.uniforms = this.createUniforms();\n  }\n\n  Program.prototype.createAttributes = function () {\n    var _a = this,\n        gl = _a.gl,\n        program = _a.program;\n\n    var attribs = {};\n    var attribsCount = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n    for (var index = 0; index < attribsCount; index++) {\n      var item = gl.getActiveAttrib(program, index);\n      if (!item) continue;\n      item.typeName = this.getTypeName(item.type);\n      item.length = this.getSize(gl, item);\n      item.location = gl.getAttribLocation(program, item.name);\n      attribs[item.name] = item;\n      Object.defineProperty(this, '$' + item.name, {\n        value: item.location,\n        writable: false,\n        enumerable: true,\n        configurable: false\n      });\n    }\n\n    return attribs;\n  };\n\n  Program.prototype.getSize = function (gl, item) {\n    switch (item.type) {\n      case gl.FLOAT_VEC4:\n        return 4;\n\n      case gl.FLOAT_VEC3:\n        return 3;\n\n      case gl.FLOAT_VEC2:\n        return 2;\n\n      case gl.FLOAT:\n        return 1;\n\n      default:\n        throw Error(\"[webgl.program:getSize] I don't know the size of the attribute '\" + item.name + \"' because I don't know the type \" + this.getTypeName(item.type) + \"!\");\n    }\n  };\n\n  Program.prototype.use = function () {\n    this.gl.useProgram(this.program);\n  };\n\n  Program.prototype.getTypeName = function (typeId) {\n    return this._typesNamesLookup[typeId];\n  };\n\n  Program.prototype.bindAttribs = function (buffer) {\n    var e_1, _a, e_2, _b;\n\n    var names = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      names[_i - 1] = arguments[_i];\n    }\n\n    var that = this;\n    var gl = this.gl;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    var totalSize = 0;\n\n    try {\n      for (var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {\n        var name_1 = names_1_1.value;\n        var attrib = that.attribs[name_1];\n\n        if (!attrib) {\n          throw Error(\"Cannot find attribute \\\"\" + name_1 + \"\\\"!\\n\" + \"It may be not active because unused in the shader.\\n\" + \"Available attributes are: \" + Object.keys(that.attribs).map(function (name) {\n            return '\"' + name + '\"';\n          }).join(\", \") + (\" (\" + that.attribs.length + \")\"));\n        }\n\n        totalSize += attrib.size * attrib.length * BPE;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    var offset = 0;\n\n    try {\n      for (var names_2 = __values(names), names_2_1 = names_2.next(); !names_2_1.done; names_2_1 = names_2.next()) {\n        var name_2 = names_2_1.value;\n        var attrib = that.attribs[name_2];\n        gl.enableVertexAttribArray(attrib.location);\n        gl.vertexAttribPointer(attrib.location, attrib.size * attrib.length, gl.FLOAT, false, // No normalisation.\n        totalSize, offset);\n        offset += attrib.size * attrib.length * BPE;\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (names_2_1 && !names_2_1.done && (_b = names_2.return)) _b.call(names_2);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  };\n\n  Program.prototype.setUniform = function (name, value) {\n    var id = '$' + name;\n    var map = this;\n    map[id] = value;\n  };\n\n  Program.prototype.createUniforms = function () {\n    var _a = this,\n        gl = _a.gl,\n        program = _a.program;\n\n    var uniforms = {};\n    var uniformsCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (var index = 0; index < uniformsCount; index++) {\n      var item = gl.getActiveUniform(program, index);\n      if (!item) continue;\n      var location_1 = gl.getUniformLocation(program, item.name);\n      if (!location_1) continue;\n      uniforms[item.name] = location_1;\n      Object.defineProperty(this, '$' + item.name, {\n        set: this.createUniformSetter(item, uniforms[item.name], this._typesNamesLookup),\n        get: this.createUniformGetter(item),\n        enumerable: true,\n        configurable: false\n      });\n    }\n\n    return uniforms;\n  };\n\n  Program.prototype.createUniformSetter = function (item, nameGL, lookup) {\n    var gl = this.gl;\n    var nameJS = '_$' + item.name;\n\n    switch (item.type) {\n      case gl.BYTE:\n      case gl.UNSIGNED_BYTE:\n      case gl.SHORT:\n      case gl.UNSIGNED_SHORT:\n      case gl.INT:\n      case gl.UNSIGNED_INT:\n      case gl.SAMPLER_2D:\n        // For textures, we specify the texture unit.\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform1i(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          return function (v) {\n            gl.uniform1iv(nameGL, v);\n            this[nameJS] = v;\n          };\n        }\n\n      case gl.FLOAT:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform1f(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          return function (v) {\n            gl.uniform1fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        }\n\n      case gl.FLOAT_VEC2:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform2fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC2 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_VEC3:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform3fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC3 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_VEC4:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform4fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC4 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_MAT3:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniformMatrix3fv(nameGL, false, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT3 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_MAT4:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniformMatrix4fv(nameGL, false, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT4 in uniform `\" + item.name + \"'!'\");\n        }\n\n      default:\n        throw Error(\"[webgl.program.createWriter] Don't know how to deal with uniform `\" + item.name + \"` of type \" + lookup[item.type] + \"!\");\n    }\n  };\n\n  Program.prototype.createUniformGetter = function (item) {\n    var name = '_$' + item.name;\n    return function () {\n      return this[name];\n    };\n  };\n\n  return Program;\n}();\n\nexport default Program;\n/**\n * This is a preprocessor for shaders.\n * Directives  `#include`  will be  replaced  by  the content  of  the\n * correspondent attribute in `includes`.\n */\n\nfunction parseIncludes(codes, includes) {\n  return {\n    vert: parseInclude(codes.vert, includes),\n    frag: parseInclude(codes.frag, includes)\n  };\n}\n\nfunction parseInclude(code, includes) {\n  return code.split('\\n').map(function (line) {\n    if (line.trim().substr(0, 8) !== '#include') return line;\n    var pos = line.indexOf('#include') + 8;\n    var includeName = line.substr(pos).trim(); // We accept all this systaxes:\n    // #include foo\n    // #include 'foo'\n    // #include <foo>\n    // #include \"foo\"\n\n    if (\"'<\\\"\".indexOf(includeName.charAt(0)) > -1) {\n      includeName = includeName.substr(1, includeName.length - 2);\n    }\n\n    var snippet = includes[includeName];\n\n    if (typeof snippet !== 'string') {\n      console.error(\"Include <\" + includeName + \"> not found in \", includes);\n      throw Error(\"Include not found in shader: \" + includeName);\n    }\n\n    return snippet;\n  }).join(\"\\n\");\n}\n\nfunction getShader(type, gl, code) {\n  if (type !== gl.VERTEX_SHADER && type !== gl.FRAGMENT_SHADER) {\n    throw Error('Type must be VERTEX_SHADER or FRAGMENT_SHADER!');\n  }\n\n  var shader = gl.createShader(type);\n\n  if (!shader) {\n    throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n  }\n\n  gl.shaderSource(shader, code);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    console.log(code);\n    console.error(\"An error occurred compiling the shader: \" + gl.getShaderInfoLog(shader));\n    throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n  }\n\n  return shader;\n}\n\nfunction getFragmentShader(gl, code) {\n  return getShader(gl.FRAGMENT_SHADER, gl, code);\n}\n\nfunction getVertexShader(gl, code) {\n  return getShader(gl.VERTEX_SHADER, gl, code);\n}\n\nfunction getTypesNamesLookup(gl) {\n  var lookup = {};\n\n  for (var k in gl) {\n    if (k !== k.toUpperCase()) continue;\n    var v = gl[k];\n\n    if (typeof v === 'number') {\n      lookup[v] = k;\n    }\n  }\n\n  return lookup;\n}","/**\n * This is a virtual painter from which all the other will inherit.\n */\nimport Program from '../webgl/program';\nvar ID = 0;\n\nvar Painter =\n/** @class */\nfunction () {\n  function Painter(params) {\n    this._name = \"\" + ID++;\n    if (!params.scene) throw Error('Argument \"params.scene\" is mandatory!');\n    this.scene = params.scene;\n\n    if (typeof params.name === 'string' && params.name.length > 0) {\n      this._name = params.name;\n    }\n\n    this.scene.$attachPainter(this);\n  }\n\n  Painter.prototype.destroy = function () {\n    this.scene.$detachPainter(this.name);\n  };\n\n  Object.defineProperty(Painter.prototype, \"name\", {\n    get: function get() {\n      return this._name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Painter.prototype.createProgram = function (shaders, includes) {\n    if (includes === void 0) {\n      includes = {};\n    }\n\n    return new Program(this.scene.gl, shaders, includes);\n  };\n\n  Painter.prototype.fatal = function (message) {\n    console.error(\"Fatal error in Painter \\\"\" + this.name + \"\\\":\", message);\n    return new Error(message);\n  };\n\n  return Painter;\n}();\n\nexport default Painter;","export default function castString(value, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = \"\";\n  }\n\n  var t = typeof value;\n\n  if (t === 'number' && !isNaN(value)) {\n    return \"\" + value;\n  }\n\n  if (t === 'string') return value;\n  return defaultValue;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Background the screen by filling it with an image that covers it entirely.\n */\n\n\nimport Painter from '../painter';\nimport castString from '../../converter/string';\n\nvar BackgroundPainter =\n/** @class */\nfunction (_super) {\n  __extends(BackgroundPainter, _super);\n  /**\n   * params: { atlas, align }\n   * - align: if undefined, the background will be centered.\n   *          \"R\" means that the Right edge of the background is always visible.\n   *          \"L\" means the same for Left.\n   *          \"T\" for Top.\n   *          \"B\" for \"Bottom\".\n   */\n\n\n  function BackgroundPainter(params) {\n    var _this = _super.call(this, params) || this;\n\n    var scene = params.scene,\n        atlas = params.atlas;\n    var atlasObj = scene.getAtlas(atlas);\n\n    if (!atlasObj) {\n      throw _this.fatal(\"Atlas \\\"\" + atlas + \"\\\" not found!\");\n    }\n\n    _this.atlas = atlasObj;\n    _this.prg = _this.createProgram({\n      vert: getVert(castString(params.align).toUpperCase()),\n      frag: FRAG\n    });\n    var gl = scene.gl;\n    var buff = gl.createBuffer();\n\n    if (!buff) {\n      throw _this.fatal(\"Not enough memory to create an array buffer!\");\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\n    _this.buff = buff;\n    return _this;\n  }\n\n  BackgroundPainter.prototype.render = function () {\n    var _a = this,\n        scene = _a.scene,\n        prg = _a.prg,\n        atlas = _a.atlas,\n        buff = _a.buff;\n\n    var gl = scene.gl;\n    gl.disable(gl.DEPTH_TEST);\n    prg.use();\n    atlas.activate();\n    var uniforms = prg;\n    uniforms.$uniTexture = 0;\n    prg.setUniform(\"uniAspectRatio\", scene.width / scene.height);\n    prg.bindAttribs(buff, \"attXY\");\n    gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  };\n\n  return BackgroundPainter;\n}(Painter);\n\nexport default BackgroundPainter;\n\nfunction getVert(align) {\n  var x = \"\";\n  var y = \"\";\n\n  if (align.indexOf(\"B\") !== -1) {\n    y = \"location.y -= uniAspectRatio - 1.0;\";\n  } else if (align.indexOf(\"T\") !== -1) {\n    y = \"location.y += uniAspectRatio - 1.0;\";\n  }\n\n  if (align.indexOf(\"R\") !== -1) {\n    x = \"location.x -= 1.0 / uniAspectRatio - 1.0;\";\n  } else if (align.indexOf(\"L\") !== -1) {\n    x = \"location.x += 1.0 / uniAspectRatio - 1.0;\";\n  }\n\n  return \"uniform float uniAspectRatio;\\nattribute vec2 attXY;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  varUV = attXY;\\n  vec2 location = 2.0 * (attXY - vec2(0.5, 0.5));\\n\\n  if (uniAspectRatio > 1.0) {\\n    location.y *= uniAspectRatio;\" + y + \"\\n  } else {\\n    location.x /= uniAspectRatio;\" + x + \"\\n  }\\n\\n  gl_Position = vec4(location.x, -location.y, -1.0, 1.0);\\n}\";\n}\n\nvar FRAG = \"precision mediump float;\\nuniform sampler2D uniTexture;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  vec4 color = texture2D( uniTexture, varUV );\\n  gl_FragColor = color;\\n}\";","var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n/**\n * @class Color\n * Fast color manipulations.\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\n * (saturation), and L (luminance) are all floats between 0 and 1.\n */\n\n\nvar Color =\n/** @class */\nfunction () {\n  function Color(codeCSS) {\n    if (codeCSS === void 0) {\n      codeCSS = \"#000000\";\n    }\n\n    this.R = 0;\n    this.G = 0;\n    this.B = 0;\n    this.H = 0;\n    this.S = 0;\n    this.L = 0;\n    this.A = 1;\n    this.parse(codeCSS);\n  }\n\n  Color.prototype.toArrayRGB = function () {\n    return [this.R, this.G, this.B];\n  };\n\n  Color.prototype.toArrayRGBA = function () {\n    return [this.R, this.G, this.B, this.A];\n  };\n\n  Color.isValid = function (codeCSS) {\n    if (typeof codeCSS !== 'string') return false;\n    if (codeCSS.charAt(0) !== '#') return false;\n\n    switch (codeCSS.length) {\n      case 4: // #RGB\n\n      case 5: // #RGBA\n\n      case 7: // #RRGGBB\n\n      case 9:\n        // #RRGGBBAA\n        return true;\n    }\n\n    return false;\n  };\n\n  Color.normalize = function (codeCSS) {\n    var color = new Color(codeCSS);\n    return color.stringify();\n  };\n\n  Color.luminance = function (codeCSS) {\n    var color = new Color(codeCSS);\n    return color.luminance();\n  };\n  /**\n   * Returns 1 for bright colors and 0 for dark colors.\n   */\n\n\n  Color.luminanceStep = function (codeCSS) {\n    var color = new Color(codeCSS);\n    return color.luminanceStep();\n  };\n\n  Color.fromArrayRGB = function (rgb) {\n    var _a = __read(rgb, 3),\n        R = _a[0],\n        G = _a[1],\n        B = _a[2];\n\n    return this.newRGB(R, G, B);\n  };\n\n  Color.fromArrayRGBA = function (rgba) {\n    var _a = __read(rgba, 4),\n        R = _a[0],\n        G = _a[1],\n        B = _a[2],\n        A = _a[3];\n\n    return this.newRGBA(R, G, B, A);\n  };\n  /**\n   * Mix two colors. alpha should be between 0 and 1,\n   * but there is no check on this.\n   * If alpha is 0, the resulting color is `color1`,\n   * if alpha is 1, the resulting color is `color2`.\n   */\n\n\n  Color.mix = function (color1, color2, alpha) {\n    if (alpha === void 0) {\n      alpha = .5;\n    }\n\n    var beta = 1 - alpha;\n    return Color.newRGBA(alpha * color2.R + beta * color1.R, alpha * color2.G + beta * color1.G, alpha * color2.B + beta * color1.B, alpha * color2.A + beta * color1.A);\n  };\n  /**\n   * If `colors` has only two elements, this method is the same as `mix()`.\n   * Otherwise, it will perform a linear blending through the colors.\n   * If alpha is 0, the resulting color is `colors[0]`,\n   * If alpha is 1, the resulting color is `colors[colors.length - 1]`,\n   */\n\n\n  Color.ramp = function (colors, alpha) {\n    if (alpha === void 0) {\n      alpha = .5;\n    }\n\n    if (colors.length === 0) return Color.newBlack();\n    if (colors.length === 1) return colors[0];\n    var spacesCount = colors.length - 1;\n    var firstColorIndex = Math.floor(alpha * spacesCount);\n    var color1 = colors[firstColorIndex];\n    if (firstColorIndex === spacesCount) return color1;\n    var color2 = colors[firstColorIndex + 1];\n    var translatedAlpha = firstColorIndex + alpha / spacesCount;\n    return Color.mix(color1, color2, translatedAlpha);\n  };\n\n  Color.newBlack = function () {\n    return Color.newRGB(0, 0, 0);\n  };\n\n  Color.newWhite = function () {\n    return Color.newRGB(1, 1, 1);\n  };\n  /**\n   * Create a new Color instance base on R,G,B channels.\n   *\n   * @param   {number} red - Value between 0 and 1.\n   * @param   {number} green - Value between 0 and 1.\n   * @param   {number} blue - Value between 0 and 1.\n   * @returns {Color} New instance of Color.\n   */\n\n\n  Color.newRGB = function (red, green, blue) {\n    var color = new Color();\n    color.R = red;\n    color.G = green;\n    color.B = blue;\n    color.A = 1;\n    return color;\n  };\n  /**\n   * Create a new Color instance base on R,G,B,A channels.\n   *\n   * @param   {number} red - Value between 0 and 1.\n   * @param   {number} green - Value between 0 and 1.\n   * @param   {number} blue - Value between 0 and 1.\n   * @param   {number} alpha - Value between 0 and 1.\n   * @returns {Color} New instance of Color.\n   */\n\n\n  Color.newRGBA = function (red, green, blue, alpha) {\n    var color = new Color();\n    color.R = red;\n    color.G = green;\n    color.B = blue;\n    color.A = alpha;\n    return color;\n  };\n  /**\n   * Parse a color writtent in CSS syntax.\n   *\n   * @param   {string} code - CSS color.\n   * @returns {boolean} `true` if the color has valid syntax.\n   */\n\n\n  Color.prototype.parse = function (code) {\n    if (code === void 0) {\n      code = \"#000000\";\n    }\n\n    var input = code.trim().toUpperCase();\n    if (this.parseHexa.call(this, input)) return true;\n    if (this.parseRGB.call(this, input)) return true;\n    if (this.parseRGBA.call(this, input)) return true;\n    if (this.parseHSL.call(this, input)) return true; // @TODO parseHSLA.\n\n    return false;\n  };\n  /**\n   * @see https://en.wikipedia.org/wiki/Grayscale\n   * @this Color\n   * @returns {undefined}\n   */\n\n\n  Color.prototype.luminance = function () {\n    return 0.2126 * this.R + 0.7152 * this.G + 0.0722 * this.B;\n  };\n  /**\n   * @returns {integer} 0 if the color is dark and 1 if it is light.\n   */\n\n\n  Color.prototype.luminanceStep = function () {\n    return this.luminance() < .6 ? 0 : 1;\n  };\n  /**\n   * @this Color\n   * @returns {string} String value of the color. `#fd45a7`.\n   */\n\n\n  Color.prototype.stringify = function () {\n    var color = hexa2(this.R * 255) + hexa2(this.G * 255) + hexa2(this.B * 255);\n\n    if (this.A < 1) {\n      color += hexa2(this.A * 255);\n    }\n\n    return \"#\" + color;\n  };\n\n  Color.prototype.copy = function () {\n    var newColor = new Color();\n    newColor.R = this.R;\n    newColor.G = this.G;\n    newColor.B = this.B;\n    newColor.A = this.A;\n    newColor.H = this.H;\n    newColor.S = this.S;\n    newColor.L = this.L;\n    return newColor;\n  };\n  /**\n       * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\n       * @this Color\n       * @returns {undefined}\n       */\n\n\n  Color.prototype.hsl2rgb = function () {\n    var H = 6 * this.H,\n        S = this.S,\n        L = this.L,\n        chroma = (1 - Math.abs(2 * L - 1)) * S,\n        x = chroma * (1 - Math.abs(H % 2 - 1));\n    var R = 0,\n        G = 0,\n        B = 0;\n\n    if (H < 3) {\n      if (H < 1) {\n        R = chroma;\n        G = x;\n        B = 0;\n      } else if (H < 2) {\n        R = x;\n        G = chroma;\n        B = 0;\n      } else {\n        // H == 2.\n        R = 0;\n        G = chroma;\n        B = x;\n      }\n    } else if (H < 4) {\n      R = 0;\n      G = x;\n      B = chroma;\n    } else if (H < 5) {\n      R = x;\n      G = 0;\n      B = chroma;\n    } else {\n      R = chroma;\n      G = 0;\n      B = x;\n    }\n\n    var shift = L - chroma * 0.5;\n    this.R = R + shift;\n    this.G = G + shift;\n    this.B = B + shift;\n  };\n\n  Color.prototype.rgb2hsl = function () {\n    var R = this.R;\n    var G = this.G;\n    var B = this.B;\n    var min = Math.min(R, G, B);\n    var max = Math.max(R, G, B);\n    var delta = max - min;\n    this.L = 0.5 * (max + min);\n\n    if (delta < 0.000001) {\n      this.H = 0;\n      this.S = 0;\n    } else {\n      this.S = delta / (1 - Math.abs(2 * this.L - 1));\n\n      if (max === R) {\n        if (G >= B) {\n          this.H = INV6 * ((G - B) / delta);\n        } else {\n          this.H = 1 - INV6 * ((B - G) / delta);\n        }\n      } else if (max === G) {\n        this.H = INV6 * (2 + (B - R) / delta);\n      } else {\n        this.H = INV6 * (4 + (R - G) / delta);\n      }\n    }\n  };\n\n  Color.prototype.parseHexa = function (text) {\n    if (text.charAt(0) !== '#') return false;\n    var R = 0,\n        G = 0,\n        B = 0,\n        A = 1;\n\n    switch (text.length) {\n      case 4:\n        R = parseInt(text.charAt(1), 16) * INV15;\n        G = parseInt(text.charAt(2), 16) * INV15;\n        B = parseInt(text.charAt(3), 16) * INV15;\n        break;\n\n      case 5:\n        R = parseInt(text.charAt(1), 16) * INV15;\n        G = parseInt(text.charAt(2), 16) * INV15;\n        B = parseInt(text.charAt(3), 16) * INV15;\n        A = parseInt(text.charAt(4), 16) * INV15;\n        break;\n\n      case 7:\n        R = parseInt(text.substr(1, 2), 16) * INV255;\n        G = parseInt(text.substr(3, 2), 16) * INV255;\n        B = parseInt(text.substr(5, 2), 16) * INV255;\n        break;\n\n      case 9:\n        R = parseInt(text.substr(1, 2), 16) * INV255;\n        G = parseInt(text.substr(3, 2), 16) * INV255;\n        B = parseInt(text.substr(5, 2), 16) * INV255;\n        A = parseInt(text.substr(7, 2), 16) * INV255;\n        break;\n\n      default:\n    }\n\n    if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\n      this.R = this.G = this.B = this.A = 0;\n    } else {\n      this.R = R;\n      this.G = G;\n      this.B = B;\n      this.A = A;\n    }\n\n    return true;\n  };\n  /**\n   * @param   {string} text - `rgb(200, 140, 50)`\n   * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\n   */\n\n\n  Color.prototype.parseRGB = function (text) {\n    var m = RX_RGB.exec(text);\n    if (!m) return false;\n    this.R = clamp01(parseInt(m[1], 10) * INV255);\n    this.G = clamp01(parseInt(m[2], 10) * INV255);\n    this.B = clamp01(parseInt(m[3], 10) * INV255);\n    this.A = 1;\n    return true;\n  };\n  /**\n   * @param   {string} text - `rgba(200, 140, 50, 0.5)`\n   * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\n   */\n\n\n  Color.prototype.parseRGBA = function (text) {\n    var m = RX_RGBA.exec(text);\n    if (!m) return false;\n    this.R = clamp01(parseInt(m[1], 10) * INV255);\n    this.G = clamp01(parseInt(m[2], 10) * INV255);\n    this.B = clamp01(parseInt(m[3], 10) * INV255);\n    this.A = clamp01(parseFloat(m[4]));\n    return true;\n  };\n  /**\n   * @param   {string} text - `hsl(200, 140, 50)`\n   * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\n   */\n\n\n  Color.prototype.parseHSL = function (text) {\n    var m = RX_HSL.exec(text);\n    if (!m) return false;\n    this.H = clamp01(parseInt(m[1], 10) * INV359);\n    this.S = clamp01(parseInt(m[2], 10) * INV99);\n    this.L = clamp01(parseInt(m[3], 10) * INV99);\n    this.A = 1;\n    this.hsl2rgb();\n    return true;\n  };\n\n  return Color;\n}();\n\nexport default Color;\nvar INV6 = 1 / 6,\n    INV15 = 1 / 15,\n    INV99 = 1 / 99,\n    INV255 = 1 / 255,\n    INV359 = 1 / 359;\nvar RX_RGB = /^RGB[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\nvar RX_RGBA = /^RGBA[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9.]+([0-9.]+)/;\nvar RX_HSL = /^HSL[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\n\nfunction clamp01(value) {\n  if (value < 0) return 0;\n  if (value > 1) return 1;\n  return value;\n}\n\nfunction hexa2(value) {\n  var out = Math.floor(value).toString(16);\n  if (out.length < 2) out = \"0\" + out;\n  return out;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Clear the screen by filling it with a plain color.\n * This color is defined by attributes red, gree, blue and alpha, which must be between 0 and 1.\n */\n\n\nimport Painter from './painter';\nimport Color from '../webgl/color';\n\nvar ClearPainter =\n/** @class */\nfunction (_super) {\n  __extends(ClearPainter, _super);\n\n  function ClearPainter(params) {\n    var _this = _super.call(this, params) || this;\n\n    _this._red = 0.8;\n    _this._green = 0.4;\n    _this._blue = 0.2;\n    _this._alpha = 1;\n    _this.color = params.color || \"#d72\";\n    return _this;\n  }\n\n  Object.defineProperty(ClearPainter.prototype, \"red\", {\n    get: function get() {\n      return this._red;\n    },\n    set: function set(v) {\n      this._red = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"green\", {\n    get: function get() {\n      return this._green;\n    },\n    set: function set(v) {\n      this._green = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"blue\", {\n    get: function get() {\n      return this._blue;\n    },\n    set: function set(v) {\n      this._blue = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"alpha\", {\n    get: function get() {\n      return this._alpha;\n    },\n    set: function set(v) {\n      this._alpha = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"color\", {\n    get: function get() {\n      var color = new Color();\n      color.R = this._red;\n      color.G = this._green;\n      color.B = this._blue;\n      color.A = this._alpha;\n      return color.stringify();\n    },\n    set: function set(cssColor) {\n      var color = new Color(cssColor);\n      this._red = color.R;\n      this._green = color.G;\n      this._blue = color.B;\n      this._alpha = color.A;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ClearPainter.prototype.render = function () {\n    var gl = this.scene.gl;\n    gl.clearColor(this._red, this._green, this._blue, this._alpha);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  };\n\n  return ClearPainter;\n}(Painter);\n\nexport default ClearPainter;","var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar Sprite =\n/** @class */\nfunction () {\n  function Sprite(index, getData, params) {\n    this.getData = getData;\n    this.$index = 0;\n    this.$index = index;\n    this.params = __assign({\n      x: 0,\n      y: 0,\n      z: 0,\n      width: 50,\n      height: 50,\n      originX: params.width ? params.width / 2 : 0,\n      originY: params.height ? params.height / 2 : 0,\n      u0: 0,\n      v0: 0,\n      u1: 1,\n      v1: 1,\n      scale: 1\n    }, params);\n    this.update(this.params);\n  }\n\n  Sprite.prototype.update = function (newParams) {\n    this.params = __assign(__assign({}, this.params), newParams);\n\n    var _a = this,\n        getData = _a.getData,\n        $index = _a.$index,\n        params = _a.params;\n\n    var data = getData();\n    var x = params.x,\n        y = params.y,\n        z = params.z,\n        originX = params.originX,\n        originY = params.originY,\n        width = params.width,\n        height = params.height,\n        u0 = params.u0,\n        v0 = params.v0,\n        u1 = params.u1,\n        v1 = params.v1,\n        scale = params.scale;\n    var xxA = -originX;\n    var yyA = -originY;\n    var xxB = xxA + width;\n    var yyB = yyA;\n    var xxC = xxA + width;\n    var yyC = yyA + height;\n    var xxD = xxA;\n    var yyD = yyA + height;\n    var xA = xxA * scale;\n    var yA = yyA * scale;\n    var xB = xxB * scale;\n    var yB = yyB * scale;\n    var xC = xxC * scale;\n    var yC = yyC * scale;\n    var xD = xxD * scale;\n    var yD = yyD * scale;\n    data[$index + 0] = xA + x;\n    data[$index + 1] = yA + y;\n    data[$index + 2] = z;\n    data[$index + 3] = u0;\n    data[$index + 4] = v0;\n    data[$index + 5] = xB + x;\n    data[$index + 6] = yB + y;\n    data[$index + 7] = z;\n    data[$index + 8] = u1;\n    data[$index + 9] = v0;\n    data[$index + 10] = xC + x;\n    data[$index + 11] = yC + y;\n    data[$index + 12] = z;\n    data[$index + 13] = u1;\n    data[$index + 14] = v1;\n    data[$index + 15] = xD + x;\n    data[$index + 16] = yD + y;\n    data[$index + 17] = z;\n    data[$index + 18] = u0;\n    data[$index + 19] = v1;\n  };\n\n  Object.defineProperty(Sprite.prototype, \"x\", {\n    get: function get() {\n      return this.params.x;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"y\", {\n    get: function get() {\n      return this.params.y;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"z\", {\n    get: function get() {\n      return this.params.z;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"width\", {\n    get: function get() {\n      return this.params.width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"height\", {\n    get: function get() {\n      return this.params.height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"originX\", {\n    get: function get() {\n      return this.params.originX;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"originY\", {\n    get: function get() {\n      return this.params.originY;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"u0\", {\n    get: function get() {\n      return this.params.u0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"v0\", {\n    get: function get() {\n      return this.params.v0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"u1\", {\n    get: function get() {\n      return this.params.u1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sprite.prototype, \"v1\", {\n    get: function get() {\n      return this.params.v1;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Sprite;\n}();\n\nexport default Sprite;","export default \"uniform float uniWidth;\\nuniform float uniHeight;\\nattribute vec3 attXYZ;\\nattribute vec2 attUV;\\nvarying vec2 varUV;\\n\\nconst float RESOLUTION = 500.0;\\nconst float INV_RESOLUTION = 1.0 / RESOLUTION;\\n\\nvoid main() {\\n  varUV = attUV;\\n  float widestSide = max(uniWidth, uniHeight);\\n  float w = widestSide / uniWidth;\\n  float h = widestSide / uniHeight;\\n  float x = w * (attXYZ.x - RESOLUTION) * INV_RESOLUTION;\\n  float y = h * (attXYZ.y - RESOLUTION) * INV_RESOLUTION;\\n\\n  gl_Position = vec4(x, -y, attXYZ.z, 1.0);\\n}\\n\"","export default \"precision mediump float;\\nuniform sampler2D uniTexture;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  vec4 color = texture2D( uniTexture, varUV );\\n  if (color.a < 1.0) discard;\\n  gl_FragColor = color;\\n}\\n\"","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n/**\n *\n */\n\n\nimport Painter from '../painter';\nimport Sprite from './sprite';\nimport vert from './sprites.vert';\nimport frag from './sprites.frag'; // Allocations will be done by pieces of BLOCK Sprites.\n\nvar BLOCK = 64;\nvar NB_ATTRIBS = 5; // attXYZ and attUV.\n\nvar NB_CORNERS = 4;\nvar CHUNK = NB_ATTRIBS * NB_CORNERS;\n\nvar SpritesPainter =\n/** @class */\nfunction (_super) {\n  __extends(SpritesPainter, _super);\n\n  function SpritesPainter(params) {\n    var _this = _super.call(this, params) || this;\n\n    _this.dataVert = new Float32Array(BLOCK * CHUNK);\n    _this.sprites = [];\n    _this.count = 0;\n    _this.capacity = BLOCK;\n    /**\n     * Since the vertex array can be reallocated, we cannot give a reference to the Float32Array\n     * to any Sprite. Instead, we will give them this function that will return the current array.\n     */\n\n    _this.getData = function () {\n      return _this.dataVert;\n    };\n\n    var scene = params.scene,\n        atlas = params.atlas;\n    var atlasObj = scene.getAtlas(atlas);\n\n    if (!atlasObj) {\n      throw _this.fatal(\"Atlas \\\"\" + atlas + \"\\\" not found!\");\n    }\n\n    _this.atlas = atlasObj;\n    _this.prg = _this.createProgram({\n      vert: vert,\n      frag: frag\n    });\n    var gl = scene.gl;\n    var buffVert = gl.createBuffer();\n\n    if (!buffVert) {\n      throw _this.fatal(\"Not enough memory to create an array buffer!\");\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n    gl.bufferData(gl.ARRAY_BUFFER, _this.dataVert, gl.DYNAMIC_DRAW);\n    _this.buffVert = buffVert;\n    var buffElem = gl.createBuffer();\n\n    if (!buffElem) {\n      throw _this.fatal(\"Not enough memory to create an array buffer!\");\n    }\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, createElements(BLOCK), gl.DYNAMIC_DRAW);\n    _this.buffElem = buffElem;\n    return _this;\n  }\n\n  SpritesPainter.prototype.createSprite = function (params) {\n    var index = this.count * CHUNK;\n    this.count++;\n    var _a = this.atlas,\n        width = _a.width,\n        height = _a.height;\n    var sprite = new Sprite(index, this.getData, __assign({\n      width: width,\n      height: height\n    }, params));\n    this.sprites.push(sprite);\n    console.info(\"this.dataVert=\", this.dataVert);\n    return sprite;\n  };\n\n  SpritesPainter.prototype.render = function () {\n    var _a = this,\n        scene = _a.scene,\n        prg = _a.prg,\n        atlas = _a.atlas,\n        buffVert = _a.buffVert,\n        buffElem = _a.buffElem;\n\n    var gl = scene.gl; // Update sprites' attributes.\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n    gl.bufferData(gl.ARRAY_BUFFER, this.dataVert, gl.DYNAMIC_DRAW);\n    gl.enable(gl.DEPTH_TEST);\n    prg.use();\n    atlas.activate();\n    var uniforms = prg;\n    uniforms.$uniTexture = 0;\n    uniforms.$uniWidth = scene.width;\n    uniforms.$uniHeight = scene.height;\n    prg.bindAttribs(buffVert, \"attXYZ\", \"attUV\");\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n    gl.drawElements(gl.TRIANGLES, 6 * this.count, gl.UNSIGNED_SHORT, 0);\n  };\n\n  return SpritesPainter;\n}(Painter);\n\nexport default SpritesPainter;\n/**\n * A--B\n * |  |\n * D--C\n */\n\nfunction createElements(capacity) {\n  var dataElem = new Uint16Array(6 * capacity);\n  var i = 0;\n  var a = 0;\n\n  for (var k = 0; k < capacity; k++) {\n    var b = a + 1;\n    var c = a + 2;\n    var d = a + 3;\n    dataElem[i + 0] = a;\n    dataElem[i + 1] = d;\n    dataElem[i + 2] = b;\n    dataElem[i + 3] = b;\n    dataElem[i + 4] = d;\n    dataElem[i + 5] = c;\n    a += 4;\n    i += 6;\n  }\n\n  return dataElem;\n}","import Background from './background';\nimport Clear from './clear';\nimport Painter from './painter';\nimport Sprites from './sprites';\nexport default {\n  Background: Background,\n  Clear: Clear,\n  Painter: Painter,\n  Sprites: Sprites\n};","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar Atlas =\n/** @class */\nfunction () {\n  function Atlas(gl, _name) {\n    this.gl = gl;\n    this._name = _name;\n    this._ready = false;\n    this._width = 0;\n    this._height = 0;\n    var texture = gl.createTexture();\n    if (!texture) throw \"Unable to create a new texture!\";\n    this.texture = texture;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n  }\n\n  Object.defineProperty(Atlas.prototype, \"name\", {\n    get: function get() {\n      return this._name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"ready\", {\n    /**\n     * Return `true` as soon as an image has been loaded into the graphic card.\n     */\n    get: function get() {\n      return this._ready;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Remove the texture from the graphic card memory.\n   */\n\n  Atlas.prototype.destroy = function () {\n    this._ready = false;\n\n    var _a = this,\n        gl = _a.gl,\n        texture = _a.texture;\n\n    gl.deleteTexture(texture);\n  };\n\n  Atlas.prototype.activate = function (unit) {\n    if (unit === void 0) {\n      unit = 0;\n    }\n\n    var _a = this,\n        gl = _a.gl,\n        texture = _a.texture;\n\n    var UNITS = [gl.TEXTURE0, gl.TEXTURE1, gl.TEXTURE2, gl.TEXTURE3, gl.TEXTURE4, gl.TEXTURE5, gl.TEXTURE6, gl.TEXTURE7];\n    gl.activeTexture(UNITS[Math.abs(unit) % UNITS.length]);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n  };\n\n  Atlas.prototype.load = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        this._ready = false;\n        return [2\n        /*return*/\n        , this.loadImage(params.image)];\n      });\n    });\n  };\n\n  Atlas.prototype.loadImage = function (url) {\n    return __awaiter(this, void 0, void 0, function () {\n      var that;\n      return __generator(this, function (_a) {\n        that = this;\n        return [2\n        /*return*/\n        , new Promise(function (resolve, reject) {\n          var img = new Image();\n          that._ready = false;\n\n          img.onload = function () {\n            var gl = that.gl,\n                texture = that.texture;\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n            that._ready = true;\n            that._width = img.width;\n            that._height = img.height;\n            resolve();\n          };\n\n          img.onerror = function () {\n            console.error(\"Unable to load image \\\"\" + name + \"\\\": \", url);\n            reject();\n          };\n\n          img.src = url;\n        })];\n      });\n    });\n  };\n\n  return Atlas;\n}();\n\nexport default Atlas;","/**\n * Resolution in CSS pixels. If omitted, the real resolution\n * of the device is taken. On smartphones, for instance,\n * the resolution is often greater than 1.\n *\n * Return `true` if the size has changed.\n */\nexport default (function (gl, resolution) {\n  if (resolution === void 0) {\n    resolution = 0;\n  }\n\n  if (resolution <= 0) {\n    resolution = window.devicePixelRatio;\n  }\n\n  var canvas = gl.canvas;\n  var displayWidth = Math.floor(canvas.clientWidth * resolution);\n  var displayHeight = Math.floor(canvas.clientHeight * resolution); // Check if the canvas is not the same size.\n\n  if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\n    // Make the canvas the same size\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    gl.viewport(0, 0, displayWidth, displayHeight);\n    return true;\n  }\n\n  return false;\n});","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport Atlas from './atlas';\nimport Resize from './webgl/resize';\n\nvar FlatLand =\n/** @class */\nfunction () {\n  function FlatLand(canvas) {\n    var _this = this;\n\n    this.activePainters = [];\n    this.isRendering = false;\n    this.resolution = 1;\n    this.onAnimation = null;\n\n    this.render = function (time) {\n      var e_1, _a;\n\n      if (_this.isRendering) window.requestAnimationFrame(_this.render);else return;\n      Resize(_this.gl, _this.resolution);\n\n      try {\n        try {\n          for (var _b = __values(_this.activePainters), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var painter = _c.value;\n            painter.render(time);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n\n        var onAnimation = _this.onAnimation;\n\n        if (typeof onAnimation === 'function') {\n          onAnimation(time);\n        }\n      } catch (ex) {\n        console.error(ex);\n\n        _this.stop();\n\n        console.error(\"###############################\");\n        console.error(\"# Rendering has been stopped! #\");\n        console.error(\"###############################\");\n      }\n    };\n\n    var gl = canvas.getContext(\"webgl\", {// Specify WebGL options.\n    });\n    if (!gl) throw \"Unable to create a WegGL context!\";\n    this.gl = gl;\n    this.atlases = new Map();\n    this.painters = new Map();\n  }\n\n  FlatLand.prototype.getAtlas = function (name) {\n    var atlases = this.atlases;\n    return atlases.get(name) || null;\n  };\n\n  FlatLand.prototype.createAtlas = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var name, atlas;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            name = params.name;\n            atlas = new Atlas(this.gl, name);\n            this.atlases.set(name, atlas);\n            return [4\n            /*yield*/\n            , atlas.load(params)];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            , atlas];\n        }\n      });\n    });\n  };\n\n  FlatLand.prototype.destroyAtlas = function (name) {\n    var atlases = this.atlases;\n    var atlas = atlases.get(name);\n    if (!atlas) return false;\n    atlases.delete(name);\n    atlas.destroy();\n    return true;\n  };\n  /**\n   * If a painter with the same name already exists, return false and don't add the new one.\n   */\n\n\n  FlatLand.prototype.$attachPainter = function (painter) {\n    if (this.painters.has(painter.name)) return false;\n    this.painters.set(painter.name, painter);\n    this.activePainters = this.activePainters.filter(function (p) {\n      return p.name;\n    });\n    this.activePainters.push(painter);\n    return true;\n  };\n\n  FlatLand.prototype.$detachPainter = function (name) {\n    if (this.painters.has(name)) return false;\n    this.painters.delete(name);\n    this.activePainters = this.activePainters.filter(function (p) {\n      return p.name;\n    });\n    return true;\n  };\n\n  Object.defineProperty(FlatLand.prototype, \"width\", {\n    get: function get() {\n      return this.gl.drawingBufferWidth;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlatLand.prototype, \"height\", {\n    get: function get() {\n      return this.gl.drawingBufferHeight;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FlatLand.prototype.start = function () {\n    if (this.isRendering) return;\n    this.isRendering = true;\n    window.requestAnimationFrame(this.render);\n  };\n\n  FlatLand.prototype.stop = function () {\n    this.isRendering = false;\n  };\n\n  return FlatLand;\n}();\n\nexport default FlatLand;","import Painter from './painter';\nimport Scene from './scene';\nexport default {\n  Painter: Painter,\n  Scene: Scene\n};","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import React from \"react\"\n\nimport \"./canvas.css\"\n\ninterface ICanvasProps {\n    init: (canvas: HTMLCanvasElement) => void\n}\n\nexport default class Canvas extends React.Component<ICanvasProps, {}> {\n    private readonly ref: React.RefObject<HTMLCanvasElement> = React.createRef();\n\n    componentDidMount() {\n        const canvas = this.ref.current\n        if (!canvas) return\n        this.props.init(canvas)\n    }\n\n    render() {\n        return (<canvas ref={this.ref} className=\"Canvas\"></canvas>)\n    }\n}\n","import React from 'react';\nimport './App.css';\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n        <h1>Tutorials</h1>\n        <ul>\n            <li><a href=\"tuto-clear.html\">Hello world!</a></li>\n            <li><a href=\"tuto-background.html\">Scalable background</a></li>\n            <li><a href=\"tuto-sprites-1.html\">Sprites (1)</a></li>\n        </ul>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = require(\"regenerator-runtime\");\n","module.exports = __webpack_public_path__ + \"static/media/bowl.9fe5ee10.png\";","module.exports = __webpack_public_path__ + \"static/media/background.0935ef34.png\";","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\ntypeof module === \"object\" ? module.exports : {});\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport FlatLand from 'flat-land-gl'\n\nimport Canvas from '../../../canvas'\n//import Description from '../../../view/description'\n//import description from './sprites-1.md'\nimport bowlAtlas from './bowl.png'\nimport backgroundAtlas from './background.png'\n\n\nReactDOM.render(<div>\n    <Canvas init={init}/>\n    {/*<Description content={description}/>*/}\n</div>, document.getElementById('root'));\n\n\nasync function init(canvas: HTMLCanvasElement) {\n    const scene = new FlatLand.Scene(canvas)\n    await scene.createAtlas({\n        name: \"bowl\",\n        image: bowlAtlas\n    })\n    scene.createAtlas({\n        name: \"background\",\n        image: backgroundAtlas\n    })\n    new FlatLand.Painter.Background({\n        scene,\n        atlas: \"background\",\n        align: \"B\"\n    })\n    const sprites = new FlatLand.Painter.Sprites({\n        scene,\n        atlas: \"bowl\"\n    })\n\n    const bowls: any[] = []\n    for (let count=0 ; count<7 ; count++) {\n        const bowl = sprites.createSprite({\n            x: 500, y: 500 })\n        bowls.push(bowl)\n    }\n\n    scene.onAnimation = (time: number) => {\n        for (let k=0 ; k<bowls.length ; k++) {\n            const bowl = bowls[k]\n            const speed1 = 0.001 * Math.sin(k)\n            const speed2 = 0.001 * Math.cos(2 * k)\n\n            const radius = (1 + Math.cos(time * (0.00147 + speed1))) * 100 + 50\n            const angle = time * (0.00247 + speed2)\n            const x = 500 + radius * Math.cos(angle)\n            const y = 500 + radius * Math.sin(angle)\n\n            bowl.update({ x, y, scale: (radius + 250) / 500 })\n        }\n    }\n    scene.start()\n}\n"],"sourceRoot":""}