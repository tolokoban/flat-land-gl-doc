{"version":3,"sources":["../../flat-land-gl/dist/webgl/program.js","../../flat-land-gl/dist/painter/painter.js","../../flat-land-gl/dist/converter/string.js","../../flat-land-gl/dist/painter/background/background.js","../../flat-land-gl/dist/painter/clear.js","../../flat-land-gl/dist/painter/index.js","../../flat-land-gl/dist/atlas.js","../../flat-land-gl/dist/webgl/resize.js","../../flat-land-gl/dist/scene.js","../../flat-land-gl/dist/index.js","App.tsx","serviceWorker.ts","index.tsx","canvas.tsx","page/tutorial/background/background.jpg","view/description/description.tsx","page/tutorial/background/index.tsx","page/tutorial/background/background.md"],"names":["__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","BPE","Float32Array","BYTES_PER_ELEMENT","Program","gl","codes","includes","vert","Error","frag","parseInclude","parseIncludes","this","Object","freeze","_typesNamesLookup","lookup","k","toUpperCase","v","getTypesNamesLookup","shaderProgram","createProgram","program","vertShader","code","getShader","VERTEX_SHADER","getVertexShader","attachShader","fragShader","FRAGMENT_SHADER","getFragmentShader","linkProgram","use","useProgram","attribs","createAttributes","uniforms","createUniforms","prototype","attribsCount","getProgramParameter","ACTIVE_ATTRIBUTES","index","item","getActiveAttrib","typeName","getTypeName","type","getSize","location","getAttribLocation","name","defineProperty","writable","enumerable","configurable","FLOAT_VEC4","FLOAT_VEC3","FLOAT_VEC2","FLOAT","typeId","bindAttribs","buffer","e_1","_a","e_2","_b","names","_i","arguments","that","bindBuffer","ARRAY_BUFFER","totalSize","names_1","names_1_1","name_1","attrib","keys","map","join","size","e_1_1","error","return","offset","names_2","names_2_1","name_2","enableVertexAttribArray","vertexAttribPointer","e_2_1","setUniform","uniformsCount","ACTIVE_UNIFORMS","getActiveUniform","location_1","getUniformLocation","set","createUniformSetter","get","createUniformGetter","nameGL","nameJS","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","SAMPLER_2D","uniform1i","uniform1iv","uniform1f","uniform1fv","uniform2fv","uniform3fv","uniform4fv","FLOAT_MAT3","uniformMatrix3fv","FLOAT_MAT4","uniformMatrix4fv","split","line","trim","substr","pos","indexOf","includeName","charAt","snippet","console","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","Painter","_name","scene","$attachPainter","destroy","$detachPainter","shaders","fatal","message","castString","defaultValue","t","isNaN","__extends","_extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","_super","BackgroundPainter","params","_this","atlasName","atlas","getAtlas","prg","getVert","align","FRAG","buff","createBuffer","bufferData","STATIC_DRAW","render","disable","DEPTH_TEST","activate","$uniTexture","width","height","drawArrays","TRIANGLE_STRIP","x","y","Background","Clear","ClearPainter","_red","_green","_blue","_alpha","clearColor","clear","COLOR_BUFFER_BIT","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","e","rejected","result","then","apply","__generator","body","f","g","_","label","sent","trys","ops","verb","n","op","pop","push","Atlas","_ready","_width","_height","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","loadImage","image","deleteTexture","unit","UNITS","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","activeTexture","Math","abs","url","img","Image","onload","texImage2D","RGBA","onerror","src","resolution","window","devicePixelRatio","canvas","displayWidth","floor","clientWidth","displayHeight","clientHeight","viewport","FlatLand","activePainters","isRendering","onAnimation","time","requestAnimationFrame","_c","ex","stop","getContext","atlases","Map","painters","createAtlas","destroyAtlas","delete","painter","has","filter","drawingBufferWidth","drawingBufferHeight","start","Scene","App","className","href","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","Canvas","ref","React","createRef","current","props","init","Component","module","exports","Description","options","forceBlock","content","background"],"mappings":"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","file":"static/js/index.85478ee2.10c4a8a8.chunk.js","sourcesContent":["var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar BPE = new Float32Array().BYTES_PER_ELEMENT;\n/**\n * Creating  a  WebGL  program  for shaders  is  painful.  This  class\n * simplifies the process.\n *\n * @class Program\n *\n * Object properties starting with `$` are WebGL uniforms or attributes.\n * Uniforms behave as expected: you can read/write a value.\n * Attributes when read, return the location. And when written, enable/disabled\n * this attribute. So you read integers and writte booleans.\n *\n * @param gl - WebGL context.\n * @param codes  - Object  with two  mandatory attributes:  `vert` for\n * vertex shader and `frag` for fragment shader.\n * @param  includes  -  (optional)  If  defined,  the  `#include  foo`\n * directives  of  shaders   will  be  replaced  by   the  content  of\n * `includes.foo`.\n */\n\nvar Program =\n/** @class */\nfunction () {\n  function Program(gl, codes, includes) {\n    if (includes === void 0) {\n      includes = {};\n    }\n\n    if (typeof codes.vert !== 'string') {\n      throw Error('[webgl.program] Missing attribute `vert` in argument `codes`!');\n    }\n\n    if (typeof codes.frag !== 'string') {\n      throw Error('[webgl.program] Missing attribute `frag` in argument `codes`!');\n    }\n\n    codes = parseIncludes(codes, includes);\n    this.gl = gl;\n    Object.freeze(this.gl);\n    this.BPE = BPE;\n    Object.freeze(this.BPE);\n    this._typesNamesLookup = getTypesNamesLookup(gl);\n    var shaderProgram = gl.createProgram();\n\n    if (!shaderProgram) {\n      throw Error('Unable to create WebGLProgram!');\n    }\n\n    this.program = shaderProgram;\n    var vertShader = getVertexShader(gl, codes.vert);\n    gl.attachShader(shaderProgram, vertShader);\n    var fragShader = getFragmentShader(gl, codes.frag);\n    gl.attachShader(shaderProgram, fragShader);\n    gl.linkProgram(shaderProgram);\n\n    this.use = function () {\n      gl.useProgram(shaderProgram);\n    };\n\n    this.attribs = this.createAttributes();\n    this.uniforms = this.createUniforms();\n  }\n\n  Program.prototype.createAttributes = function () {\n    var _a = this,\n        gl = _a.gl,\n        program = _a.program;\n\n    var attribs = {};\n    var attribsCount = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n    for (var index = 0; index < attribsCount; index++) {\n      var item = gl.getActiveAttrib(program, index);\n      if (!item) continue;\n      item.typeName = this.getTypeName(item.type);\n      item.length = this.getSize(gl, item);\n      item.location = gl.getAttribLocation(program, item.name);\n      attribs[item.name] = item;\n      Object.defineProperty(this, '$' + item.name, {\n        value: item.location,\n        writable: false,\n        enumerable: true,\n        configurable: false\n      });\n    }\n\n    return attribs;\n  };\n\n  Program.prototype.getSize = function (gl, item) {\n    switch (item.type) {\n      case gl.FLOAT_VEC4:\n        return 4;\n\n      case gl.FLOAT_VEC3:\n        return 3;\n\n      case gl.FLOAT_VEC2:\n        return 2;\n\n      case gl.FLOAT:\n        return 1;\n\n      default:\n        throw Error(\"[webgl.program:getSize] I don't know the size of the attribute '\" + item.name + \"' because I don't know the type \" + this.getTypeName(item.type) + \"!\");\n    }\n  };\n\n  Program.prototype.use = function () {\n    this.gl.useProgram(this.program);\n  };\n\n  Program.prototype.getTypeName = function (typeId) {\n    return this._typesNamesLookup[typeId];\n  };\n\n  Program.prototype.bindAttribs = function (buffer) {\n    var e_1, _a, e_2, _b;\n\n    var names = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      names[_i - 1] = arguments[_i];\n    }\n\n    var that = this;\n    var gl = this.gl;\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    var totalSize = 0;\n\n    try {\n      for (var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {\n        var name_1 = names_1_1.value;\n        var attrib = that.attribs[name_1];\n\n        if (!attrib) {\n          throw Error(\"Cannot find attribute \\\"\" + name_1 + \"\\\"!\\n\" + \"It may be not active because unused in the shader.\\n\" + \"Available attributes are: \" + Object.keys(that.attribs).map(function (name) {\n            return '\"' + name + '\"';\n          }).join(\", \") + (\" (\" + that.attribs.length + \")\"));\n        }\n\n        totalSize += attrib.size * attrib.length * BPE;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    var offset = 0;\n\n    try {\n      for (var names_2 = __values(names), names_2_1 = names_2.next(); !names_2_1.done; names_2_1 = names_2.next()) {\n        var name_2 = names_2_1.value;\n        var attrib = that.attribs[name_2];\n        gl.enableVertexAttribArray(attrib.location);\n        gl.vertexAttribPointer(attrib.location, attrib.size * attrib.length, gl.FLOAT, false, // No normalisation.\n        totalSize, offset);\n        offset += attrib.size * attrib.length * BPE;\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (names_2_1 && !names_2_1.done && (_b = names_2.return)) _b.call(names_2);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  };\n\n  Program.prototype.setUniform = function (name, value) {\n    var id = '$' + name;\n    var map = this;\n    map[id] = value;\n  };\n\n  Program.prototype.createUniforms = function () {\n    var _a = this,\n        gl = _a.gl,\n        program = _a.program;\n\n    var uniforms = {};\n    var uniformsCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (var index = 0; index < uniformsCount; index++) {\n      var item = gl.getActiveUniform(program, index);\n      if (!item) continue;\n      var location_1 = gl.getUniformLocation(program, item.name);\n      if (!location_1) continue;\n      uniforms[item.name] = location_1;\n      Object.defineProperty(this, '$' + item.name, {\n        set: this.createUniformSetter(item, uniforms[item.name], this._typesNamesLookup),\n        get: this.createUniformGetter(item),\n        enumerable: true,\n        configurable: false\n      });\n    }\n\n    return uniforms;\n  };\n\n  Program.prototype.createUniformSetter = function (item, nameGL, lookup) {\n    var gl = this.gl;\n    var nameJS = '_$' + item.name;\n\n    switch (item.type) {\n      case gl.BYTE:\n      case gl.UNSIGNED_BYTE:\n      case gl.SHORT:\n      case gl.UNSIGNED_SHORT:\n      case gl.INT:\n      case gl.UNSIGNED_INT:\n      case gl.SAMPLER_2D:\n        // For textures, we specify the texture unit.\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform1i(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          return function (v) {\n            gl.uniform1iv(nameGL, v);\n            this[nameJS] = v;\n          };\n        }\n\n      case gl.FLOAT:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform1f(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          return function (v) {\n            gl.uniform1fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        }\n\n      case gl.FLOAT_VEC2:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform2fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC2 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_VEC3:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform3fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC3 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_VEC4:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniform4fv(nameGL, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC4 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_MAT3:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniformMatrix3fv(nameGL, false, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT3 in uniform `\" + item.name + \"'!'\");\n        }\n\n      case gl.FLOAT_MAT4:\n        if (item.size === 1) {\n          return function (v) {\n            gl.uniformMatrix4fv(nameGL, false, v);\n            this[nameJS] = v;\n          };\n        } else {\n          throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT4 in uniform `\" + item.name + \"'!'\");\n        }\n\n      default:\n        throw Error(\"[webgl.program.createWriter] Don't know how to deal with uniform `\" + item.name + \"` of type \" + lookup[item.type] + \"!\");\n    }\n  };\n\n  Program.prototype.createUniformGetter = function (item) {\n    var name = '_$' + item.name;\n    return function () {\n      return this[name];\n    };\n  };\n\n  return Program;\n}();\n\nexport default Program;\n/**\n * This is a preprocessor for shaders.\n * Directives  `#include`  will be  replaced  by  the content  of  the\n * correspondent attribute in `includes`.\n */\n\nfunction parseIncludes(codes, includes) {\n  return {\n    vert: parseInclude(codes.vert, includes),\n    frag: parseInclude(codes.frag, includes)\n  };\n}\n\nfunction parseInclude(code, includes) {\n  return code.split('\\n').map(function (line) {\n    if (line.trim().substr(0, 8) !== '#include') return line;\n    var pos = line.indexOf('#include') + 8;\n    var includeName = line.substr(pos).trim(); // We accept all this systaxes:\n    // #include foo\n    // #include 'foo'\n    // #include <foo>\n    // #include \"foo\"\n\n    if (\"'<\\\"\".indexOf(includeName.charAt(0)) > -1) {\n      includeName = includeName.substr(1, includeName.length - 2);\n    }\n\n    var snippet = includes[includeName];\n\n    if (typeof snippet !== 'string') {\n      console.error(\"Include <\" + includeName + \"> not found in \", includes);\n      throw Error(\"Include not found in shader: \" + includeName);\n    }\n\n    return snippet;\n  }).join(\"\\n\");\n}\n\nfunction getShader(type, gl, code) {\n  if (type !== gl.VERTEX_SHADER && type !== gl.FRAGMENT_SHADER) {\n    throw Error('Type must be VERTEX_SHADER or FRAGMENT_SHADER!');\n  }\n\n  var shader = gl.createShader(type);\n\n  if (!shader) {\n    throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n  }\n\n  gl.shaderSource(shader, code);\n  gl.compileShader(shader);\n\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    console.log(code);\n    console.error(\"An error occurred compiling the shader: \" + gl.getShaderInfoLog(shader));\n    throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n  }\n\n  return shader;\n}\n\nfunction getFragmentShader(gl, code) {\n  return getShader(gl.FRAGMENT_SHADER, gl, code);\n}\n\nfunction getVertexShader(gl, code) {\n  return getShader(gl.VERTEX_SHADER, gl, code);\n}\n\nfunction getTypesNamesLookup(gl) {\n  var lookup = {};\n\n  for (var k in gl) {\n    if (k !== k.toUpperCase()) continue;\n    var v = gl[k];\n\n    if (typeof v === 'number') {\n      lookup[v] = k;\n    }\n  }\n\n  return lookup;\n}","/**\n * This is a virtual painter from which all the other will inherit.\n */\nimport Program from '../webgl/program';\n\nvar Painter =\n/** @class */\nfunction () {\n  function Painter(_name, scene) {\n    this._name = _name;\n    this.scene = scene;\n    scene.$attachPainter(this);\n  }\n\n  Painter.prototype.destroy = function () {\n    this.scene.$detachPainter(this.name);\n  };\n\n  Object.defineProperty(Painter.prototype, \"name\", {\n    get: function get() {\n      return this._name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Painter.prototype.createProgram = function (shaders, includes) {\n    if (includes === void 0) {\n      includes = {};\n    }\n\n    return new Program(this.scene.gl, shaders, includes);\n  };\n\n  Painter.prototype.fatal = function (message) {\n    console.error(\"Fatal error in Painter \\\"\" + this.name + \"\\\":\", message);\n    throw Error(message);\n  };\n\n  return Painter;\n}();\n\nexport default Painter;","export default function castString(value, defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = \"\";\n  }\n\n  var t = typeof value;\n\n  if (t === 'number' && !isNaN(value)) {\n    return \"\" + value;\n  }\n\n  if (t === 'string') return value;\n  return defaultValue;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Background the screen by filling it with an image that covers it entirely.\n */\n\n\nimport Painter from '../painter';\nimport castString from '../../converter/string';\n\nvar BackgroundPainter =\n/** @class */\nfunction (_super) {\n  __extends(BackgroundPainter, _super);\n  /**\n   * params: { atlasName, align }\n   * - align: if undefined, the background will be centered.\n   *          \"R\" means that the Right edge of the background is always visible.\n   *          \"L\" means the same for Left.\n   *          \"T\" for Top.\n   *          \"B\" for \"Bottom\".\n   */\n\n\n  function BackgroundPainter(name, scene, params) {\n    var _this = _super.call(this, name, scene) || this;\n\n    var atlasName = params.atlasName;\n    var atlas = scene.getAtlas(atlasName);\n\n    if (!atlas) {\n      throw _this.fatal(\"Atlas \\\"\" + atlasName + \"\\\" not found!\");\n    }\n\n    _this.atlas = atlas;\n    _this.prg = _this.createProgram({\n      vert: getVert(castString(params.align).toUpperCase()),\n      frag: FRAG\n    });\n    var gl = scene.gl;\n    var buff = gl.createBuffer();\n\n    if (!buff) {\n      throw _this.fatal(\"Not enough memory to create an array buffer!\");\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\n    _this.buff = buff;\n    return _this;\n  }\n\n  BackgroundPainter.prototype.render = function () {\n    var _a = this,\n        scene = _a.scene,\n        prg = _a.prg,\n        atlas = _a.atlas,\n        buff = _a.buff;\n\n    var gl = scene.gl;\n    gl.disable(gl.DEPTH_TEST);\n    prg.use();\n    atlas.activate();\n    var uniforms = prg;\n    uniforms.$uniTexture = 0;\n    prg.setUniform(\"uniAspectRatio\", scene.width / scene.height);\n    prg.bindAttribs(buff, \"attXY\");\n    gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  };\n\n  return BackgroundPainter;\n}(Painter);\n\nexport default BackgroundPainter;\n\nfunction getVert(align) {\n  var x = \"\";\n  var y = \"\";\n\n  if (align.indexOf(\"B\") !== -1) {\n    y = \"location.y -= uniAspectRatio - 1.0;\";\n  } else if (align.indexOf(\"T\") !== -1) {\n    y = \"location.y += uniAspectRatio - 1.0;\";\n  }\n\n  if (align.indexOf(\"R\") !== -1) {\n    x = \"location.x -= 1.0 / uniAspectRatio - 1.0;\";\n  } else if (align.indexOf(\"L\") !== -1) {\n    x = \"location.x += 1.0 / uniAspectRatio - 1.0;\";\n  }\n\n  return \"uniform float uniAspectRatio;\\nattribute vec2 attXY;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  varUV = attXY;\\n  vec2 location = 2.0 * (attXY - vec2(0.5, 0.5));\\n\\n  if (uniAspectRatio > 1.0) {\\n    location.y *= uniAspectRatio;\" + y + \"\\n  } else {\\n    location.x /= uniAspectRatio;\" + x + \"\\n  }\\n\\n  gl_Position = vec4(location.x, -location.y, -1.0, 1.0);\\n}\";\n}\n\nvar FRAG = \"precision mediump float;\\nuniform sampler2D uniTexture;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  vec4 color = texture2D( uniTexture, varUV );\\n  gl_FragColor = color;\\n}\";","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * Clear the screen by filling it with a plain color.\n * This color is defined by attributes red, gree, blue and alpha, which must be between 0 and 1.\n */\n\n\nimport Painter from './painter';\n\nvar ClearPainter =\n/** @class */\nfunction (_super) {\n  __extends(ClearPainter, _super);\n\n  function ClearPainter(name, scene) {\n    var _this = _super.call(this, name, scene) || this;\n\n    _this._red = 0.8;\n    _this._green = 0.4;\n    _this._blue = 0.2;\n    _this._alpha = 1;\n    return _this;\n  }\n\n  Object.defineProperty(ClearPainter.prototype, \"red\", {\n    get: function get() {\n      return this._red;\n    },\n    set: function set(v) {\n      this._red = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"green\", {\n    get: function get() {\n      return this._green;\n    },\n    set: function set(v) {\n      this._green = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"blue\", {\n    get: function get() {\n      return this._blue;\n    },\n    set: function set(v) {\n      this._blue = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ClearPainter.prototype, \"alpha\", {\n    get: function get() {\n      return this._alpha;\n    },\n    set: function set(v) {\n      this._alpha = v;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ClearPainter.prototype.render = function () {\n    var gl = this.scene.gl;\n    gl.clearColor(this._red, this._green, this._blue, this._alpha);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  };\n\n  return ClearPainter;\n}(Painter);\n\nexport default ClearPainter;","import Background from './background';\nimport Clear from './clear';\nimport Painter from './painter';\nexport default {\n  Background: Background,\n  Clear: Clear,\n  Painter: Painter\n};","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar Atlas =\n/** @class */\nfunction () {\n  function Atlas(gl, params) {\n    this.gl = gl;\n    this.params = params;\n    this._ready = false;\n    this._width = 0;\n    this._height = 0;\n    var texture = gl.createTexture();\n    if (!texture) throw \"Unable to create a new texture!\";\n    this.texture = texture;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    this.loadImage(params.image);\n  }\n\n  Object.defineProperty(Atlas.prototype, \"name\", {\n    get: function get() {\n      return this.params.name;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"width\", {\n    get: function get() {\n      return this._width;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"height\", {\n    get: function get() {\n      return this._height;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Atlas.prototype, \"ready\", {\n    /**\n     * Return `true` as soon as an image has been loaded into the graphic card.\n     */\n    get: function get() {\n      return this._ready;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * Remove the texture from the graphic card memory.\n   */\n\n  Atlas.prototype.destroy = function () {\n    this._ready = false;\n\n    var _a = this,\n        gl = _a.gl,\n        texture = _a.texture;\n\n    gl.deleteTexture(texture);\n  };\n\n  Atlas.prototype.activate = function (unit) {\n    if (unit === void 0) {\n      unit = 0;\n    }\n\n    var _a = this,\n        gl = _a.gl,\n        texture = _a.texture;\n\n    var UNITS = [gl.TEXTURE0, gl.TEXTURE1, gl.TEXTURE2, gl.TEXTURE3, gl.TEXTURE4, gl.TEXTURE5, gl.TEXTURE6, gl.TEXTURE7];\n    gl.activeTexture(UNITS[Math.abs(unit) % UNITS.length]);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n  };\n\n  Atlas.prototype.loadImage = function (url) {\n    return __awaiter(this, void 0, void 0, function () {\n      var that;\n      return __generator(this, function (_a) {\n        that = this;\n        return [2\n        /*return*/\n        , new Promise(function (resolve, reject) {\n          var img = new Image();\n          that._ready = false;\n\n          img.onload = function () {\n            var gl = that.gl,\n                params = that.params,\n                texture = that.texture;\n            var name = params.name;\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n            that._ready = true;\n            that._width = img.width;\n            that._height = img.height;\n            resolve(name);\n          };\n\n          img.onerror = function () {\n            console.error(\"Unable to load image \\\"\" + name + \"\\\": \", url);\n            reject(name);\n          };\n\n          img.src = url;\n        })];\n      });\n    });\n  };\n\n  return Atlas;\n}();\n\nexport default Atlas;","/**\n * Resolution in CSS pixels. If omitted, the real resolution\n * of the device is taken. On smartphones, for instance,\n * the resolution is often greater than 1.\n *\n * Return `true` if the size has changed.\n */\nexport default (function (gl, resolution) {\n  if (resolution === void 0) {\n    resolution = 0;\n  }\n\n  if (resolution <= 0) {\n    resolution = window.devicePixelRatio;\n  }\n\n  var canvas = gl.canvas;\n  var displayWidth = Math.floor(canvas.clientWidth * resolution);\n  var displayHeight = Math.floor(canvas.clientHeight * resolution); // Check if the canvas is not the same size.\n\n  if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\n    // Make the canvas the same size\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    gl.viewport(0, 0, displayWidth, displayHeight);\n    return true;\n  }\n\n  return false;\n});","var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport Atlas from './atlas';\nimport Resize from './webgl/resize';\n\nvar FlatLand =\n/** @class */\nfunction () {\n  function FlatLand(canvas) {\n    var _this = this;\n\n    this.activePainters = [];\n    this.isRendering = false;\n    this.resolution = 1;\n    this.onAnimation = null;\n\n    this.render = function (time) {\n      var e_1, _a;\n\n      if (_this.isRendering) window.requestAnimationFrame(_this.render);else return;\n      Resize(_this.gl, _this.resolution);\n\n      try {\n        try {\n          for (var _b = __values(_this.activePainters), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var painter = _c.value;\n            painter.render(time);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n\n        var onAnimation = _this.onAnimation;\n\n        if (typeof onAnimation === 'function') {\n          onAnimation(time);\n        }\n      } catch (ex) {\n        console.error(ex);\n\n        _this.stop();\n\n        console.error(\"###############################\");\n        console.error(\"# Rendering has been stopped! #\");\n        console.error(\"###############################\");\n      }\n    };\n\n    var gl = canvas.getContext(\"webgl\", {// Specify WebGL options.\n    });\n    if (!gl) throw \"Unable to create a WegGL context!\";\n    this.gl = gl;\n    this.atlases = new Map();\n    this.painters = new Map();\n  }\n\n  FlatLand.prototype.getAtlas = function (name) {\n    var atlases = this.atlases;\n    return atlases.get(name) || null;\n  };\n\n  FlatLand.prototype.createAtlas = function (params) {\n    var atlas = new Atlas(this.gl, params);\n    this.atlases.set(params.name, atlas);\n    return atlas;\n  };\n\n  FlatLand.prototype.destroyAtlas = function (name) {\n    var atlases = this.atlases;\n    var atlas = atlases.get(name);\n    if (!atlas) return false;\n    atlases.delete(name);\n    atlas.destroy();\n    return true;\n  };\n  /**\n   * If a painter with the same name already exists, return false and don't add the new one.\n   */\n\n\n  FlatLand.prototype.$attachPainter = function (painter) {\n    if (this.painters.has(painter.name)) return false;\n    this.painters.set(painter.name, painter);\n    this.activePainters = this.activePainters.filter(function (p) {\n      return p.name;\n    });\n    this.activePainters.push(painter);\n    return true;\n  };\n\n  FlatLand.prototype.$detachPainter = function (name) {\n    if (this.painters.has(name)) return false;\n    this.painters.delete(name);\n    this.activePainters = this.activePainters.filter(function (p) {\n      return p.name;\n    });\n    return true;\n  };\n\n  Object.defineProperty(FlatLand.prototype, \"width\", {\n    get: function get() {\n      return this.gl.drawingBufferWidth;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlatLand.prototype, \"height\", {\n    get: function get() {\n      return this.gl.drawingBufferHeight;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FlatLand.prototype.start = function () {\n    if (this.isRendering) return;\n    this.isRendering = true;\n    window.requestAnimationFrame(this.render);\n  };\n\n  FlatLand.prototype.stop = function () {\n    this.isRendering = false;\n  };\n\n  return FlatLand;\n}();\n\nexport default FlatLand;","import Painter from './painter';\nimport Scene from './scene';\nexport default {\n  Painter: Painter,\n  Scene: Scene\n};","import React from 'react';\nimport './App.css';\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n        <h1>Tutorials</h1>\n        <ul>\n            <li><a href=\"tuto-clear.html\">Hello world!</a></li>\n            <li><a href=\"tuto-background.html\">Salable background</a></li>\n        </ul>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\"\n\nimport \"./canvas.css\"\n\ninterface ICanvasProps {\n    init: (canvas: HTMLCanvasElement) => void\n}\n\nexport default class Canvas extends React.Component<ICanvasProps, {}> {\n    private readonly ref: React.RefObject<HTMLCanvasElement> = React.createRef();\n\n    componentDidMount() {\n        const canvas = this.ref.current\n        if (!canvas) return\n        this.props.init(canvas)\n    }\n\n    render() {\n        return (<canvas ref={this.ref} className=\"Canvas\"></canvas>)\n    }\n}\n","module.exports = __webpack_public_path__ + \"static/media/background.086dcaef.jpg\";","import React from \"react\"\nimport Markdown from 'markdown-to-jsx'\n\nimport \"./description.css\"\n\ninterface TDescriptionProps {\n    content: string\n}\ninterface TDescriptionState {}\n\nexport default class Description extends React.Component<TDescriptionProps, TDescriptionState> {\n    render() {\n        const classes = ['view-Description']\n\n        return (<div className={classes.join(' ')}>\n            <Markdown options={{ forceBlock: true }}>{this.props.content}</Markdown>\n        </div>)\n    }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport FlatLand from 'flat-land-gl'\n\nimport Canvas from '../../../canvas'\nimport Description from '../../../view/description'\nimport description from './background.md'\nimport background from './background.jpg'\nimport \"./background.css\"\n\n\nReactDOM.render(<div>\n    <Canvas init={init}/>\n    <Description content={description}/>\n</div>, document.getElementById('root'));\n\n\nfunction init(canvas: HTMLCanvasElement) {\n    const scene = new FlatLand.Scene(canvas)\n    scene.createAtlas({\n        name: \"background\",\n        image: background\n    })\n    new FlatLand.Painter.Background(\"background\", scene, {\n        atlasName: \"background\", align: \"BR\"\n    })\n    scene.start()\n}\n","export default \"Resize the browser to see how the background adapts.\\n\\n\\n```js\\nimport url from \\\"./background.jpg\\\"\\n\\nconst scene = new FlatLand.Scene(canvas)\\nscene.createAtlas({\\n    name: \\\"background\\\",\\n    image: url\\n})\\nnew FlatLand.Painter.Background(\\\"painter\\\", scene, {\\n    atlasName: \\\"background\\\",\\n    // (B)ottom (R)ight corner will be always visible.\\n    align: \\\"BR\\\"\\n})\\nscene.start()\\n```\\n\""],"sourceRoot":""}