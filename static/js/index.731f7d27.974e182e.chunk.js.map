{"version":3,"sources":["../../flat-land-gl/dist/flat-land-gl.js","canvas.tsx","App.tsx","serviceWorker.ts","index.tsx","view/description/description.tsx","view/description/index.ts","page/tutorial/clear/index.tsx","page/tutorial/clear/clear.md"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","this","v","op","TypeError","pop","length","push","Atlas","gl","_name","_ready","_width","_height","texture","createTexture","Error","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","configurable","destroy","deleteTexture","activate","unit","UNITS","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","activeTexture","Math","abs","load","params","_a","loadImage","image","url","that","img","Image","onload","texImage2D","RGBA","UNSIGNED_BYTE","width","height","onerror","console","error","src","COS","Float32Array","SIN","angle","PI","cos","sin","castString","defaultValue","isNaN","_calc__WEBPACK_IMPORTED_MODULE_0__","_painter__WEBPACK_IMPORTED_MODULE_1__","_scene__WEBPACK_IMPORTED_MODULE_2__","FlatLand","Calc","Painter","Scene","window","_converter_string__WEBPACK_IMPORTED_MODULE_0__","__extends","_extendStatics","b","setPrototypeOf","__proto__","Array","__","constructor","BackgroundPainter","_super","_this","scene","buff","deleteBuffer","initialize","atlas","atlasObj","getAtlas","fatal","prg","createProgram","frag","FRAG","vert","getVert","align","toUpperCase","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","render","enable","DEPTH_TEST","use","$uniTexture","setUniform","bindAttribs","drawArrays","TRIANGLE_STRIP","x","indexOf","_background__WEBPACK_IMPORTED_MODULE_0__","_webgl_color__WEBPACK_IMPORTED_MODULE_0__","_extendStatics2","ClearPainter","_red","_green","_blue","_alpha","color","set","R","G","B","A","stringify","cssColor","clearColor","clear","COLOR_BUFFER_BIT","_clear__WEBPACK_IMPORTED_MODULE_1__","_painter__WEBPACK_IMPORTED_MODULE_2__","_sprites__WEBPACK_IMPORTED_MODULE_3__","Background","Clear","Sprites","_webgl_program__WEBPACK_IMPORTED_MODULE_0__","__values","_programs","_scene","internalDestroy","e_1","_b","_c","deleteProgram","e_1_1","return","shaders","includes","message","_sprites__WEBPACK_IMPORTED_MODULE_0__","__assign","assign","arguments","Sprite","index","getData","extra","$index","z","originX","originY","u0","v0","u1","v1","scale","update","newParams","data","xxA","yyA","xxB","yyB","xxC","yyC","xxD","yyD","xA","yA","xB","yB","xC","yC","xD","yD","C","S","_painter__WEBPACK_IMPORTED_MODULE_0__","_sprite__WEBPACK_IMPORTED_MODULE_1__","_sprites_frag__WEBPACK_IMPORTED_MODULE_2__","_sprites_vert__WEBPACK_IMPORTED_MODULE_3__","_extendStatics3","BLOCK","CHUNK","NB_ATTRIBS","SpritesPainter","dataVert","sprites","count","capacity","buffElem","buffVert","DYNAMIC_DRAW","ELEMENT_ARRAY_BUFFER","createElements","createSprite","allocateNewBlock","sprite","removeSprite","splice","lastSprite","uniforms","$uniWidth","$uniHeight","drawElements","TRIANGLES","UNSIGNED_SHORT","dataElem","Uint16Array","a","k","Pointer","canvas","_x","_y","_down","_downTime","_eventDown","_eventUp","onMouseMove","evt","computeCoords","clientX","clientY","onTouchMove","te","touches","onMouseDown","onDown","onTouchStart","onMouseUp","onUp","onTouchEnd","addEventListener","reset","Date","now","pointerX","pointerY","rect","getBoundingClientRect","left","top","w","h","_atlas__WEBPACK_IMPORTED_MODULE_0__","_webgl_resize__WEBPACK_IMPORTED_MODULE_1__","_pointer__WEBPACK_IMPORTED_MODULE_2__","ID","resolution","onAnimation","activePainters","isRendering","_pointerTap","time","requestAnimationFrame","clearDepth","DEPTH_BUFFER_BIT","depthFunc","GEQUAL","pointer","ex","stop","_pointer","getContext","_gl","atlases","Map","drawingBufferWidth","drawingBufferHeight","painters","e_2","painters_1","painters_1_1","e_2_1","slice","getNewName","name_1","has","createAtlas","sanitizedName","destroyAtlas","delete","start","__read","ar","Color","codeCSS","H","L","parse","isValid","charAt","normalize","luminance","luminanceStep","fromArrayRGB","rgb","newRGB","fromArrayRGBA","rgba","newRGBA","mix","color1","color2","alpha","beta","ramp","colors","newBlack","spacesCount","firstColorIndex","floor","translatedAlpha","newWhite","red","green","blue","toArrayRGB","toArrayRGBA","code","input","trim","parseHexa","parseRGB","parseRGBA","parseHSL","hexa2","copy","newColor","hsl2rgb","chroma","shift","rgb2hsl","min","max","delta","INV6","text","parseInt","INV15","substr","INV255","RX_RGB","exec","clamp01","RX_RGBA","parseFloat","RX_HSL","INV359","INV99","out","toString","BPE","BYTES_PER_ELEMENT","Program","codes","parseInclude","parseIncludes","freeze","_typesNamesLookup","lookup","getTypesNamesLookup","shaderProgram","program","vertShader","getShader","VERTEX_SHADER","getVertexShader","attachShader","fragShader","FRAGMENT_SHADER","getFragmentShader","linkProgram","useProgram","attribs","createAttributes","createUniforms","getTypeName","typeId","buffer","names","_i","totalSize","names_1","names_1_1","attrib","keys","map","join","size","offset","names_2","names_2_1","name_2","enableVertexAttribArray","location","vertexAttribPointer","FLOAT","attribsCount","getProgramParameter","ACTIVE_ATTRIBUTES","item","getActiveAttrib","typeName","type","getSize","getAttribLocation","writable","FLOAT_VEC4","FLOAT_VEC3","FLOAT_VEC2","uniformsCount","ACTIVE_UNIFORMS","getActiveUniform","location_1","getUniformLocation","createUniformSetter","createUniformGetter","nameGL","nameJS","BYTE","SHORT","INT","UNSIGNED_INT","SAMPLER_2D","uniform1i","uniform1iv","uniform1f","uniform1fv","uniform2fv","uniform3fv","uniform4fv","FLOAT_MAT3","uniformMatrix3fv","FLOAT_MAT4","uniformMatrix4fv","split","line","pos","includeName","snippet","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","info","getShaderInfoLog","devicePixelRatio","displayWidth","clientWidth","displayHeight","clientHeight","viewport","Canvas","ref","React","createRef","current","props","init","className","Component","App","href","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","Description","options","forceBlock","content"],"mappings":"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","file":"static/js/index.731f7d27.974e182e.chunk.js","sourcesContent":["/******/\n(function (modules) {\n  // webpackBootstrap\n\n  /******/\n  // The module cache\n\n  /******/\n  var installedModules = {};\n  /******/\n\n  /******/\n  // The require function\n\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/\n\n    /******/\n    // Check if module is in cache\n\n    /******/\n    if (installedModules[moduleId]) {\n      /******/\n      return installedModules[moduleId].exports;\n      /******/\n    }\n    /******/\n    // Create a new module (and put it into the cache)\n\n    /******/\n\n\n    var module = installedModules[moduleId] = {\n      /******/\n      i: moduleId,\n\n      /******/\n      l: false,\n\n      /******/\n      exports: {}\n      /******/\n\n    };\n    /******/\n\n    /******/\n    // Execute the module function\n\n    /******/\n\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    /******/\n\n    /******/\n    // Flag the module as loaded\n\n    /******/\n\n    module.l = true;\n    /******/\n\n    /******/\n    // Return the exports of the module\n\n    /******/\n\n    return module.exports;\n    /******/\n  }\n  /******/\n\n  /******/\n\n  /******/\n  // expose the modules object (__webpack_modules__)\n\n  /******/\n\n\n  __webpack_require__.m = modules;\n  /******/\n\n  /******/\n  // expose the module cache\n\n  /******/\n\n  __webpack_require__.c = installedModules;\n  /******/\n\n  /******/\n  // define getter function for harmony exports\n\n  /******/\n\n  __webpack_require__.d = function (exports, name, getter) {\n    /******/\n    if (!__webpack_require__.o(exports, name)) {\n      /******/\n      Object.defineProperty(exports, name, {\n        enumerable: true,\n        get: getter\n      });\n      /******/\n    }\n    /******/\n\n  };\n  /******/\n\n  /******/\n  // define __esModule on exports\n\n  /******/\n\n\n  __webpack_require__.r = function (exports) {\n    /******/\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n      /******/\n      Object.defineProperty(exports, Symbol.toStringTag, {\n        value: 'Module'\n      });\n      /******/\n    }\n    /******/\n\n\n    Object.defineProperty(exports, '__esModule', {\n      value: true\n    });\n    /******/\n  };\n  /******/\n\n  /******/\n  // create a fake namespace object\n\n  /******/\n  // mode & 1: value is a module id, require it\n\n  /******/\n  // mode & 2: merge all properties of value into the ns\n\n  /******/\n  // mode & 4: return value when already ns object\n\n  /******/\n  // mode & 8|1: behave like require\n\n  /******/\n\n\n  __webpack_require__.t = function (value, mode) {\n    /******/\n    if (mode & 1) value = __webpack_require__(value);\n    /******/\n\n    if (mode & 8) return value;\n    /******/\n\n    if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n    /******/\n\n    var ns = Object.create(null);\n    /******/\n\n    __webpack_require__.r(ns);\n    /******/\n\n\n    Object.defineProperty(ns, 'default', {\n      enumerable: true,\n      value: value\n    });\n    /******/\n\n    if (mode & 2 && typeof value != 'string') for (var key in value) {\n      __webpack_require__.d(ns, key, function (key) {\n        return value[key];\n      }.bind(null, key));\n    }\n    /******/\n\n    return ns;\n    /******/\n  };\n  /******/\n\n  /******/\n  // getDefaultExport function for compatibility with non-harmony modules\n\n  /******/\n\n\n  __webpack_require__.n = function (module) {\n    /******/\n    var getter = module && module.__esModule ?\n    /******/\n    function getDefault() {\n      return module['default'];\n    } :\n    /******/\n    function getModuleExports() {\n      return module;\n    };\n    /******/\n\n    __webpack_require__.d(getter, 'a', getter);\n    /******/\n\n\n    return getter;\n    /******/\n  };\n  /******/\n\n  /******/\n  // Object.prototype.hasOwnProperty.call\n\n  /******/\n\n\n  __webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  };\n  /******/\n\n  /******/\n  // __webpack_public_path__\n\n  /******/\n\n\n  __webpack_require__.p = \"\";\n  /******/\n\n  /******/\n\n  /******/\n  // Load entry module and return exports\n\n  /******/\n\n  return __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n  /******/\n})(\n/************************************************************************/\n\n/******/\n{\n  /***/\n  \"./src/atlas.ts\":\n  /*!**********************!*\\\n    !*** ./src/atlas.ts ***!\n    \\**********************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcAtlasTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n\n    var __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n      function adopt(value) {\n        return value instanceof P ? value : new P(function (resolve) {\n          resolve(value);\n        });\n      }\n\n      return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) {\n          try {\n            step(generator.next(value));\n          } catch (e) {\n            reject(e);\n          }\n        }\n\n        function rejected(value) {\n          try {\n            step(generator[\"throw\"](value));\n          } catch (e) {\n            reject(e);\n          }\n        }\n\n        function step(result) {\n          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n      });\n    };\n\n    var __generator = undefined && undefined.__generator || function (thisArg, body) {\n      var _ = {\n        label: 0,\n        sent: function sent() {\n          if (t[0] & 1) throw t[1];\n          return t[1];\n        },\n        trys: [],\n        ops: []\n      },\n          f,\n          y,\n          t,\n          g;\n      return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n      }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n        return this;\n      }), g;\n\n      function verb(n) {\n        return function (v) {\n          return step([n, v]);\n        };\n      }\n\n      function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n\n        while (_) {\n          try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n\n            switch (op[0]) {\n              case 0:\n              case 1:\n                t = op;\n                break;\n\n              case 4:\n                _.label++;\n                return {\n                  value: op[1],\n                  done: false\n                };\n\n              case 5:\n                _.label++;\n                y = op[1];\n                op = [0];\n                continue;\n\n              case 7:\n                op = _.ops.pop();\n\n                _.trys.pop();\n\n                continue;\n\n              default:\n                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                  _ = 0;\n                  continue;\n                }\n\n                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                  _.label = op[1];\n                  break;\n                }\n\n                if (op[0] === 6 && _.label < t[1]) {\n                  _.label = t[1];\n                  t = op;\n                  break;\n                }\n\n                if (t && _.label < t[2]) {\n                  _.label = t[2];\n\n                  _.ops.push(op);\n\n                  break;\n                }\n\n                if (t[2]) _.ops.pop();\n\n                _.trys.pop();\n\n                continue;\n            }\n\n            op = body.call(thisArg, _);\n          } catch (e) {\n            op = [6, e];\n            y = 0;\n          } finally {\n            f = t = 0;\n          }\n        }\n\n        if (op[0] & 5) throw op[1];\n        return {\n          value: op[0] ? op[1] : void 0,\n          done: true\n        };\n      }\n    };\n\n    var Atlas =\n    /** @class */\n    function () {\n      function Atlas(gl, _name) {\n        this.gl = gl;\n        this._name = _name;\n        this._ready = false;\n        this._width = 0;\n        this._height = 0;\n        var texture = gl.createTexture();\n\n        if (!texture) {\n          throw new Error(\"Unable to create a new texture!\");\n        }\n\n        this.texture = texture;\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      }\n\n      Object.defineProperty(Atlas.prototype, \"name\", {\n        get: function get() {\n          return this._name;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Atlas.prototype, \"width\", {\n        get: function get() {\n          return this._width;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Atlas.prototype, \"height\", {\n        get: function get() {\n          return this._height;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Atlas.prototype, \"ready\", {\n        /**\n         * Return `true` as soon as an image has been loaded into the graphic card.\n         */\n        get: function get() {\n          return this._ready;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      /**\n       * Remove the texture from the graphic card memory.\n       */\n\n      Atlas.prototype.destroy = function () {\n        this._ready = false;\n\n        var _a = this,\n            gl = _a.gl,\n            texture = _a.texture;\n\n        gl.deleteTexture(texture);\n      };\n\n      Atlas.prototype.activate = function (unit) {\n        if (unit === void 0) {\n          unit = 0;\n        }\n\n        var _a = this,\n            gl = _a.gl,\n            texture = _a.texture;\n\n        var UNITS = [gl.TEXTURE0, gl.TEXTURE1, gl.TEXTURE2, gl.TEXTURE3, gl.TEXTURE4, gl.TEXTURE5, gl.TEXTURE6, gl.TEXTURE7];\n        gl.activeTexture(UNITS[Math.abs(unit) % UNITS.length]);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n      };\n\n      Atlas.prototype.load = function (params) {\n        return __awaiter(this, void 0, void 0, function () {\n          return __generator(this, function (_a) {\n            this._ready = false;\n            return [2\n            /*return*/\n            , this.loadImage(params.image)];\n          });\n        });\n      };\n\n      Atlas.prototype.loadImage = function (url) {\n        return __awaiter(this, void 0, void 0, function () {\n          var that;\n          return __generator(this, function (_a) {\n            that = this;\n            return [2\n            /*return*/\n            , new Promise(function (resolve, reject) {\n              var img = new Image();\n              that._ready = false;\n\n              img.onload = function () {\n                var gl = that.gl,\n                    texture = that.texture;\n                gl.bindTexture(gl.TEXTURE_2D, texture);\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n                that._ready = true;\n                that._width = img.width;\n                that._height = img.height;\n                resolve();\n              };\n\n              img.onerror = function () {\n                console.error(\"Unable to load image \\\"\" + name + \"\\\": \", url);\n                reject();\n              };\n\n              img.src = url;\n            })];\n          });\n        });\n      };\n\n      return Atlas;\n    }();\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = Atlas;\n    /***/\n  },\n\n  /***/\n  \"./src/calc.ts\":\n  /*!*********************!*\\\n    !*** ./src/calc.ts ***!\n    \\*********************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcCalcTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n\n    var COS = new Float32Array(4096);\n    var SIN = new Float32Array(4096); // Prepare acceleration table for COS and SIN.\n\n    for (var i = 0; i < 4096; i++) {\n      var angle = Math.PI * i / 2048;\n      COS[i] = Math.cos(angle);\n      SIN[i] = Math.sin(angle);\n    }\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = {\n      cos: cos,\n      sin: sin\n    };\n    /**\n     * Fast cosine.\n     * Angle is define between 0 and 4095.\n     * * PI/2  <=>  1023\n     * * PI  <=>  2047\n     * * 3*PI/2  <=>  3071\n     */\n\n    function cos(angle) {\n      return COS[(angle | 0) & 4095];\n    }\n    /**\n     * Fast sine.\n     * Angle is define between 0 and 4095.\n     * * PI/2  <=>  1023\n     * * PI  <=>  2047\n     * * 3*PI/2  <=>  3071\n     */\n\n\n    function sin(angle) {\n      return SIN[(angle | 0) & 4095];\n    }\n    /***/\n\n  },\n\n  /***/\n  \"./src/converter/string.ts\":\n  /*!*********************************!*\\\n    !*** ./src/converter/string.ts ***!\n    \\*********************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcConverterStringTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony export (binding) */\n\n\n    __webpack_require__.d(__webpack_exports__, \"default\", function () {\n      return castString;\n    });\n\n    function castString(value, defaultValue) {\n      if (defaultValue === void 0) {\n        defaultValue = \"\";\n      }\n\n      var t = typeof value;\n\n      if (t === \"number\" && !isNaN(value)) {\n        return \"\" + value;\n      }\n\n      if (t === \"string\") {\n        return value;\n      }\n\n      return defaultValue;\n    }\n    /***/\n\n  },\n\n  /***/\n  \"./src/index.ts\":\n  /*!**********************!*\\\n    !*** ./src/index.ts ***!\n    \\**********************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcIndexTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _calc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ./calc */\n    \"./src/calc.ts\");\n    /* harmony import */\n\n\n    var _painter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\n    /*! ./painter */\n    \"./src/painter/index.ts\");\n    /* harmony import */\n\n\n    var _scene__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\n    /*! ./scene */\n    \"./src/scene.ts\");\n\n    var FlatLand = {\n      Calc: _calc__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n      Painter: _painter__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n      Scene: _scene__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n    };\n    /* harmony default export */\n\n    __webpack_exports__[\"default\"] = FlatLand; // Global export for old vanilla Javascript users.\n\n    window[\"FlatLand\"] = FlatLand;\n    /***/\n  },\n\n  /***/\n  \"./src/painter/background/background.ts\":\n  /*!**********************************************!*\\\n    !*** ./src/painter/background/background.ts ***!\n    \\**********************************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterBackgroundBackgroundTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _converter_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ../../converter/string */\n    \"./src/converter/string.ts\");\n    /* harmony import */\n\n\n    var _painter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\n    /*! ../painter */\n    \"./src/painter/painter.ts\");\n    /**\n     * Background the screen by filling it with an image that covers it entirely.\n     */\n\n\n    var __extends = undefined && undefined.__extends || function () {\n      var _extendStatics = function extendStatics(d, b) {\n        _extendStatics = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (d, b) {\n          d.__proto__ = b;\n        } || function (d, b) {\n          for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n          }\n        };\n\n        return _extendStatics(d, b);\n      };\n\n      return function (d, b) {\n        _extendStatics(d, b);\n\n        function __() {\n          this.constructor = d;\n        }\n\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n      };\n    }();\n\n    var BackgroundPainter =\n    /** @class */\n    function (_super) {\n      __extends(BackgroundPainter, _super);\n      /**\n       * params: { atlas, align }\n       * - align: if undefined, the background will be centered.\n       *          \"R\" means that the Right edge of the background is always visible.\n       *          \"L\" means the same for Left.\n       *          \"T\" for Top.\n       *          \"B\" for \"Bottom\".\n       */\n\n\n      function BackgroundPainter(params) {\n        var _this = _super.call(this) || this;\n\n        _this.params = params;\n        return _this;\n      }\n\n      BackgroundPainter.prototype.destroy = function (scene) {\n        var gl = scene.gl;\n        var buff = this.buff;\n        gl.deleteBuffer(buff);\n      };\n\n      BackgroundPainter.prototype.initialize = function (scene) {\n        var params = this.params;\n        var atlas = params.atlas;\n        var atlasObj = scene.getAtlas(atlas);\n\n        if (!atlasObj) {\n          throw this.fatal(\"Atlas \\\"\" + atlas + \"\\\" not found!\");\n        }\n\n        this.atlas = atlasObj;\n        this.prg = this.createProgram({\n          frag: FRAG,\n          vert: getVert(Object(_converter_string__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(params.align).toUpperCase())\n        });\n        var gl = scene.gl;\n        var buff = gl.createBuffer();\n\n        if (!buff) {\n          throw this.fatal(\"Not enough memory to create an array buffer!\");\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\n        this.buff = buff;\n      };\n\n      BackgroundPainter.prototype.render = function () {\n        var _a = this,\n            scene = _a.scene,\n            prg = _a.prg,\n            atlas = _a.atlas,\n            buff = _a.buff;\n\n        if (!scene) return;\n        var gl = scene.gl;\n        gl.enable(gl.DEPTH_TEST);\n        prg.use();\n        atlas.activate();\n        var uniforms = prg;\n        uniforms.$uniTexture = 0;\n        prg.setUniform(\"uniAspectRatio\", scene.width / scene.height);\n        prg.bindAttribs(buff, \"attXY\");\n        gl.bindBuffer(gl.ARRAY_BUFFER, buff);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n      };\n\n      return BackgroundPainter;\n    }(_painter__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = BackgroundPainter;\n\n    function getVert(align) {\n      var x = \"\";\n      var y = \"\";\n\n      if (align.indexOf(\"B\") !== -1) {\n        y = \"location.y -= uniAspectRatio - 1.0;\";\n      } else if (align.indexOf(\"T\") !== -1) {\n        y = \"location.y += uniAspectRatio - 1.0;\";\n      }\n\n      if (align.indexOf(\"R\") !== -1) {\n        x = \"location.x -= 1.0 / uniAspectRatio - 1.0;\";\n      } else if (align.indexOf(\"L\") !== -1) {\n        x = \"location.x += 1.0 / uniAspectRatio - 1.0;\";\n      }\n\n      return \"uniform float uniAspectRatio;\\nattribute vec2 attXY;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  varUV = attXY;\\n  vec2 location = 2.0 * (attXY - vec2(0.5, 0.5));\\n\\n  if (uniAspectRatio > 1.0) {\\n    location.y *= uniAspectRatio;\" + y + \"\\n  } else {\\n    location.x /= uniAspectRatio;\" + x + \"\\n  }\\n\\n  gl_Position = vec4(location.x, -location.y, -1.0, 1.0);\\n}\";\n    }\n\n    var FRAG = \"precision mediump float;\\nuniform sampler2D uniTexture;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  vec4 color = texture2D( uniTexture, varUV );\\n  gl_FragColor = color;\\n}\";\n    /***/\n  },\n\n  /***/\n  \"./src/painter/background/index.ts\":\n  /*!*****************************************!*\\\n    !*** ./src/painter/background/index.ts ***!\n    \\*****************************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterBackgroundIndexTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _background__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ./background */\n    \"./src/painter/background/background.ts\");\n    /* harmony reexport (safe) */\n\n\n    __webpack_require__.d(__webpack_exports__, \"default\", function () {\n      return _background__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n    });\n    /***/\n\n  },\n\n  /***/\n  \"./src/painter/clear.ts\":\n  /*!******************************!*\\\n    !*** ./src/painter/clear.ts ***!\n    \\******************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterClearTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _webgl_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ../webgl/color */\n    \"./src/webgl/color.ts\");\n    /* harmony import */\n\n\n    var _painter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\n    /*! ./painter */\n    \"./src/painter/painter.ts\");\n\n    var __extends = undefined && undefined.__extends || function () {\n      var _extendStatics2 = function extendStatics(d, b) {\n        _extendStatics2 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (d, b) {\n          d.__proto__ = b;\n        } || function (d, b) {\n          for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n          }\n        };\n\n        return _extendStatics2(d, b);\n      };\n\n      return function (d, b) {\n        _extendStatics2(d, b);\n\n        function __() {\n          this.constructor = d;\n        }\n\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n      };\n    }();\n    /**\n     * Clear the screen by filling it with a plain color.\n     * This color is defined by attributes red, gree, blue and alpha, which must be between 0 and 1.\n     */\n\n\n    var ClearPainter =\n    /** @class */\n    function (_super) {\n      __extends(ClearPainter, _super);\n\n      function ClearPainter(params) {\n        var _this = _super.call(this) || this;\n\n        _this.params = params;\n        _this._red = 0.8;\n        _this._green = 0.4;\n        _this._blue = 0.2;\n        _this._alpha = 1;\n        return _this;\n      }\n\n      ClearPainter.prototype.initialize = function () {\n        if (this.params) {\n          this.color = this.params.color || \"#d72\";\n        }\n      };\n\n      ClearPainter.prototype.destroy = function () {};\n\n      Object.defineProperty(ClearPainter.prototype, \"red\", {\n        get: function get() {\n          return this._red;\n        },\n        set: function set(v) {\n          this._red = v;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(ClearPainter.prototype, \"green\", {\n        get: function get() {\n          return this._green;\n        },\n        set: function set(v) {\n          this._green = v;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(ClearPainter.prototype, \"blue\", {\n        get: function get() {\n          return this._blue;\n        },\n        set: function set(v) {\n          this._blue = v;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(ClearPainter.prototype, \"alpha\", {\n        get: function get() {\n          return this._alpha;\n        },\n        set: function set(v) {\n          this._alpha = v;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(ClearPainter.prototype, \"color\", {\n        get: function get() {\n          var color = new _webgl_color__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n          color.R = this._red;\n          color.G = this._green;\n          color.B = this._blue;\n          color.A = this._alpha;\n          return color.stringify();\n        },\n        set: function set(cssColor) {\n          var color = new _webgl_color__WEBPACK_IMPORTED_MODULE_0__[\"default\"](cssColor);\n          this._red = color.R;\n          this._green = color.G;\n          this._blue = color.B;\n          this._alpha = color.A;\n        },\n        enumerable: true,\n        configurable: true\n      });\n\n      ClearPainter.prototype.render = function () {\n        var scene = this.scene;\n        if (!scene) return;\n        var gl = scene.gl;\n        gl.clearColor(this._red, this._green, this._blue, this._alpha);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      };\n\n      return ClearPainter;\n    }(_painter__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = ClearPainter;\n    /***/\n  },\n\n  /***/\n  \"./src/painter/index.ts\":\n  /*!******************************!*\\\n    !*** ./src/painter/index.ts ***!\n    \\******************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterIndexTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _background__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ./background */\n    \"./src/painter/background/index.ts\");\n    /* harmony import */\n\n\n    var _clear__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\n    /*! ./clear */\n    \"./src/painter/clear.ts\");\n    /* harmony import */\n\n\n    var _painter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\n    /*! ./painter */\n    \"./src/painter/painter.ts\");\n    /* harmony import */\n\n\n    var _sprites__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\n    /*! ./sprites */\n    \"./src/painter/sprites/index.ts\");\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = {\n      Background: _background__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n      Clear: _clear__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n      Painter: _painter__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n      Sprites: _sprites__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    };\n    /***/\n  },\n\n  /***/\n  \"./src/painter/painter.ts\":\n  /*!********************************!*\\\n    !*** ./src/painter/painter.ts ***!\n    \\********************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterPainterTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _webgl_program__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ../webgl/program */\n    \"./src/webgl/program.ts\");\n\n    var __values = undefined && undefined.__values || function (o) {\n      var s = typeof Symbol === \"function\" && Symbol.iterator,\n          m = s && o[s],\n          i = 0;\n      if (m) return m.call(o);\n      if (o && typeof o.length === \"number\") return {\n        next: function next() {\n          if (o && i >= o.length) o = void 0;\n          return {\n            value: o && o[i++],\n            done: !o\n          };\n        }\n      };\n      throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n    };\n\n    var Painter =\n    /** @class */\n    function () {\n      function Painter() {\n        this._programs = [];\n        this._scene = null;\n      }\n\n      Object.defineProperty(Painter.prototype, \"scene\", {\n        get: function get() {\n          return this._scene;\n        },\n        set: function set(scene) {\n          if (scene === this._scene) return;\n\n          if (this._scene) {\n            this.internalDestroy(this._scene);\n          }\n\n          this._scene = scene;\n\n          if (scene) {\n            this.initialize(scene);\n          }\n        },\n        enumerable: true,\n        configurable: true\n      });\n\n      Painter.prototype.internalDestroy = function (scene) {\n        var e_1, _a;\n\n        var gl = scene.gl;\n\n        try {\n          for (var _b = __values(this._programs), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var prg = _c.value;\n            gl.deleteProgram(prg);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      };\n\n      Painter.prototype.createProgram = function (shaders, includes) {\n        if (includes === void 0) {\n          includes = {};\n        }\n\n        var scene = this._scene;\n\n        if (!scene) {\n          throw Error(\"This painter has no scene!\\ncreateProfram() should only be called from initialize().\");\n        }\n\n        var prg = new _webgl_program__WEBPACK_IMPORTED_MODULE_0__[\"default\"](scene.gl, shaders, includes);\n\n        this._programs.push(prg);\n\n        return prg;\n      };\n\n      Painter.prototype.fatal = function (message) {\n        console.error(\"Fatal error in Painter:\", message);\n        return new Error(message);\n      };\n\n      return Painter;\n    }();\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = Painter;\n    /***/\n  },\n\n  /***/\n  \"./src/painter/sprites/index.ts\":\n  /*!**************************************!*\\\n    !*** ./src/painter/sprites/index.ts ***!\n    \\**************************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterSpritesIndexTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _sprites__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ./sprites */\n    \"./src/painter/sprites/sprites.ts\");\n    /* harmony reexport (safe) */\n\n\n    __webpack_require__.d(__webpack_exports__, \"default\", function () {\n      return _sprites__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n    });\n    /***/\n\n  },\n\n  /***/\n  \"./src/painter/sprites/sprite.ts\":\n  /*!***************************************!*\\\n    !*** ./src/painter/sprites/sprite.ts ***!\n    \\***************************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterSpritesSpriteTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _calc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ../../calc */\n    \"./src/calc.ts\");\n\n    var __assign = undefined && undefined.__assign || function () {\n      __assign = Object.assign || function (t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n\n          for (var p in s) {\n            if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n          }\n        }\n\n        return t;\n      };\n\n      return __assign.apply(this, arguments);\n    };\n\n    var Sprite =\n    /** @class */\n    function () {\n      function Sprite(index, getData, params) {\n        this.getData = getData;\n        this.extra = {};\n        this.$index = 0;\n        this.$index = index;\n        var width = params.width || 50;\n        var height = params.height || 50;\n        this.params = __assign({\n          x: 0,\n          y: 0,\n          z: 0,\n          width: width,\n          height: height,\n          originX: width / 2,\n          originY: height / 2,\n          u0: 0,\n          v0: 0,\n          u1: 1,\n          v1: 1,\n          scale: 1,\n          angle: 0\n        }, params);\n        this.update(this.params);\n      }\n\n      Object.defineProperty(Sprite.prototype, \"x\", {\n        get: function get() {\n          return this.params.x;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"y\", {\n        get: function get() {\n          return this.params.y;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"z\", {\n        get: function get() {\n          return this.params.z;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"width\", {\n        get: function get() {\n          return this.params.width;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"height\", {\n        get: function get() {\n          return this.params.height;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"originX\", {\n        get: function get() {\n          return this.params.originX;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"originY\", {\n        get: function get() {\n          return this.params.originY;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"u0\", {\n        get: function get() {\n          return this.params.u0;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"v0\", {\n        get: function get() {\n          return this.params.v0;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"u1\", {\n        get: function get() {\n          return this.params.u1;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Sprite.prototype, \"v1\", {\n        get: function get() {\n          return this.params.v1;\n        },\n        enumerable: true,\n        configurable: true\n      });\n\n      Sprite.prototype.update = function (newParams) {\n        this.params = __assign(__assign({}, this.params), newParams);\n\n        var _a = this,\n            getData = _a.getData,\n            $index = _a.$index,\n            params = _a.params;\n\n        var data = getData();\n        var x = params.x,\n            y = params.y,\n            z = params.z,\n            originX = params.originX,\n            originY = params.originY,\n            width = params.width,\n            height = params.height,\n            u0 = params.u0,\n            v0 = params.v0,\n            u1 = params.u1,\n            v1 = params.v1,\n            scale = params.scale,\n            angle = params.angle;\n        var xxA = -originX;\n        var yyA = -originY;\n        var xxB = xxA + width;\n        var yyB = yyA;\n        var xxC = xxA + width;\n        var yyC = yyA + height;\n        var xxD = xxA;\n        var yyD = yyA + height;\n        var xA = xxA * scale;\n        var yA = yyA * scale;\n        var xB = xxB * scale;\n        var yB = yyB * scale;\n        var xC = xxC * scale;\n        var yC = yyC * scale;\n        var xD = xxD * scale;\n        var yD = yyD * scale;\n\n        if ((angle | 0) !== 0) {\n          var C = _calc__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cos(angle);\n\n          var S = _calc__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sin(angle);\n\n          xA = (xxA * C + yyA * S) * scale;\n          yA = (yyA * C - xxA * S) * scale;\n          xB = (xxB * C + yyB * S) * scale;\n          yB = (yyB * C - xxB * S) * scale;\n          xC = (xxC * C + yyC * S) * scale;\n          yC = (yyC * C - xxC * S) * scale;\n          xD = (xxD * C + yyD * S) * scale;\n          yD = (yyD * C - xxD * S) * scale;\n        }\n\n        data[$index + 0] = xA + x;\n        data[$index + 1] = yA + y;\n        data[$index + 2] = z;\n        data[$index + 3] = u0;\n        data[$index + 4] = v0;\n        data[$index + 5] = xB + x;\n        data[$index + 6] = yB + y;\n        data[$index + 7] = z;\n        data[$index + 8] = u1;\n        data[$index + 9] = v0;\n        data[$index + 10] = xC + x;\n        data[$index + 11] = yC + y;\n        data[$index + 12] = z;\n        data[$index + 13] = u1;\n        data[$index + 14] = v1;\n        data[$index + 15] = xD + x;\n        data[$index + 16] = yD + y;\n        data[$index + 17] = z;\n        data[$index + 18] = u0;\n        data[$index + 19] = v1;\n      };\n\n      return Sprite;\n    }();\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = Sprite;\n    /***/\n  },\n\n  /***/\n  \"./src/painter/sprites/sprites.frag\":\n  /*!******************************************!*\\\n    !*** ./src/painter/sprites/sprites.frag ***!\n    \\******************************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterSpritesSpritesFrag(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = \"precision mediump float;\\nuniform sampler2D uniTexture;\\nvarying vec2 varUV;\\n\\nvoid main() {\\n  vec4 color = texture2D( uniTexture, varUV );\\n  if (color.a < 1.0) discard;\\n  gl_FragColor = color;\\n}\\n\";\n    /***/\n  },\n\n  /***/\n  \"./src/painter/sprites/sprites.ts\":\n  /*!****************************************!*\\\n    !*** ./src/painter/sprites/sprites.ts ***!\n    \\****************************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterSpritesSpritesTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _painter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ../painter */\n    \"./src/painter/painter.ts\");\n    /* harmony import */\n\n\n    var _sprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\n    /*! ./sprite */\n    \"./src/painter/sprites/sprite.ts\");\n    /* harmony import */\n\n\n    var _sprites_frag__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\n    /*! ./sprites.frag */\n    \"./src/painter/sprites/sprites.frag\");\n    /* harmony import */\n\n\n    var _sprites_vert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\n    /*! ./sprites.vert */\n    \"./src/painter/sprites/sprites.vert\");\n\n    var __extends = undefined && undefined.__extends || function () {\n      var _extendStatics3 = function extendStatics(d, b) {\n        _extendStatics3 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (d, b) {\n          d.__proto__ = b;\n        } || function (d, b) {\n          for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n          }\n        };\n\n        return _extendStatics3(d, b);\n      };\n\n      return function (d, b) {\n        _extendStatics3(d, b);\n\n        function __() {\n          this.constructor = d;\n        }\n\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n      };\n    }();\n\n    var __assign = undefined && undefined.__assign || function () {\n      __assign = Object.assign || function (t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n\n          for (var p in s) {\n            if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n          }\n        }\n\n        return t;\n      };\n\n      return __assign.apply(this, arguments);\n    }; // Allocations will be done by pieces of BLOCK Sprites.\n\n\n    var BLOCK = 64;\n    var NB_ATTRIBS = 6; // attXYZ and attUV and attAngle.\n\n    var NB_CORNERS = 4;\n    var CHUNK = NB_ATTRIBS * NB_CORNERS;\n\n    var SpritesPainter =\n    /** @class */\n    function (_super) {\n      __extends(SpritesPainter, _super);\n\n      function SpritesPainter(params) {\n        var _this = _super.call(this) || this;\n\n        _this.params = params;\n        _this.dataVert = new Float32Array(BLOCK * CHUNK);\n        _this.sprites = [];\n        _this.count = 0;\n        _this.capacity = BLOCK;\n        /**\n         * Since the vertex array can be reallocated, we cannot give a reference to the\n         * Float32Array to any Sprite. Instead, we will give them this function that will\n         * return the current array.\n         */\n\n        _this.getData = function () {\n          return _this.dataVert;\n        };\n\n        return _this;\n      }\n\n      SpritesPainter.prototype.destroy = function (scene) {\n        var gl = scene.gl;\n\n        var _a = this,\n            buffElem = _a.buffElem,\n            buffVert = _a.buffVert;\n\n        gl.deleteBuffer(buffElem);\n        gl.deleteBuffer(buffVert);\n      };\n\n      SpritesPainter.prototype.initialize = function (scene) {\n        var atlas = this.params.atlas;\n        this.atlas = atlas;\n        this.prg = this.createProgram({\n          vert: _sprites_vert__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n          frag: _sprites_frag__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n        });\n        var gl = scene.gl;\n        var buffVert = gl.createBuffer();\n\n        if (!buffVert) {\n          throw this.fatal(\"Not enough memory to create an array buffer!\");\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n        gl.bufferData(gl.ARRAY_BUFFER, this.dataVert, gl.DYNAMIC_DRAW);\n        this.buffVert = buffVert;\n        var buffElem = gl.createBuffer();\n\n        if (!buffElem) {\n          throw this.fatal(\"Not enough memory to create an array buffer!\");\n        }\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, createElements(BLOCK), gl.DYNAMIC_DRAW);\n        this.buffElem = buffElem;\n      };\n\n      SpritesPainter.prototype.createSprite = function (params) {\n        var index = this.count * CHUNK;\n        this.count++;\n\n        if (this.count >= this.capacity) {\n          // Allocate a new block.\n          this.allocateNewBlock();\n        }\n\n        var _a = this.atlas,\n            width = _a.width,\n            height = _a.height;\n        var sprite = new _sprite__WEBPACK_IMPORTED_MODULE_1__[\"default\"](index, this.getData, __assign({\n          width: width,\n          height: height\n        }, params));\n        this.sprites.push(sprite);\n        return sprite;\n      };\n      /**\n       * Remove a sprite from the list of sprites to render.\n       */\n\n\n      SpritesPainter.prototype.removeSprite = function (sprite) {\n        if (sprite.$index < 0) return;\n        var sprites = this.sprites;\n\n        if (sprites.length === 0) {\n          sprite.$index = -1;\n          return;\n        }\n\n        if (sprites.length === 1) {\n          sprite.$index = -1;\n          sprites.splice(0, sprites.length);\n          this.count = 0;\n          return;\n        }\n\n        var lastSprite = sprites.pop();\n        if (!lastSprite) return;\n        lastSprite.$index = sprite.$index;\n        lastSprite.update({});\n        this.count--;\n        sprite.$index = -1;\n      };\n\n      SpritesPainter.prototype.render = function () {\n        var _a = this,\n            scene = _a.scene,\n            prg = _a.prg,\n            atlas = _a.atlas,\n            buffVert = _a.buffVert,\n            buffElem = _a.buffElem;\n\n        if (!scene) return;\n        var gl = scene.gl; // Update sprites' attributes.\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n        gl.bufferData(gl.ARRAY_BUFFER, this.dataVert, gl.DYNAMIC_DRAW);\n        gl.enable(gl.DEPTH_TEST);\n        prg.use();\n        atlas.activate();\n        var uniforms = prg;\n        uniforms.$uniTexture = 0;\n        uniforms.$uniWidth = scene.width;\n        uniforms.$uniHeight = scene.height;\n        prg.bindAttribs(buffVert, \"attXYZ\", \"attUV\");\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffVert);\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n        gl.drawElements(gl.TRIANGLES, 6 * this.count, gl.UNSIGNED_SHORT, 0);\n      };\n\n      SpritesPainter.prototype.allocateNewBlock = function () {\n        this.capacity += BLOCK;\n        var scene = this.scene;\n\n        if (!scene) {\n          throw Error(\"No scene!\");\n        }\n\n        var gl = scene.gl;\n        var buffElem = this.buffElem;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffElem);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, createElements(this.capacity), gl.DYNAMIC_DRAW);\n        var dataVert = new Float32Array(this.capacity * CHUNK);\n        dataVert.set(this.dataVert);\n        this.dataVert = dataVert;\n      };\n\n      return SpritesPainter;\n    }(_painter__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = SpritesPainter;\n    /**\n     * A--B\n     * |  |\n     * D--C\n     */\n\n    function createElements(capacity) {\n      var dataElem = new Uint16Array(6 * capacity);\n      var i = 0;\n      var a = 0;\n\n      for (var k = 0; k < capacity; k++) {\n        var b = a + 1;\n        var c = a + 2;\n        var d = a + 3;\n        dataElem[i + 0] = a;\n        dataElem[i + 1] = d;\n        dataElem[i + 2] = b;\n        dataElem[i + 3] = b;\n        dataElem[i + 4] = d;\n        dataElem[i + 5] = c;\n        a += 4;\n        i += 6;\n      }\n\n      return dataElem;\n    }\n    /***/\n\n  },\n\n  /***/\n  \"./src/painter/sprites/sprites.vert\":\n  /*!******************************************!*\\\n    !*** ./src/painter/sprites/sprites.vert ***!\n    \\******************************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPainterSpritesSpritesVert(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = \"uniform float uniWidth;\\nuniform float uniHeight;\\nattribute vec3 attXYZ;\\nattribute vec2 attUV;\\nvarying vec2 varUV;\\n\\nconst float RESOLUTION = 512.0;\\nconst float INV_RESOLUTION = 1.0 / RESOLUTION;\\n\\nvoid main() {\\n  varUV = attUV;\\n  float widestSide = max(uniWidth, uniHeight);\\n  float w = widestSide / uniWidth;\\n  float h = widestSide / uniHeight;\\n  float x = w * (attXYZ.x - RESOLUTION) * INV_RESOLUTION;\\n  float y = h * (attXYZ.y - RESOLUTION) * INV_RESOLUTION;\\n\\n  gl_Position = vec4(x, -y, attXYZ.z, 1.0);\\n}\\n\";\n    /***/\n  },\n\n  /***/\n  \"./src/pointer.ts\":\n  /*!************************!*\\\n    !*** ./src/pointer.ts ***!\n    \\************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcPointerTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n\n    var Pointer =\n    /** @class */\n    function () {\n      /** @hidden */\n      function Pointer(canvas) {\n        var _this = this;\n\n        this.canvas = canvas;\n        this._x = 0;\n        this._y = 0;\n        this._down = false; // If 0, pointer is up.\n\n        this._downTime = 0;\n        this._eventDown = false;\n        this._eventUp = false;\n\n        this.onMouseMove = function (evt) {\n          _this.computeCoords(evt.clientX, evt.clientY);\n        };\n\n        this.onTouchMove = function (te) {\n          var evt = te.touches[0];\n\n          _this.computeCoords(evt.clientX, evt.clientY);\n        };\n\n        this.onMouseDown = function (evt) {\n          _this.onDown(evt.clientX, evt.clientY);\n        };\n\n        this.onTouchStart = function (te) {\n          var evt = te.touches[0];\n\n          _this.onDown(evt.clientX, evt.clientY);\n        };\n\n        this.onMouseUp = function (evt) {\n          _this.onUp(evt.clientX, evt.clientY);\n        };\n\n        this.onTouchEnd = function (te) {\n          var evt = te.touches[0];\n\n          _this.onUp(evt.clientX, evt.clientY);\n        };\n\n        window.addEventListener(\"mousemove\", this.onMouseMove, true);\n        window.addEventListener(\"touchmove\", this.onTouchMove, true);\n        window.addEventListener(\"mousedown\", this.onMouseDown, true);\n        window.addEventListener(\"touchstart\", this.onTouchStart, true);\n        window.addEventListener(\"mouseup\", this.onMouseUp, true);\n        window.addEventListener(\"touchend\", this.onTouchEnd, true);\n      }\n      /** @hidden */\n\n\n      Pointer.prototype.reset = function () {\n        this._eventDown = false;\n        this._eventUp = false;\n      };\n\n      Object.defineProperty(Pointer.prototype, \"x\", {\n        get: function get() {\n          return this._x;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Pointer.prototype, \"y\", {\n        get: function get() {\n          return this._y;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Pointer.prototype, \"down\", {\n        /** Test if the pointer is touching the screen. */\n        get: function get() {\n          return this._down;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Pointer.prototype, \"eventUp\", {\n        /** `true` only if the pointer started touching the screen this very last frame. */\n        get: function get() {\n          return this._eventUp;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(Pointer.prototype, \"eventDown\", {\n        /** `true` only if the pointer stopped touching the screen this very last frame. */\n        get: function get() {\n          return this._eventDown;\n        },\n        enumerable: true,\n        configurable: true\n      });\n\n      Pointer.prototype.onDown = function (x, y) {\n        if (this._downTime !== 0) return;\n        this.computeCoords(x, y);\n        this._down = true;\n        this._eventDown = true;\n        this._downTime = Date.now();\n      };\n\n      Pointer.prototype.onUp = function (x, y) {\n        if (this._downTime === 0) return;\n        this.computeCoords(x, y);\n        this._down = false;\n        this._eventUp = true;\n        this._downTime = 0;\n      };\n\n      Pointer.prototype.computeCoords = function (pointerX, pointerY) {\n        var canvas = this.canvas;\n        var rect = canvas.getBoundingClientRect();\n        var x = pointerX - rect.left;\n        var y = pointerY - rect.top;\n        var w = rect.width;\n        var h = rect.height;\n\n        if (w > h) {\n          this._x = 1024 * x / w;\n          this._y = 1024 * (0.5 * (1 - h / w) + y / w);\n        } else {\n          this._x = 1024 * (0.5 * (1 - w / h) + x / h);\n          this._y = 1024 * y / h;\n        }\n      };\n\n      return Pointer;\n    }();\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = Pointer;\n    /***/\n  },\n\n  /***/\n  \"./src/scene.ts\":\n  /*!**********************!*\\\n    !*** ./src/scene.ts ***!\n    \\**********************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcSceneTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /* harmony import */\n\n\n    var _atlas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\n    /*! ./atlas */\n    \"./src/atlas.ts\");\n    /* harmony import */\n\n\n    var _webgl_resize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\n    /*! ./webgl/resize */\n    \"./src/webgl/resize.ts\");\n    /* harmony import */\n\n\n    var _pointer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\n    /*! ./pointer */\n    \"./src/pointer.ts\");\n\n    var __values = undefined && undefined.__values || function (o) {\n      var s = typeof Symbol === \"function\" && Symbol.iterator,\n          m = s && o[s],\n          i = 0;\n      if (m) return m.call(o);\n      if (o && typeof o.length === \"number\") return {\n        next: function next() {\n          if (o && i >= o.length) o = void 0;\n          return {\n            value: o && o[i++],\n            done: !o\n          };\n        }\n      };\n      throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n    };\n\n    var ID = 1;\n\n    var FlatLand =\n    /** @class */\n    function () {\n      function FlatLand(canvas) {\n        var _this = this;\n\n        this.resolution = 1;\n        this.onAnimation = null;\n        this.activePainters = [];\n        this.isRendering = false;\n        this._pointerTap = false;\n\n        this.render = function (time) {\n          var e_1, _a;\n\n          if (_this.isRendering) {\n            window.requestAnimationFrame(_this.render);\n          } else {\n            return;\n          }\n\n          var gl = _this.gl;\n          Object(_webgl_resize__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(gl, _this.resolution);\n          gl.clearDepth(-1);\n          gl.clear(gl.DEPTH_BUFFER_BIT);\n          gl.depthFunc(gl.GEQUAL);\n\n          try {\n            try {\n              for (var _b = __values(_this.activePainters), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var painter = _c.value;\n                painter.render(time);\n              }\n            } catch (e_1_1) {\n              e_1 = {\n                error: e_1_1\n              };\n            } finally {\n              try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n              } finally {\n                if (e_1) throw e_1.error;\n              }\n            }\n\n            var onAnimation = _this.onAnimation;\n\n            if (typeof onAnimation === \"function\") {\n              onAnimation(time);\n\n              _this.pointer.reset();\n            }\n          } catch (ex) {\n            console.error(ex);\n\n            _this.stop();\n\n            console.error(\"###############################\");\n            console.error(\"# Rendering has been stopped! #\");\n            console.error(\"###############################\");\n          }\n        };\n\n        this._pointer = new _pointer__WEBPACK_IMPORTED_MODULE_2__[\"default\"](canvas);\n        var gl = canvas.getContext(\"webgl\", {// Specify WebGL options.\n        });\n\n        if (!gl) {\n          throw new Error(\"Unable to create a WegGL context!\");\n        }\n\n        this._gl = gl;\n        this.atlases = new Map();\n      }\n\n      Object.defineProperty(FlatLand.prototype, \"gl\", {\n        get: function get() {\n          return this._gl;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(FlatLand.prototype, \"pointer\", {\n        /**\n         * Retreive information about pointer (mouse, pen, finger, ...) state.\n         */\n        get: function get() {\n          return this._pointer;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(FlatLand.prototype, \"width\", {\n        /**\n         * Visible width. Between 0 and 1024.\n         */\n        get: function get() {\n          return this.gl.drawingBufferWidth;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(FlatLand.prototype, \"height\", {\n        /**\n         * Visible height. Between 0 and 1024.\n         */\n        get: function get() {\n          return this.gl.drawingBufferHeight;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      Object.defineProperty(FlatLand.prototype, \"pointerTap\", {\n        get: function get() {\n          return this._pointerTap;\n        },\n        enumerable: true,\n        configurable: true\n      });\n      /**\n       * Define which painter to use and in what order.\n       * For better performance, prefer putting background painters at the end of the list.\n       */\n\n      FlatLand.prototype.use = function (painters) {\n        var e_2, _a;\n\n        try {\n          for (var painters_1 = __values(painters), painters_1_1 = painters_1.next(); !painters_1_1.done; painters_1_1 = painters_1.next()) {\n            var painter = painters_1_1.value;\n            painter.scene = this;\n          }\n        } catch (e_2_1) {\n          e_2 = {\n            error: e_2_1\n          };\n        } finally {\n          try {\n            if (painters_1_1 && !painters_1_1.done && (_a = painters_1.return)) _a.call(painters_1);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n\n        this.activePainters = painters.slice();\n      };\n\n      FlatLand.prototype.getAtlas = function (name) {\n        var atlases = this.atlases;\n        return atlases.get(name) || null;\n      };\n\n      FlatLand.prototype.getNewName = function () {\n        while (true) {\n          var name_1 = \"atlas-\" + ID++;\n          if (!this.atlases.has(name_1)) return name_1;\n        }\n      };\n\n      FlatLand.prototype.createAtlas = function (params) {\n        var name = params.name;\n        var sanitizedName = name || this.getNewName();\n        var atlas = new _atlas__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.gl, sanitizedName);\n        this.atlases.set(sanitizedName, atlas);\n        atlas.load(params);\n        return atlas;\n      };\n\n      FlatLand.prototype.destroyAtlas = function (name) {\n        var atlases = this.atlases;\n        var atlas = atlases.get(name);\n\n        if (!atlas) {\n          return false;\n        }\n\n        atlases.delete(name);\n        atlas.destroy();\n        return true;\n      };\n      /**\n       * Start rendering.\n       * When a frame is rendered, the function `onAnimation( time: number )` is called.\n       */\n\n\n      FlatLand.prototype.start = function () {\n        if (this.isRendering) {\n          return;\n        }\n\n        this.isRendering = true;\n        window.requestAnimationFrame(this.render);\n      };\n      /**\n       * Stop rendering.\n       */\n\n\n      FlatLand.prototype.stop = function () {\n        this.isRendering = false;\n      };\n\n      return FlatLand;\n    }();\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = FlatLand;\n    /***/\n  },\n\n  /***/\n  \"./src/webgl/color.ts\":\n  /*!****************************!*\\\n    !*** ./src/webgl/color.ts ***!\n    \\****************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcWebglColorTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n\n    var __read = undefined && undefined.__read || function (o, n) {\n      var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n      if (!m) return o;\n      var i = m.call(o),\n          r,\n          ar = [],\n          e;\n\n      try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n          ar.push(r.value);\n        }\n      } catch (error) {\n        e = {\n          error: error\n        };\n      } finally {\n        try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally {\n          if (e) throw e.error;\n        }\n      }\n\n      return ar;\n    };\n    /**\n     * Fast color manipulations.\n     * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\n     * (saturation), and L (luminance) are all floats between 0 and 1.\n     */\n\n\n    var TOTO = \"useless\";\n\n    var Color =\n    /** @class */\n    function () {\n      function Color(codeCSS) {\n        if (codeCSS === void 0) {\n          codeCSS = \"#000000\";\n        }\n\n        this.R = 0;\n        this.G = 0;\n        this.B = 0;\n        this.H = 0;\n        this.S = 0;\n        this.L = 0;\n        this.A = 1;\n        this.parse(codeCSS);\n      }\n\n      Color.isValid = function (codeCSS) {\n        if (typeof codeCSS !== \"string\") {\n          return false;\n        }\n\n        if (codeCSS.charAt(0) !== \"#\") {\n          return false;\n        }\n\n        switch (codeCSS.length) {\n          case 4: // #RGB\n\n          case 5: // #RGBA\n\n          case 7: // #RRGGBB\n\n          case 9:\n            // #RRGGBBAA\n            return true;\n        }\n\n        return false;\n      };\n\n      Color.normalize = function (codeCSS) {\n        var color = new Color(codeCSS);\n        return color.stringify();\n      };\n\n      Color.luminance = function (codeCSS) {\n        var color = new Color(codeCSS);\n        return color.luminance();\n      };\n      /**\n       * Returns 1 for bright colors and 0 for dark colors.\n       */\n\n\n      Color.luminanceStep = function (codeCSS) {\n        var color = new Color(codeCSS);\n        return color.luminanceStep();\n      };\n\n      Color.fromArrayRGB = function (rgb) {\n        var _a = __read(rgb, 3),\n            R = _a[0],\n            G = _a[1],\n            B = _a[2];\n\n        return this.newRGB(R, G, B);\n      };\n\n      Color.fromArrayRGBA = function (rgba) {\n        var _a = __read(rgba, 4),\n            R = _a[0],\n            G = _a[1],\n            B = _a[2],\n            A = _a[3];\n\n        return this.newRGBA(R, G, B, A);\n      };\n      /**\n       * Mix two colors. alpha should be between 0 and 1,\n       * but there is no check on this.\n       * If alpha is 0, the resulting color is `color1`,\n       * if alpha is 1, the resulting color is `color2`.\n       */\n\n\n      Color.mix = function (color1, color2, alpha) {\n        if (alpha === void 0) {\n          alpha = .5;\n        }\n\n        var beta = 1 - alpha;\n        return Color.newRGBA(alpha * color2.R + beta * color1.R, alpha * color2.G + beta * color1.G, alpha * color2.B + beta * color1.B, alpha * color2.A + beta * color1.A);\n      };\n      /**\n       * If `colors` has only two elements, this method is the same as `mix()`.\n       * Otherwise, it will perform a linear blending through the colors.\n       * If alpha is 0, the resulting color is `colors[0]`,\n       * If alpha is 1, the resulting color is `colors[colors.length - 1]`,\n       */\n\n\n      Color.ramp = function (colors, alpha) {\n        if (alpha === void 0) {\n          alpha = .5;\n        }\n\n        if (colors.length === 0) {\n          return Color.newBlack();\n        }\n\n        if (colors.length === 1) {\n          return colors[0];\n        }\n\n        var spacesCount = colors.length - 1;\n        var firstColorIndex = Math.floor(alpha * spacesCount);\n        var color1 = colors[firstColorIndex];\n\n        if (firstColorIndex === spacesCount) {\n          return color1;\n        }\n\n        var color2 = colors[firstColorIndex + 1];\n        var translatedAlpha = firstColorIndex + alpha / spacesCount;\n        return Color.mix(color1, color2, translatedAlpha);\n      };\n\n      Color.newBlack = function () {\n        return Color.newRGB(0, 0, 0);\n      };\n\n      Color.newWhite = function () {\n        return Color.newRGB(1, 1, 1);\n      };\n      /**\n       * Create a new Color instance base on R,G,B channels.\n       *\n       * @param   {number} red - Value between 0 and 1.\n       * @param   {number} green - Value between 0 and 1.\n       * @param   {number} blue - Value between 0 and 1.\n       * @returns {Color} New instance of Color.\n       */\n\n\n      Color.newRGB = function (red, green, blue) {\n        var color = new Color();\n        color.R = red;\n        color.G = green;\n        color.B = blue;\n        color.A = 1;\n        return color;\n      };\n      /**\n       * Create a new Color instance base on R,G,B,A channels.\n       *\n       * @param   {number} red - Value between 0 and 1.\n       * @param   {number} green - Value between 0 and 1.\n       * @param   {number} blue - Value between 0 and 1.\n       * @param   {number} alpha - Value between 0 and 1.\n       * @returns {Color} New instance of Color.\n       */\n\n\n      Color.newRGBA = function (red, green, blue, alpha) {\n        var color = new Color();\n        color.R = red;\n        color.G = green;\n        color.B = blue;\n        color.A = alpha;\n        return color;\n      };\n\n      Color.prototype.toArrayRGB = function () {\n        return [this.R, this.G, this.B];\n      };\n\n      Color.prototype.toArrayRGBA = function () {\n        return [this.R, this.G, this.B, this.A];\n      };\n      /**\n       * Parse a color writtent in CSS syntax.\n       *\n       * @param   {string} code - CSS color.\n       * @returns {boolean} `true` if the color has valid syntax.\n       */\n\n\n      Color.prototype.parse = function (code) {\n        if (code === void 0) {\n          code = \"#000000\";\n        }\n\n        var input = code.trim().toUpperCase();\n\n        if (this.parseHexa.call(this, input)) {\n          return true;\n        }\n\n        if (this.parseRGB.call(this, input)) {\n          return true;\n        }\n\n        if (this.parseRGBA.call(this, input)) {\n          return true;\n        }\n\n        if (this.parseHSL.call(this, input)) {\n          return true;\n        } // @TODO parseHSLA.\n\n\n        return false;\n      };\n      /**\n       * @see https://en.wikipedia.org/wiki/Grayscale\n       * @this Color\n       * @returns {undefined}\n       */\n\n\n      Color.prototype.luminance = function () {\n        return 0.2126 * this.R + 0.7152 * this.G + 0.0722 * this.B;\n      };\n      /**\n       * @returns {integer} 0 if the color is dark and 1 if it is light.\n       */\n\n\n      Color.prototype.luminanceStep = function () {\n        return this.luminance() < .6 ? 0 : 1;\n      };\n      /**\n       * @this Color\n       * @returns {string} String value of the color. `#fd45a7`.\n       */\n\n\n      Color.prototype.stringify = function () {\n        var color = hexa2(this.R * 255) + hexa2(this.G * 255) + hexa2(this.B * 255);\n\n        if (this.A < 1) {\n          color += hexa2(this.A * 255);\n        }\n\n        return \"#\" + color;\n      };\n\n      Color.prototype.copy = function () {\n        var newColor = new Color();\n        newColor.R = this.R;\n        newColor.G = this.G;\n        newColor.B = this.B;\n        newColor.A = this.A;\n        newColor.H = this.H;\n        newColor.S = this.S;\n        newColor.L = this.L;\n        return newColor;\n      };\n      /**\n       * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\n       * @this Color\n       * @returns {undefined}\n       */\n\n\n      Color.prototype.hsl2rgb = function () {\n        var H = 6 * this.H;\n        var S = this.S;\n        var L = this.L;\n        var chroma = (1 - Math.abs(2 * L - 1)) * S;\n        var x = chroma * (1 - Math.abs(H % 2 - 1));\n        var R = 0;\n        var G = 0;\n        var B = 0;\n\n        if (H < 3) {\n          if (H < 1) {\n            R = chroma;\n            G = x;\n            B = 0;\n          } else if (H < 2) {\n            R = x;\n            G = chroma;\n            B = 0;\n          } else {\n            // H == 2.\n            R = 0;\n            G = chroma;\n            B = x;\n          }\n        } else if (H < 4) {\n          R = 0;\n          G = x;\n          B = chroma;\n        } else if (H < 5) {\n          R = x;\n          G = 0;\n          B = chroma;\n        } else {\n          R = chroma;\n          G = 0;\n          B = x;\n        }\n\n        var shift = L - chroma * 0.5;\n        this.R = R + shift;\n        this.G = G + shift;\n        this.B = B + shift;\n      };\n\n      Color.prototype.rgb2hsl = function () {\n        var R = this.R;\n        var G = this.G;\n        var B = this.B;\n        var min = Math.min(R, G, B);\n        var max = Math.max(R, G, B);\n        var delta = max - min;\n        this.L = 0.5 * (max + min);\n\n        if (delta < 0.000001) {\n          this.H = 0;\n          this.S = 0;\n        } else {\n          this.S = delta / (1 - Math.abs(2 * this.L - 1));\n\n          if (max === R) {\n            if (G >= B) {\n              this.H = INV6 * ((G - B) / delta);\n            } else {\n              this.H = 1 - INV6 * ((B - G) / delta);\n            }\n          } else if (max === G) {\n            this.H = INV6 * (2 + (B - R) / delta);\n          } else {\n            this.H = INV6 * (4 + (R - G) / delta);\n          }\n        }\n      };\n\n      Color.prototype.parseHexa = function (text) {\n        if (text.charAt(0) !== \"#\") {\n          return false;\n        }\n\n        var R = 0;\n        var G = 0;\n        var B = 0;\n        var A = 1;\n\n        switch (text.length) {\n          case 4:\n            R = parseInt(text.charAt(1), 16) * INV15;\n            G = parseInt(text.charAt(2), 16) * INV15;\n            B = parseInt(text.charAt(3), 16) * INV15;\n            break;\n\n          case 5:\n            R = parseInt(text.charAt(1), 16) * INV15;\n            G = parseInt(text.charAt(2), 16) * INV15;\n            B = parseInt(text.charAt(3), 16) * INV15;\n            A = parseInt(text.charAt(4), 16) * INV15;\n            break;\n\n          case 7:\n            R = parseInt(text.substr(1, 2), 16) * INV255;\n            G = parseInt(text.substr(3, 2), 16) * INV255;\n            B = parseInt(text.substr(5, 2), 16) * INV255;\n            break;\n\n          case 9:\n            R = parseInt(text.substr(1, 2), 16) * INV255;\n            G = parseInt(text.substr(3, 2), 16) * INV255;\n            B = parseInt(text.substr(5, 2), 16) * INV255;\n            A = parseInt(text.substr(7, 2), 16) * INV255;\n            break;\n\n          default:\n        }\n\n        if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\n          this.R = this.G = this.B = this.A = 0;\n        } else {\n          this.R = R;\n          this.G = G;\n          this.B = B;\n          this.A = A;\n        }\n\n        return true;\n      };\n      /**\n       * @param   {string} text - `rgb(200, 140, 50)`\n       * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\n       */\n\n\n      Color.prototype.parseRGB = function (text) {\n        var m = RX_RGB.exec(text);\n\n        if (!m) {\n          return false;\n        }\n\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\n        this.A = 1;\n        return true;\n      };\n      /**\n       * @param   {string} text - `rgba(200, 140, 50, 0.5)`\n       * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\n       */\n\n\n      Color.prototype.parseRGBA = function (text) {\n        var m = RX_RGBA.exec(text);\n\n        if (!m) {\n          return false;\n        }\n\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\n        this.A = clamp01(parseFloat(m[4]));\n        return true;\n      };\n      /**\n       * @param   {string} text - `hsl(200, 140, 50)`\n       * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\n       */\n\n\n      Color.prototype.parseHSL = function (text) {\n        var m = RX_HSL.exec(text);\n\n        if (!m) {\n          return false;\n        }\n\n        this.H = clamp01(parseInt(m[1], 10) * INV359);\n        this.S = clamp01(parseInt(m[2], 10) * INV99);\n        this.L = clamp01(parseInt(m[3], 10) * INV99);\n        this.A = 1;\n        this.hsl2rgb();\n        return true;\n      };\n\n      return Color;\n    }();\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = Color;\n    var INV6 = 1 / 6;\n    var INV15 = 1 / 15;\n    var INV99 = 1 / 99;\n    var INV255 = 1 / 255;\n    var INV359 = 1 / 359;\n    var RX_RGB = /^RGB[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\n    var RX_RGBA = /^RGBA[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9.]+([0-9.]+)/;\n    var RX_HSL = /^HSL[\\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\n\n    function clamp01(value) {\n      if (value < 0) {\n        return 0;\n      }\n\n      if (value > 1) {\n        return 1;\n      }\n\n      return value;\n    }\n\n    function hexa2(value) {\n      var out = Math.floor(value).toString(16);\n\n      if (out.length < 2) {\n        out = \"0\" + out;\n      }\n\n      return out;\n    }\n    /***/\n\n  },\n\n  /***/\n  \"./src/webgl/program.ts\":\n  /*!******************************!*\\\n    !*** ./src/webgl/program.ts ***!\n    \\******************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcWebglProgramTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n\n    var __values = undefined && undefined.__values || function (o) {\n      var s = typeof Symbol === \"function\" && Symbol.iterator,\n          m = s && o[s],\n          i = 0;\n      if (m) return m.call(o);\n      if (o && typeof o.length === \"number\") return {\n        next: function next() {\n          if (o && i >= o.length) o = void 0;\n          return {\n            value: o && o[i++],\n            done: !o\n          };\n        }\n      };\n      throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n    };\n\n    var BPE = Float32Array.BYTES_PER_ELEMENT;\n    /**\n     * Creating  a  WebGL  program  for shaders  is  painful.  This  class\n     * simplifies the process.\n     *\n     * @class Program\n     *\n     * Object properties starting with `$` are WebGL uniforms or attributes.\n     * Uniforms behave as expected: you can read/write a value.\n     * Attributes when read, return the location. And when written, enable/disabled\n     * this attribute. So you read integers and writte booleans.\n     *\n     * @param gl - WebGL context.\n     * @param codes  - Object  with two  mandatory attributes:  `vert` for\n     * vertex shader and `frag` for fragment shader.\n     * @param  includes  -  (optional)  If  defined,  the  `#include  foo`\n     * directives  of  shaders   will  be  replaced  by   the  content  of\n     * `includes.foo`.\n     */\n\n    var Program =\n    /** @class */\n    function () {\n      function Program(gl, codes, includes) {\n        if (includes === void 0) {\n          includes = {};\n        }\n\n        if (typeof codes.vert !== \"string\") {\n          throw Error(\"[webgl.program] Missing attribute `vert` in argument `codes`!\");\n        }\n\n        if (typeof codes.frag !== \"string\") {\n          throw Error(\"[webgl.program] Missing attribute `frag` in argument `codes`!\");\n        }\n\n        codes = parseIncludes(codes, includes);\n        this.gl = gl;\n        Object.freeze(this.gl);\n        this.BPE = BPE;\n        Object.freeze(this.BPE);\n        this._typesNamesLookup = getTypesNamesLookup(gl);\n        var shaderProgram = gl.createProgram();\n\n        if (!shaderProgram) {\n          throw Error(\"Unable to create WebGLProgram!\");\n        }\n\n        this.program = shaderProgram;\n        var vertShader = getVertexShader(gl, codes.vert);\n        gl.attachShader(shaderProgram, vertShader);\n        var fragShader = getFragmentShader(gl, codes.frag);\n        gl.attachShader(shaderProgram, fragShader);\n        gl.linkProgram(shaderProgram);\n\n        this.use = function () {\n          gl.useProgram(shaderProgram);\n        };\n\n        this.attribs = this.createAttributes();\n        this.uniforms = this.createUniforms();\n      }\n\n      Program.prototype.use = function () {\n        this.gl.useProgram(this.program);\n      };\n\n      Program.prototype.getTypeName = function (typeId) {\n        return this._typesNamesLookup[typeId];\n      };\n\n      Program.prototype.bindAttribs = function (buffer) {\n        var e_1, _a, e_2, _b;\n\n        var names = [];\n\n        for (var _i = 1; _i < arguments.length; _i++) {\n          names[_i - 1] = arguments[_i];\n        }\n\n        var that = this;\n        var gl = this.gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        var totalSize = 0;\n\n        try {\n          for (var names_1 = __values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {\n            var name_1 = names_1_1.value;\n            var attrib = that.attribs[name_1];\n\n            if (!attrib) {\n              throw Error(\"Cannot find attribute \\\"\" + name_1 + \"\\\"!\\n\" + \"It may be not active because unused in the shader.\\n\" + \"Available attributes are: \" + Object.keys(that.attribs).map(function (n) {\n                return '\"' + n + '\"';\n              }).join(\", \") + (\" (\" + that.attribs.length + \")\"));\n            }\n\n            totalSize += attrib.size * attrib.length * BPE;\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n\n        var offset = 0;\n\n        try {\n          for (var names_2 = __values(names), names_2_1 = names_2.next(); !names_2_1.done; names_2_1 = names_2.next()) {\n            var name_2 = names_2_1.value;\n            var attrib = that.attribs[name_2];\n            gl.enableVertexAttribArray(attrib.location);\n            gl.vertexAttribPointer(attrib.location, attrib.size * attrib.length, gl.FLOAT, false, // No normalisation.\n            totalSize, offset);\n            offset += attrib.size * attrib.length * BPE;\n          }\n        } catch (e_2_1) {\n          e_2 = {\n            error: e_2_1\n          };\n        } finally {\n          try {\n            if (names_2_1 && !names_2_1.done && (_b = names_2.return)) _b.call(names_2);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n      };\n\n      Program.prototype.setUniform = function (name, value) {\n        var id = \"$\" + name;\n        var map = this;\n        map[id] = value;\n      };\n\n      Program.prototype.createAttributes = function () {\n        var _a = this,\n            gl = _a.gl,\n            program = _a.program;\n\n        var attribs = {};\n        var attribsCount = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n        for (var index = 0; index < attribsCount; index++) {\n          var item = gl.getActiveAttrib(program, index);\n\n          if (!item) {\n            continue;\n          }\n\n          item.typeName = this.getTypeName(item.type);\n          item.length = this.getSize(gl, item);\n          item.location = gl.getAttribLocation(program, item.name);\n          attribs[item.name] = item;\n          Object.defineProperty(this, \"$\" + item.name, {\n            value: item.location,\n            writable: false,\n            enumerable: true,\n            configurable: false\n          });\n        }\n\n        return attribs;\n      };\n\n      Program.prototype.getSize = function (gl, item) {\n        switch (item.type) {\n          case gl.FLOAT_VEC4:\n            return 4;\n\n          case gl.FLOAT_VEC3:\n            return 3;\n\n          case gl.FLOAT_VEC2:\n            return 2;\n\n          case gl.FLOAT:\n            return 1;\n\n          default:\n            throw Error(\"[webgl.program:getSize] I don't know the size of the attribute '\" + item.name + \"' because I don't know the type \" + this.getTypeName(item.type) + \"!\");\n        }\n      };\n\n      Program.prototype.createUniforms = function () {\n        var _a = this,\n            gl = _a.gl,\n            program = _a.program;\n\n        var uniforms = {};\n        var uniformsCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n        for (var index = 0; index < uniformsCount; index++) {\n          var item = gl.getActiveUniform(program, index);\n\n          if (!item) {\n            continue;\n          }\n\n          var location_1 = gl.getUniformLocation(program, item.name);\n\n          if (!location_1) {\n            continue;\n          }\n\n          uniforms[item.name] = location_1;\n          Object.defineProperty(this, \"$\" + item.name, {\n            set: this.createUniformSetter(item, uniforms[item.name], this._typesNamesLookup),\n            get: this.createUniformGetter(item),\n            enumerable: true,\n            configurable: false\n          });\n        }\n\n        return uniforms;\n      };\n\n      Program.prototype.createUniformSetter = function (item, nameGL, lookup) {\n        var gl = this.gl;\n        var nameJS = \"_$\" + item.name;\n\n        switch (item.type) {\n          case gl.BYTE:\n          case gl.UNSIGNED_BYTE:\n          case gl.SHORT:\n          case gl.UNSIGNED_SHORT:\n          case gl.INT:\n          case gl.UNSIGNED_INT:\n          case gl.SAMPLER_2D:\n            // For textures, we specify the texture unit.\n            if (item.size === 1) {\n              return function (v) {\n                gl.uniform1i(nameGL, v);\n                this[nameJS] = v;\n              };\n            } else {\n              return function (v) {\n                gl.uniform1iv(nameGL, v);\n                this[nameJS] = v;\n              };\n            }\n\n          case gl.FLOAT:\n            if (item.size === 1) {\n              return function (v) {\n                gl.uniform1f(nameGL, v);\n                this[nameJS] = v;\n              };\n            } else {\n              return function (v) {\n                gl.uniform1fv(nameGL, v);\n                this[nameJS] = v;\n              };\n            }\n\n          case gl.FLOAT_VEC2:\n            if (item.size === 1) {\n              return function (v) {\n                gl.uniform2fv(nameGL, v);\n                this[nameJS] = v;\n              };\n            } else {\n              throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC2 in uniform `\" + item.name + \"'!'\");\n            }\n\n          case gl.FLOAT_VEC3:\n            if (item.size === 1) {\n              return function (v) {\n                gl.uniform3fv(nameGL, v);\n                this[nameJS] = v;\n              };\n            } else {\n              throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC3 in uniform `\" + item.name + \"'!'\");\n            }\n\n          case gl.FLOAT_VEC4:\n            if (item.size === 1) {\n              return function (v) {\n                gl.uniform4fv(nameGL, v);\n                this[nameJS] = v;\n              };\n            } else {\n              throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_VEC4 in uniform `\" + item.name + \"'!'\");\n            }\n\n          case gl.FLOAT_MAT3:\n            if (item.size === 1) {\n              return function (v) {\n                gl.uniformMatrix3fv(nameGL, false, v);\n                this[nameJS] = v;\n              };\n            } else {\n              throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT3 in uniform `\" + item.name + \"'!'\");\n            }\n\n          case gl.FLOAT_MAT4:\n            if (item.size === 1) {\n              return function (v) {\n                gl.uniformMatrix4fv(nameGL, false, v);\n                this[nameJS] = v;\n              };\n            } else {\n              throw Error(\"[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT4 in uniform `\" + item.name + \"'!'\");\n            }\n\n          default:\n            throw Error(\"[webgl.program.createWriter] Don't know how to deal with uniform `\" + item.name + \"` of type \" + lookup[item.type] + \"!\");\n        }\n      };\n\n      Program.prototype.createUniformGetter = function (item) {\n        var name = \"_$\" + item.name;\n        return function () {\n          return this[name];\n        };\n      };\n\n      return Program;\n    }();\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = Program;\n    /**\n     * This is a preprocessor for shaders.\n     * Directives  `#include`  will be  replaced  by  the content  of  the\n     * correspondent attribute in `includes`.\n     */\n\n    function parseIncludes(codes, includes) {\n      return {\n        vert: parseInclude(codes.vert, includes),\n        frag: parseInclude(codes.frag, includes)\n      };\n    }\n\n    function parseInclude(code, includes) {\n      return code.split(\"\\n\").map(function (line) {\n        if (line.trim().substr(0, 8) !== \"#include\") {\n          return line;\n        }\n\n        var pos = line.indexOf(\"#include\") + 8;\n        var includeName = line.substr(pos).trim(); // We accept all this systaxes:\n        // #include foo\n        // #include 'foo'\n        // #include <foo>\n        // #include \"foo\"\n\n        if (\"'<\\\"\".indexOf(includeName.charAt(0)) > -1) {\n          includeName = includeName.substr(1, includeName.length - 2);\n        }\n\n        var snippet = includes[includeName];\n\n        if (typeof snippet !== \"string\") {\n          console.error(\"Include <\" + includeName + \"> not found in \", includes);\n          throw Error(\"Include not found in shader: \" + includeName);\n        }\n\n        return snippet;\n      }).join(\"\\n\");\n    }\n\n    function getShader(type, gl, code) {\n      if (type !== gl.VERTEX_SHADER && type !== gl.FRAGMENT_SHADER) {\n        throw Error(\"Type must be VERTEX_SHADER or FRAGMENT_SHADER!\");\n      }\n\n      var shader = gl.createShader(type);\n\n      if (!shader) {\n        throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n      }\n\n      gl.shaderSource(shader, code);\n      gl.compileShader(shader);\n\n      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        console.info(\"Here is your buggy shader's code:\");\n        console.info(code);\n        console.error(\"An error occurred compiling the shader: \" + gl.getShaderInfoLog(shader));\n        throw Error(\"Unable to create a \" + (type === gl.VERTEX_SHADER ? \"VERTEX\" : \"FRAGMENT\") + \" shader!\");\n      }\n\n      return shader;\n    }\n\n    function getFragmentShader(gl, code) {\n      return getShader(gl.FRAGMENT_SHADER, gl, code);\n    }\n\n    function getVertexShader(gl, code) {\n      return getShader(gl.VERTEX_SHADER, gl, code);\n    }\n\n    function getTypesNamesLookup(gl) {\n      var lookup = {};\n\n      for (var k in gl) {\n        if (k !== k.toUpperCase()) {\n          continue;\n        }\n\n        var v = gl[k];\n\n        if (typeof v === \"number\") {\n          lookup[v] = k;\n        }\n      }\n\n      return lookup;\n    }\n    /***/\n\n  },\n\n  /***/\n  \"./src/webgl/resize.ts\":\n  /*!*****************************!*\\\n    !*** ./src/webgl/resize.ts ***!\n    \\*****************************/\n\n  /*! exports provided: default */\n\n  /***/\n  function srcWebglResizeTs(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    __webpack_require__.r(__webpack_exports__);\n    /**\n     * Resolution in CSS pixels. If omitted, the real resolution\n     * of the device is taken. On smartphones, for instance,\n     * the resolution is often greater than 1.\n     *\n     * Return `true` if the size has changed.\n     */\n\n    /* harmony default export */\n\n\n    __webpack_exports__[\"default\"] = function (gl, resolution) {\n      if (resolution === void 0) {\n        resolution = 0;\n      }\n\n      if (resolution <= 0) {\n        resolution = window.devicePixelRatio;\n      }\n\n      var canvas = gl.canvas;\n      var displayWidth = Math.floor(canvas.clientWidth * resolution);\n      var displayHeight = Math.floor(canvas.clientHeight * resolution); // Check if the canvas is not the same size.\n\n      if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\n        // Make the canvas the same size\n        canvas.width = displayWidth;\n        canvas.height = displayHeight;\n        gl.viewport(0, 0, displayWidth, displayHeight);\n        return true;\n      }\n\n      return false;\n    };\n    /***/\n\n  }\n  /******/\n\n});","import React from \"react\"\n\nimport \"./canvas.css\"\n\ninterface ICanvasProps {\n    init: (canvas: HTMLCanvasElement) => void\n}\n\nexport default class Canvas extends React.Component<ICanvasProps, {}> {\n    private readonly ref: React.RefObject<HTMLCanvasElement> = React.createRef();\n\n    componentDidMount() {\n        const canvas = this.ref.current\n        if (!canvas) return\n        this.props.init(canvas)\n    }\n\n    render() {\n        return (<canvas ref={this.ref} className=\"Canvas\"></canvas>)\n    }\n}\n","import React from 'react';\nimport './App.css';\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n        <h1>Tutorials</h1>\n        <ul>\n            <li><a href=\"tuto-clear.html\">Hello world!</a></li>\n            <li><a href=\"tuto-background.html\">Scalable background</a></li>\n            <li><a href=\"tuto-sprites-1.html\">Sprites (1)</a></li>\n        </ul>\n        <h1>Vanilla Javascipt examples</h1>\n        <a href=\"examples/index.html\">Look at this page</a>.\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\"\nimport Markdown from 'markdown-to-jsx'\n\nimport \"./description.css\"\n\ninterface TDescriptionProps {\n    content: string\n}\ninterface TDescriptionState {}\n\nexport default class Description extends React.Component<TDescriptionProps, TDescriptionState> {\n    render() {\n        const classes = ['view-Description']\n\n        return (<div className={classes.join(' ')}>\n            <Markdown options={{ forceBlock: true }}>{this.props.content}</Markdown>\n        </div>)\n    }\n}\n","export { default } from './description'","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport FlatLand from 'flat-land-gl'\nimport Description from '../../../view/description'\nimport description from './clear.md'\n\nimport Canvas from '../../../canvas'\n\nReactDOM.render(<div>\n    <Canvas init={init}/>\n    <Description content={description}/>\n</div>, document.getElementById('root'));\n\n\nfunction init(canvas: HTMLCanvasElement) {\n    const scene = new FlatLand.Scene(canvas)\n    new FlatLand.Painter.Clear({ color: \"#d72\" })\n    scene.start()\n}\n","export default \"```js\\nconst scene = new FlatLand.Scene(canvas)\\nnew FlatLand.Painter.Clear({\\n    scene, color: \\\"#d72\\\"\\n})\\nscene.start()\\n```\\n\""],"sourceRoot":""}